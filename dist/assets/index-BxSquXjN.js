function MA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function FA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xx={exports:{}},Fc={},Ex={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=Symbol.for("react.element"),UA=Symbol.for("react.portal"),BA=Symbol.for("react.fragment"),zA=Symbol.for("react.strict_mode"),$A=Symbol.for("react.profiler"),HA=Symbol.for("react.provider"),WA=Symbol.for("react.context"),qA=Symbol.for("react.forward_ref"),KA=Symbol.for("react.suspense"),GA=Symbol.for("react.memo"),QA=Symbol.for("react.lazy"),wv=Symbol.iterator;function XA(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var Tx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sx=Object.assign,Ix={};function Zi(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Tx}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Px(){}Px.prototype=Zi.prototype;function sm(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Tx}var im=sm.prototype=new Px;im.constructor=sm;Sx(im,Zi.prototype);im.isPureReactComponent=!0;var xv=Array.isArray,Ax=Object.prototype.hasOwnProperty,om={current:null},Cx={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ax.call(e,r)&&!Cx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ja,type:t,key:i,ref:o,props:s,_owner:om.current}}function YA(t,e){return{$$typeof:Ja,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function am(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ja}function JA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ev=/\/+/g;function ud(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JA(""+t.key):e.toString(36)}function du(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ja:case UA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ud(o,0):r,xv(s)?(n="",t!=null&&(n=t.replace(Ev,"$&/")+"/"),du(s,e,n,"",function(c){return c})):s!=null&&(am(s)&&(s=YA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ev,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",xv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+ud(i,a);o+=du(i,e,n,l,s)}else if(l=XA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+ud(i,a++),o+=du(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fl(t,e,n){if(t==null)return t;var r=[],s=0;return du(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ZA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},fu={transition:null},eC={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:fu,ReactCurrentOwner:om};function Nx(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Fl,forEach:function(t,e,n){Fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fl(t,function(){e++}),e},toArray:function(t){return Fl(t,function(e){return e})||[]},only:function(t){if(!am(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Zi;ie.Fragment=BA;ie.Profiler=$A;ie.PureComponent=sm;ie.StrictMode=zA;ie.Suspense=KA;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eC;ie.act=Nx;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=om.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ax.call(e,l)&&!Cx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ja,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:WA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HA,_context:t},t.Consumer=t};ie.createElement=Rx;ie.createFactory=function(t){var e=Rx.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:qA,render:t}};ie.isValidElement=am;ie.lazy=function(t){return{$$typeof:QA,_payload:{_status:-1,_result:t},_init:ZA}};ie.memo=function(t,e){return{$$typeof:GA,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};ie.unstable_act=Nx;ie.useCallback=function(t,e){return Rt.current.useCallback(t,e)};ie.useContext=function(t){return Rt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Rt.current.useEffect(t,e)};ie.useId=function(){return Rt.current.useId()};ie.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Rt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};ie.useRef=function(t){return Rt.current.useRef(t)};ie.useState=function(t){return Rt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Rt.current.useTransition()};ie.version="18.3.1";Ex.exports=ie;var b=Ex.exports;const Uc=FA(b),tC=MA({__proto__:null,default:Uc},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC=b,rC=Symbol.for("react.element"),sC=Symbol.for("react.fragment"),iC=Object.prototype.hasOwnProperty,oC=nC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aC={key:!0,ref:!0,__self:!0,__source:!0};function kx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iC.call(e,r)&&!aC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:rC,type:t,key:i,ref:o,props:s,_owner:oC.current}}Fc.Fragment=sC;Fc.jsx=kx;Fc.jsxs=kx;xx.exports=Fc;var d=xx.exports,hf={},bx={exports:{}},Xt={},Dx={exports:{}},Vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var J=z.length;z.push(Q);e:for(;0<J;){var G=J-1>>>1,se=z[G];if(0<s(se,Q))z[G]=Q,z[J]=se,J=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],J=z.pop();if(J!==Q){z[0]=J;e:for(var G=0,se=z.length,ge=se>>>1;G<ge;){var Ze=2*(G+1)-1,xt=z[Ze],Et=Ze+1,Jt=z[Et];if(0>s(xt,J))Et<se&&0>s(Jt,xt)?(z[G]=Jt,z[Et]=J,G=Et):(z[G]=xt,z[Ze]=J,G=Ze);else if(Et<se&&0>s(Jt,J))z[G]=Jt,z[Et]=J,G=Et;else break e}}return Q}function s(z,Q){var J=z.sortIndex-Q.sortIndex;return J!==0?J:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,_=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=z)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function R(z){if(v=!1,T(z),!_)if(n(l)!==null)_=!0,le(j);else{var Q=n(c);Q!==null&&Ve(R,Q.startTime-z)}}function j(z,Q){_=!1,v&&(v=!1,x(E),E=-1),y=!0;var J=m;try{for(T(Q),f=n(l);f!==null&&(!(f.expirationTime>Q)||z&&!k());){var G=f.callback;if(typeof G=="function"){f.callback=null,m=f.priorityLevel;var se=G(f.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),T(Q)}else r(l);f=n(l)}if(f!==null)var ge=!0;else{var Ze=n(c);Ze!==null&&Ve(R,Ze.startTime-Q),ge=!1}return ge}finally{f=null,m=J,y=!1}}var V=!1,P=null,E=-1,A=5,C=-1;function k(){return!(t.unstable_now()-C<A)}function D(){if(P!==null){var z=t.unstable_now();C=z;var Q=!0;try{Q=P(!0,z)}finally{Q?N():(V=!1,P=null)}}else V=!1}var N;if(typeof w=="function")N=function(){w(D)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Je=ee.port2;ee.port1.onmessage=D,N=function(){Je.postMessage(null)}}else N=function(){S(D,0)};function le(z){P=z,V||(V=!0,N())}function Ve(z,Q){E=S(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,le(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var J=m;m=Q;try{return z()}finally{m=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=m;m=z;try{return Q()}finally{m=J}},t.unstable_scheduleCallback=function(z,Q,J){var G=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?G+J:G):J=G,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,z={id:h++,callback:Q,priorityLevel:z,startTime:J,expirationTime:se,sortIndex:-1},J>G?(z.sortIndex=J,e(c,z),n(l)===null&&z===n(c)&&(v?(x(E),E=-1):v=!0,Ve(R,J-G))):(z.sortIndex=se,e(l,z),_||y||(_=!0,le(j))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var Q=m;return function(){var J=m;m=Q;try{return z.apply(this,arguments)}finally{m=J}}}})(Vx);Dx.exports=Vx;var lC=Dx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=b,Gt=lC;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jx=new Set,ya={};function zs(t,e){Vi(t,e),Vi(t+"Capture",e)}function Vi(t,e){for(ya[t]=e,t=0;t<e.length;t++)jx.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),df=Object.prototype.hasOwnProperty,cC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},Sv={};function hC(t){return df.call(Sv,t)?!0:df.call(Tv,t)?!1:cC.test(t)?Sv[t]=!0:(Tv[t]=!0,!1)}function dC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fC(t,e,n,r){if(e===null||typeof e>"u"||dC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var lm=/[\-:]([a-z])/g;function um(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lm,um);ot[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lm,um);ot[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lm,um);ot[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cm(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fC(e,n,s,r)&&(n=null),r||s===null?hC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=uC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ul=Symbol.for("react.element"),oi=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),dm=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),fm=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),Mx=Symbol.for("react.offscreen"),Iv=Symbol.iterator;function Co(t){return t===null||typeof t!="object"?null:(t=Iv&&t[Iv]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,cd;function Uo(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var hd=!1;function dd(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uo(t):""}function pC(t){switch(t.tag){case 5:return Uo(t.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case oi:return"Portal";case ff:return"Profiler";case hm:return"StrictMode";case pf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lx:return(t.displayName||"Context")+".Consumer";case Ox:return(t._context.displayName||"Context")+".Provider";case dm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fm:return e=t.displayName||null,e!==null?e:gf(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return gf(t(e))}catch{}}return null}function mC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(e);case 8:return e===hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gC(t){var e=Fx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bl(t){t._valueTracker||(t._valueTracker=gC(t))}function Ux(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yf(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bx(t,e){e=e.checked,e!=null&&cm(t,"checked",e,!1)}function vf(t,e){Bx(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_f(t,e.type,n):e.hasOwnProperty("defaultValue")&&_f(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Av(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _f(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Si(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Bo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function zx(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $x(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$x(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,Hx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yC=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){yC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function Wx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function qx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var vC=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ef(t,e){if(e){if(vC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sf=null;function pm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var If=null,Ii=null,Pi=null;function Nv(t){if(t=tl(t)){if(typeof If!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Wc(e),If(t.stateNode,t.type,e))}}function Kx(t){Ii?Pi?Pi.push(t):Pi=[t]:Ii=t}function Gx(){if(Ii){var t=Ii,e=Pi;if(Pi=Ii=null,Nv(t),e)for(t=0;t<e.length;t++)Nv(e[t])}}function Qx(t,e){return t(e)}function Xx(){}var fd=!1;function Yx(t,e,n){if(fd)return t(e,n);fd=!0;try{return Qx(t,e,n)}finally{fd=!1,(Ii!==null||Pi!==null)&&(Xx(),Gx())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=Wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Pf=!1;if(Jn)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Pf=!1}function _C(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Yo=!1,Uu=null,Bu=!1,Af=null,wC={onError:function(t){Yo=!0,Uu=t}};function xC(t,e,n,r,s,i,o,a,l){Yo=!1,Uu=null,_C.apply(wC,arguments)}function EC(t,e,n,r,s,i,o,a,l){if(xC.apply(this,arguments),Yo){if(Yo){var c=Uu;Yo=!1,Uu=null}else throw Error(B(198));Bu||(Bu=!0,Af=c)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kv(t){if($s(t)!==t)throw Error(B(188))}function TC(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kv(s),t;if(i===r)return kv(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Zx(t){return t=TC(t),t!==null?eE(t):null}function eE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eE(t);if(e!==null)return e;t=t.sibling}return null}var tE=Gt.unstable_scheduleCallback,bv=Gt.unstable_cancelCallback,SC=Gt.unstable_shouldYield,IC=Gt.unstable_requestPaint,Oe=Gt.unstable_now,PC=Gt.unstable_getCurrentPriorityLevel,mm=Gt.unstable_ImmediatePriority,nE=Gt.unstable_UserBlockingPriority,zu=Gt.unstable_NormalPriority,AC=Gt.unstable_LowPriority,rE=Gt.unstable_IdlePriority,Bc=null,Cn=null;function CC(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Bc,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:kC,RC=Math.log,NC=Math.LN2;function kC(t){return t>>>=0,t===0?32:31-(RC(t)/NC|0)|0}var $l=64,Hl=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $u(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=zo(a):(i&=o,i!==0&&(r=zo(i)))}else o=n&~s,o!==0?r=zo(o):i!==0&&(r=zo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function bC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=bC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sE(){var t=$l;return $l<<=1,!($l&4194240)&&($l=64),t}function pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function VC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function iE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oE,ym,aE,lE,uE,Rf=!1,Wl=[],kr=null,br=null,Dr=null,wa=new Map,xa=new Map,xr=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dv(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(e.pointerId)}}function No(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=tl(e),e!==null&&ym(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OC(t,e,n,r,s){switch(e){case"focusin":return kr=No(kr,t,e,n,r,s),!0;case"dragenter":return br=No(br,t,e,n,r,s),!0;case"mouseover":return Dr=No(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wa.set(i,No(wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xa.set(i,No(xa.get(i)||null,t,e,n,r,s)),!0}return!1}function cE(t){var e=vs(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=Jx(n),e!==null){t.blockedOn=e,uE(t.priority,function(){aE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sf=r,n.target.dispatchEvent(r),Sf=null}else return e=tl(n),e!==null&&ym(e),t.blockedOn=n,!1;e.shift()}return!0}function Vv(t,e,n){pu(t)&&n.delete(e)}function LC(){Rf=!1,kr!==null&&pu(kr)&&(kr=null),br!==null&&pu(br)&&(br=null),Dr!==null&&pu(Dr)&&(Dr=null),wa.forEach(Vv),xa.forEach(Vv)}function ko(t,e){t.blockedOn===e&&(t.blockedOn=null,Rf||(Rf=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,LC)))}function Ea(t){function e(s){return ko(s,t)}if(0<Wl.length){ko(Wl[0],t);for(var n=1;n<Wl.length;n++){var r=Wl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&ko(kr,t),br!==null&&ko(br,t),Dr!==null&&ko(Dr,t),wa.forEach(e),xa.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)cE(n),n.blockedOn===null&&xr.shift()}var Ai=lr.ReactCurrentBatchConfig,Hu=!0;function MC(t,e,n,r){var s=pe,i=Ai.transition;Ai.transition=null;try{pe=1,vm(t,e,n,r)}finally{pe=s,Ai.transition=i}}function FC(t,e,n,r){var s=pe,i=Ai.transition;Ai.transition=null;try{pe=4,vm(t,e,n,r)}finally{pe=s,Ai.transition=i}}function vm(t,e,n,r){if(Hu){var s=Nf(t,e,n,r);if(s===null)Sd(t,e,r,Wu,n),Dv(t,r);else if(OC(s,t,e,n,r))r.stopPropagation();else if(Dv(t,r),e&4&&-1<jC.indexOf(t)){for(;s!==null;){var i=tl(s);if(i!==null&&oE(i),i=Nf(t,e,n,r),i===null&&Sd(t,e,r,Wu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Sd(t,e,r,null,n)}}var Wu=null;function Nf(t,e,n,r){if(Wu=null,t=pm(r),t=vs(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wu=t,null}function hE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PC()){case mm:return 1;case nE:return 4;case zu:case AC:return 16;case rE:return 536870912;default:return 16}default:return 16}}var Ar=null,_m=null,mu=null;function dE(){if(mu)return mu;var t,e=_m,n=e.length,r,s="value"in Ar?Ar.value:Ar.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mu=s.slice(t,1<r?1-r:void 0)}function gu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function jv(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ql:jv,this.isPropagationStopped=jv,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wm=Yt(eo),el=Ne({},eo,{view:0,detail:0}),UC=Yt(el),md,gd,bo,zc=Ne({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(md=t.screenX-bo.screenX,gd=t.screenY-bo.screenY):gd=md=0,bo=t),md)},movementY:function(t){return"movementY"in t?t.movementY:gd}}),Ov=Yt(zc),BC=Ne({},zc,{dataTransfer:0}),zC=Yt(BC),$C=Ne({},el,{relatedTarget:0}),yd=Yt($C),HC=Ne({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),WC=Yt(HC),qC=Ne({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KC=Yt(qC),GC=Ne({},eo,{data:0}),Lv=Yt(GC),QC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YC[t])?!!e[t]:!1}function xm(){return JC}var ZC=Ne({},el,{key:function(t){if(t.key){var e=QC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xm,charCode:function(t){return t.type==="keypress"?gu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eR=Yt(ZC),tR=Ne({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mv=Yt(tR),nR=Ne({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xm}),rR=Yt(nR),sR=Ne({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),iR=Yt(sR),oR=Ne({},zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aR=Yt(oR),lR=[9,13,27,32],Em=Jn&&"CompositionEvent"in window,Jo=null;Jn&&"documentMode"in document&&(Jo=document.documentMode);var uR=Jn&&"TextEvent"in window&&!Jo,fE=Jn&&(!Em||Jo&&8<Jo&&11>=Jo),Fv=" ",Uv=!1;function pE(t,e){switch(t){case"keyup":return lR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function cR(t,e){switch(t){case"compositionend":return mE(e);case"keypress":return e.which!==32?null:(Uv=!0,Fv);case"textInput":return t=e.data,t===Fv&&Uv?null:t;default:return null}}function hR(t,e){if(li)return t==="compositionend"||!Em&&pE(t,e)?(t=dE(),mu=_m=Ar=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fE&&e.locale!=="ko"?null:e.data;default:return null}}var dR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dR[t.type]:e==="textarea"}function gE(t,e,n,r){Kx(r),e=qu(e,"onChange"),0<e.length&&(n=new wm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zo=null,Ta=null;function fR(t){AE(t,0)}function $c(t){var e=hi(t);if(Ux(e))return t}function pR(t,e){if(t==="change")return e}var yE=!1;if(Jn){var vd;if(Jn){var _d="oninput"in document;if(!_d){var zv=document.createElement("div");zv.setAttribute("oninput","return;"),_d=typeof zv.oninput=="function"}vd=_d}else vd=!1;yE=vd&&(!document.documentMode||9<document.documentMode)}function $v(){Zo&&(Zo.detachEvent("onpropertychange",vE),Ta=Zo=null)}function vE(t){if(t.propertyName==="value"&&$c(Ta)){var e=[];gE(e,Ta,t,pm(t)),Yx(fR,e)}}function mR(t,e,n){t==="focusin"?($v(),Zo=e,Ta=n,Zo.attachEvent("onpropertychange",vE)):t==="focusout"&&$v()}function gR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(Ta)}function yR(t,e){if(t==="click")return $c(e)}function vR(t,e){if(t==="input"||t==="change")return $c(e)}function _R(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:_R;function Sa(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!df.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wv(t,e){var n=Hv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hv(n)}}function _E(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_E(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wE(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wR(t){var e=wE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_E(n.ownerDocument.documentElement,n)){if(r!==null&&Tm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Wv(n,i);var o=Wv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xR=Jn&&"documentMode"in document&&11>=document.documentMode,ui=null,kf=null,ea=null,bf=!1;function qv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bf||ui==null||ui!==Fu(r)||(r=ui,"selectionStart"in r&&Tm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ea&&Sa(ea,r)||(ea=r,r=qu(kf,"onSelect"),0<r.length&&(e=new wm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ci={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},wd={},xE={};Jn&&(xE=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function Hc(t){if(wd[t])return wd[t];if(!ci[t])return t;var e=ci[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xE)return wd[t]=e[n];return t}var EE=Hc("animationend"),TE=Hc("animationiteration"),SE=Hc("animationstart"),IE=Hc("transitionend"),PE=new Map,Kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){PE.set(t,e),zs(e,[t])}for(var xd=0;xd<Kv.length;xd++){var Ed=Kv[xd],ER=Ed.toLowerCase(),TR=Ed[0].toUpperCase()+Ed.slice(1);es(ER,"on"+TR)}es(EE,"onAnimationEnd");es(TE,"onAnimationIteration");es(SE,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(IE,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SR=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function Gv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EC(r,e,void 0,t),t.currentTarget=null}function AE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Gv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Gv(s,a,c),i=l}}}if(Bu)throw t=Af,Bu=!1,Af=null,t}function xe(t,e){var n=e[Lf];n===void 0&&(n=e[Lf]=new Set);var r=t+"__bubble";n.has(r)||(CE(e,t,2,!1),n.add(r))}function Td(t,e,n){var r=0;e&&(r|=4),CE(n,t,r,e)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[Gl]){t[Gl]=!0,jx.forEach(function(n){n!=="selectionchange"&&(SR.has(n)||Td(n,!1,t),Td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gl]||(e[Gl]=!0,Td("selectionchange",!1,e))}}function CE(t,e,n,r){switch(hE(e)){case 1:var s=MC;break;case 4:s=FC;break;default:s=vm}n=s.bind(null,e,n,t),s=void 0,!Pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Yx(function(){var c=i,h=pm(n),f=[];e:{var m=PE.get(t);if(m!==void 0){var y=wm,_=t;switch(t){case"keypress":if(gu(n)===0)break e;case"keydown":case"keyup":y=eR;break;case"focusin":_="focus",y=yd;break;case"focusout":_="blur",y=yd;break;case"beforeblur":case"afterblur":y=yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=zC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=rR;break;case EE:case TE:case SE:y=WC;break;case IE:y=iR;break;case"scroll":y=UC;break;case"wheel":y=aR;break;case"copy":case"cut":case"paste":y=KC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Mv}var v=(e&4)!==0,S=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var w=c,T;w!==null;){T=w;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,x!==null&&(R=_a(w,x),R!=null&&v.push(Pa(w,R,T)))),S)break;w=w.return}0<v.length&&(m=new y(m,_,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Sf&&(_=n.relatedTarget||n.fromElement)&&(vs(_)||_[Zn]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=c,_=_?vs(_):null,_!==null&&(S=$s(_),_!==S||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(v=Ov,R="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=Mv,R="onPointerLeave",x="onPointerEnter",w="pointer"),S=y==null?m:hi(y),T=_==null?m:hi(_),m=new v(R,w+"leave",y,n,h),m.target=S,m.relatedTarget=T,R=null,vs(h)===c&&(v=new v(x,w+"enter",_,n,h),v.target=T,v.relatedTarget=S,R=v),S=R,y&&_)t:{for(v=y,x=_,w=0,T=v;T;T=ni(T))w++;for(T=0,R=x;R;R=ni(R))T++;for(;0<w-T;)v=ni(v),w--;for(;0<T-w;)x=ni(x),T--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=ni(v),x=ni(x)}v=null}else v=null;y!==null&&Qv(f,m,y,v,!1),_!==null&&S!==null&&Qv(f,S,_,v,!0)}}e:{if(m=c?hi(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=pR;else if(Bv(m))if(yE)j=vR;else{j=gR;var V=mR}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=yR);if(j&&(j=j(t,c))){gE(f,j,n,h);break e}V&&V(t,m,c),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&_f(m,"number",m.value)}switch(V=c?hi(c):window,t){case"focusin":(Bv(V)||V.contentEditable==="true")&&(ui=V,kf=c,ea=null);break;case"focusout":ea=kf=ui=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,qv(f,n,h);break;case"selectionchange":if(xR)break;case"keydown":case"keyup":qv(f,n,h)}var P;if(Em)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else li?pE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(fE&&n.locale!=="ko"&&(li||E!=="onCompositionStart"?E==="onCompositionEnd"&&li&&(P=dE()):(Ar=h,_m="value"in Ar?Ar.value:Ar.textContent,li=!0)),V=qu(c,E),0<V.length&&(E=new Lv(E,t,null,n,h),f.push({event:E,listeners:V}),P?E.data=P:(P=mE(n),P!==null&&(E.data=P)))),(P=uR?cR(t,n):hR(t,n))&&(c=qu(c,"onBeforeInput"),0<c.length&&(h=new Lv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=P))}AE(f,e)})}function Pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_a(t,n),i!=null&&r.unshift(Pa(t,i,s)),i=_a(t,e),i!=null&&r.push(Pa(t,i,s))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=_a(n,i),l!=null&&o.unshift(Pa(n,l,a))):s||(l=_a(n,i),l!=null&&o.push(Pa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IR=/\r\n?/g,PR=/\u0000|\uFFFD/g;function Xv(t){return(typeof t=="string"?t:""+t).replace(IR,`
`).replace(PR,"")}function Ql(t,e,n){if(e=Xv(e),Xv(t)!==e&&n)throw Error(B(425))}function Ku(){}var Df=null,Vf=null;function jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(t){return Yv.resolve(null).then(t).catch(RR)}:Of;function RR(t){setTimeout(function(){throw t})}function Id(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ea(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ea(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),An="__reactFiber$"+to,Aa="__reactProps$"+to,Zn="__reactContainer$"+to,Lf="__reactEvents$"+to,NR="__reactListeners$"+to,kR="__reactHandles$"+to;function vs(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zn]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jv(t);t!==null;){if(n=t[An])return n;t=Jv(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[An]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Wc(t){return t[Aa]||null}var Mf=[],di=-1;function ts(t){return{current:t}}function Se(t){0>di||(t.current=Mf[di],Mf[di]=null,di--)}function ve(t,e){di++,Mf[di]=t.current,t.current=e}var Kr={},_t=ts(Kr),jt=ts(!1),Ns=Kr;function ji(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function Gu(){Se(jt),Se(_t)}function Zv(t,e,n){if(_t.current!==Kr)throw Error(B(168));ve(_t,e),ve(jt,n)}function RE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,mC(t)||"Unknown",s));return Ne({},n,r)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,Ns=_t.current,ve(_t,t),ve(jt,jt.current),!0}function e0(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=RE(t,e,Ns),r.__reactInternalMemoizedMergedChildContext=t,Se(jt),Se(_t),ve(_t,t)):Se(jt),ve(jt,n)}var Un=null,qc=!1,Pd=!1;function NE(t){Un===null?Un=[t]:Un.push(t)}function bR(t){qc=!0,NE(t)}function ns(){if(!Pd&&Un!==null){Pd=!0;var t=0,e=pe;try{var n=Un;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Un=null,qc=!1}catch(s){throw Un!==null&&(Un=Un.slice(t+1)),tE(mm,ns),s}finally{pe=e,Pd=!1}}return null}var fi=[],pi=0,Xu=null,Yu=0,rn=[],sn=0,ks=null,Bn=1,zn="";function ds(t,e){fi[pi++]=Yu,fi[pi++]=Xu,Xu=t,Yu=e}function kE(t,e,n){rn[sn++]=Bn,rn[sn++]=zn,rn[sn++]=ks,ks=t;var r=Bn;t=zn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-yn(e)+s|n<<s|r,zn=i+t}else Bn=1<<i|n<<s|r,zn=t}function Sm(t){t.return!==null&&(ds(t,1),kE(t,1,0))}function Im(t){for(;t===Xu;)Xu=fi[--pi],fi[pi]=null,Yu=fi[--pi],fi[pi]=null;for(;t===ks;)ks=rn[--sn],rn[sn]=null,zn=rn[--sn],rn[sn]=null,Bn=rn[--sn],rn[sn]=null}var Wt=null,$t=null,Ie=!1,gn=null;function bE(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,$t=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Bn,overflow:zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,$t=null,!0):!1;default:return!1}}function Ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uf(t){if(Ie){var e=$t;if(e){var n=e;if(!t0(t,e)){if(Ff(t))throw Error(B(418));e=Vr(n.nextSibling);var r=Wt;e&&t0(t,e)?bE(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Wt=t)}}else{if(Ff(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ie=!1,Wt=t}}}function n0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Xl(t){if(t!==Wt)return!1;if(!Ie)return n0(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jf(t.type,t.memoizedProps)),e&&(e=$t)){if(Ff(t))throw DE(),Error(B(418));for(;e;)bE(t,e),e=Vr(e.nextSibling)}if(n0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Wt?Vr(t.stateNode.nextSibling):null;return!0}function DE(){for(var t=$t;t;)t=Vr(t.nextSibling)}function Oi(){$t=Wt=null,Ie=!1}function Pm(t){gn===null?gn=[t]:gn.push(t)}var DR=lr.ReactCurrentBatchConfig;function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Yl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r0(t){var e=t._init;return e(t._payload)}function VE(t){function e(x,w){if(t){var T=x.deletions;T===null?(x.deletions=[w],x.flags|=16):T.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Mr(x,w),x.index=0,x.sibling=null,x}function i(x,w,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<w?(x.flags|=2,w):T):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,T,R){return w===null||w.tag!==6?(w=Dd(T,x.mode,R),w.return=x,w):(w=s(w,T),w.return=x,w)}function l(x,w,T,R){var j=T.type;return j===ai?h(x,w,T.props.children,R,T.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===vr&&r0(j)===w.type)?(R=s(w,T.props),R.ref=Do(x,w,T),R.return=x,R):(R=Tu(T.type,T.key,T.props,null,x.mode,R),R.ref=Do(x,w,T),R.return=x,R)}function c(x,w,T,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Vd(T,x.mode,R),w.return=x,w):(w=s(w,T.children||[]),w.return=x,w)}function h(x,w,T,R,j){return w===null||w.tag!==7?(w=Is(T,x.mode,R,j),w.return=x,w):(w=s(w,T),w.return=x,w)}function f(x,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Dd(""+w,x.mode,T),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ul:return T=Tu(w.type,w.key,w.props,null,x.mode,T),T.ref=Do(x,null,w),T.return=x,T;case oi:return w=Vd(w,x.mode,T),w.return=x,w;case vr:var R=w._init;return f(x,R(w._payload),T)}if(Bo(w)||Co(w))return w=Is(w,x.mode,T,null),w.return=x,w;Yl(x,w)}return null}function m(x,w,T,R){var j=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:a(x,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ul:return T.key===j?l(x,w,T,R):null;case oi:return T.key===j?c(x,w,T,R):null;case vr:return j=T._init,m(x,w,j(T._payload),R)}if(Bo(T)||Co(T))return j!==null?null:h(x,w,T,R,null);Yl(x,T)}return null}function y(x,w,T,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(T)||null,a(w,x,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ul:return x=x.get(R.key===null?T:R.key)||null,l(w,x,R,j);case oi:return x=x.get(R.key===null?T:R.key)||null,c(w,x,R,j);case vr:var V=R._init;return y(x,w,T,V(R._payload),j)}if(Bo(R)||Co(R))return x=x.get(T)||null,h(w,x,R,j,null);Yl(w,R)}return null}function _(x,w,T,R){for(var j=null,V=null,P=w,E=w=0,A=null;P!==null&&E<T.length;E++){P.index>E?(A=P,P=null):A=P.sibling;var C=m(x,P,T[E],R);if(C===null){P===null&&(P=A);break}t&&P&&C.alternate===null&&e(x,P),w=i(C,w,E),V===null?j=C:V.sibling=C,V=C,P=A}if(E===T.length)return n(x,P),Ie&&ds(x,E),j;if(P===null){for(;E<T.length;E++)P=f(x,T[E],R),P!==null&&(w=i(P,w,E),V===null?j=P:V.sibling=P,V=P);return Ie&&ds(x,E),j}for(P=r(x,P);E<T.length;E++)A=y(P,x,E,T[E],R),A!==null&&(t&&A.alternate!==null&&P.delete(A.key===null?E:A.key),w=i(A,w,E),V===null?j=A:V.sibling=A,V=A);return t&&P.forEach(function(k){return e(x,k)}),Ie&&ds(x,E),j}function v(x,w,T,R){var j=Co(T);if(typeof j!="function")throw Error(B(150));if(T=j.call(T),T==null)throw Error(B(151));for(var V=j=null,P=w,E=w=0,A=null,C=T.next();P!==null&&!C.done;E++,C=T.next()){P.index>E?(A=P,P=null):A=P.sibling;var k=m(x,P,C.value,R);if(k===null){P===null&&(P=A);break}t&&P&&k.alternate===null&&e(x,P),w=i(k,w,E),V===null?j=k:V.sibling=k,V=k,P=A}if(C.done)return n(x,P),Ie&&ds(x,E),j;if(P===null){for(;!C.done;E++,C=T.next())C=f(x,C.value,R),C!==null&&(w=i(C,w,E),V===null?j=C:V.sibling=C,V=C);return Ie&&ds(x,E),j}for(P=r(x,P);!C.done;E++,C=T.next())C=y(P,x,E,C.value,R),C!==null&&(t&&C.alternate!==null&&P.delete(C.key===null?E:C.key),w=i(C,w,E),V===null?j=C:V.sibling=C,V=C);return t&&P.forEach(function(D){return e(x,D)}),Ie&&ds(x,E),j}function S(x,w,T,R){if(typeof T=="object"&&T!==null&&T.type===ai&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ul:e:{for(var j=T.key,V=w;V!==null;){if(V.key===j){if(j=T.type,j===ai){if(V.tag===7){n(x,V.sibling),w=s(V,T.props.children),w.return=x,x=w;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===vr&&r0(j)===V.type){n(x,V.sibling),w=s(V,T.props),w.ref=Do(x,V,T),w.return=x,x=w;break e}n(x,V);break}else e(x,V);V=V.sibling}T.type===ai?(w=Is(T.props.children,x.mode,R,T.key),w.return=x,x=w):(R=Tu(T.type,T.key,T.props,null,x.mode,R),R.ref=Do(x,w,T),R.return=x,x=R)}return o(x);case oi:e:{for(V=T.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(x,w.sibling),w=s(w,T.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Vd(T,x.mode,R),w.return=x,x=w}return o(x);case vr:return V=T._init,S(x,w,V(T._payload),R)}if(Bo(T))return _(x,w,T,R);if(Co(T))return v(x,w,T,R);Yl(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(x,w.sibling),w=s(w,T),w.return=x,x=w):(n(x,w),w=Dd(T,x.mode,R),w.return=x,x=w),o(x)):n(x,w)}return S}var Li=VE(!0),jE=VE(!1),Ju=ts(null),Zu=null,mi=null,Am=null;function Cm(){Am=mi=Zu=null}function Rm(t){var e=Ju.current;Se(Ju),t._currentValue=e}function Bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ci(t,e){Zu=t,Am=mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Am!==t)if(t={context:t,memoizedValue:e,next:null},mi===null){if(Zu===null)throw Error(B(308));mi=t,Zu.dependencies={lanes:0,firstContext:t}}else mi=mi.next=t;return e}var _s=null;function Nm(t){_s===null?_s=[t]:_s.push(t)}function OE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nm(e)):(n.next=s.next,s.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,er(t,n)}return s=r.interleaved,s===null?(e.next=e,Nm(r)):(e.next=s.next,s.next=e),r.interleaved=e,er(t,n)}function yu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}function s0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ec(t,e,n,r){var s=t.updateQueue;_r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(m=e,y=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){f=_.call(y,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,m=typeof _=="function"?_.call(y,f,m):_,m==null)break e;f=Ne({},f,m);break e;case 2:_r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=f}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var nl={},Rn=ts(nl),Ca=ts(nl),Ra=ts(nl);function ws(t){if(t===nl)throw Error(B(174));return t}function bm(t,e){switch(ve(Ra,e),ve(Ca,t),ve(Rn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xf(e,t)}Se(Rn),ve(Rn,e)}function Mi(){Se(Rn),Se(Ca),Se(Ra)}function ME(t){ws(Ra.current);var e=ws(Rn.current),n=xf(e,t.type);e!==n&&(ve(Ca,t),ve(Rn,n))}function Dm(t){Ca.current===t&&(Se(Rn),Se(Ca))}var Pe=ts(0);function tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ad=[];function Vm(){for(var t=0;t<Ad.length;t++)Ad[t]._workInProgressVersionPrimary=null;Ad.length=0}var vu=lr.ReactCurrentDispatcher,Cd=lr.ReactCurrentBatchConfig,bs=0,Re=null,We=null,Qe=null,nc=!1,ta=!1,Na=0,VR=0;function ht(){throw Error(B(321))}function jm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Om(t,e,n,r,s,i){if(bs=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vu.current=t===null||t.memoizedState===null?MR:FR,t=n(r,s),ta){i=0;do{if(ta=!1,Na=0,25<=i)throw Error(B(301));i+=1,Qe=We=null,e.updateQueue=null,vu.current=UR,t=n(r,s)}while(ta)}if(vu.current=rc,e=We!==null&&We.next!==null,bs=0,Qe=We=Re=null,nc=!1,e)throw Error(B(300));return t}function Lm(){var t=Na!==0;return Na=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function hn(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Qe===null?Re.memoizedState:Qe.next;if(e!==null)Qe=e,We=t;else{if(t===null)throw Error(B(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function ka(t,e){return typeof e=="function"?e(t):e}function Rd(t){var e=hn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((bs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Re.lanes|=h,Ds|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,wn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Ds|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nd(t){var e=hn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function FE(){}function UE(t,e){var n=Re,r=hn(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Mm($E.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,ba(9,zE.bind(null,n,r,s,e),void 0,null),Xe===null)throw Error(B(349));bs&30||BE(n,e,s)}return s}function BE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zE(t,e,n,r){e.value=n,e.getSnapshot=r,HE(e)&&WE(t)}function $E(t,e,n){return n(function(){HE(e)&&WE(t)})}function HE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function WE(t){var e=er(t,1);e!==null&&vn(e,t,1,-1)}function o0(t){var e=Pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},e.queue=t,t=t.dispatch=LR.bind(null,Re,t),[e.memoizedState,t]}function ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qE(){return hn().memoizedState}function _u(t,e,n,r){var s=Pn();Re.flags|=t,s.memoizedState=ba(1|e,n,void 0,r===void 0?null:r)}function Kc(t,e,n,r){var s=hn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&jm(r,o.deps)){s.memoizedState=ba(e,n,i,r);return}}Re.flags|=t,s.memoizedState=ba(1|e,n,i,r)}function a0(t,e){return _u(8390656,8,t,e)}function Mm(t,e){return Kc(2048,8,t,e)}function KE(t,e){return Kc(4,2,t,e)}function GE(t,e){return Kc(4,4,t,e)}function QE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XE(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4,4,QE.bind(null,e,t),n)}function Fm(){}function YE(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JE(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZE(t,e,n){return bs&21?(wn(n,e)||(n=sE(),Re.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function jR(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Cd.transition;Cd.transition={};try{t(!1),e()}finally{pe=n,Cd.transition=r}}function eT(){return hn().memoizedState}function OR(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tT(t))nT(e,n);else if(n=OE(t,e,n,r),n!==null){var s=At();vn(n,t,r,s),rT(n,e,r)}}function LR(t,e,n){var r=Lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tT(t))nT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wn(a,o)){var l=e.interleaved;l===null?(s.next=s,Nm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=OE(t,e,s,r),n!==null&&(s=At(),vn(n,t,r,s),rT(n,e,r))}}function tT(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function nT(t,e){ta=nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}var rc={readContext:cn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},MR={readContext:cn,useCallback:function(t,e){return Pn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:a0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,QE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=Pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OR.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=Pn();return t={current:t},e.memoizedState=t},useState:o0,useDebugValue:Fm,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=o0(!1),e=t[0];return t=jR.bind(null,t[1]),Pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=Pn();if(Ie){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Xe===null)throw Error(B(349));bs&30||BE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,a0($E.bind(null,r,i,t),[t]),r.flags|=2048,ba(9,zE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pn(),e=Xe.identifierPrefix;if(Ie){var n=zn,r=Bn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Na++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FR={readContext:cn,useCallback:YE,useContext:cn,useEffect:Mm,useImperativeHandle:XE,useInsertionEffect:KE,useLayoutEffect:GE,useMemo:JE,useReducer:Rd,useRef:qE,useState:function(){return Rd(ka)},useDebugValue:Fm,useDeferredValue:function(t){var e=hn();return ZE(e,We.memoizedState,t)},useTransition:function(){var t=Rd(ka)[0],e=hn().memoizedState;return[t,e]},useMutableSource:FE,useSyncExternalStore:UE,useId:eT,unstable_isNewReconciler:!1},UR={readContext:cn,useCallback:YE,useContext:cn,useEffect:Mm,useImperativeHandle:XE,useInsertionEffect:KE,useLayoutEffect:GE,useMemo:JE,useReducer:Nd,useRef:qE,useState:function(){return Nd(ka)},useDebugValue:Fm,useDeferredValue:function(t){var e=hn();return We===null?e.memoizedState=t:ZE(e,We.memoizedState,t)},useTransition:function(){var t=Nd(ka)[0],e=hn().memoizedState;return[t,e]},useMutableSource:FE,useSyncExternalStore:UE,useId:eT,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gc={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),s=Lr(t),i=Gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(vn(e,t,s,r),yu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),s=Lr(t),i=Gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(vn(e,t,s,r),yu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=Lr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(vn(e,t,r,n),yu(e,t,r))}};function l0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Sa(n,r)||!Sa(s,i):!0}function sT(t,e,n){var r=!1,s=Kr,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Ot(e)?Ns:_t.current,r=e.contextTypes,i=(r=r!=null)?ji(t,s):Kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function u0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gc.enqueueReplaceState(e,e.state,null)}function $f(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},km(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Ot(e)?Ns:_t.current,s.context=ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gc.enqueueReplaceState(s,s.state,null),ec(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=pC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BR=typeof WeakMap=="function"?WeakMap:Map;function iT(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ic||(ic=!0,ep=r),Hf(t,e)},n}function oT(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function c0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tN.bind(null,t,e,n),e.then(t,t))}function h0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var zR=lr.ReactCurrentOwner,Vt=!1;function Pt(t,e,n,r){e.child=t===null?jE(e,null,n,r):Li(e,t.child,n,r)}function f0(t,e,n,r,s){n=n.render;var i=e.ref;return Ci(e,s),r=Om(t,e,n,r,i,s),n=Lm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Ie&&n&&Sm(e),e.flags|=1,Pt(t,e,r,s),e.child)}function p0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Km(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,aT(t,e,i,r,s)):(t=Tu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(o,r)&&t.ref===e.ref)return tr(t,e,s)}return e.flags|=1,t=Mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function aT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Sa(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,tr(t,e,s)}return Wf(t,e,n,r,s)}function lT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(yi,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(yi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(yi,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(yi,zt),zt|=r;return Pt(t,e,s,n),e.child}function uT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wf(t,e,n,r,s){var i=Ot(n)?Ns:_t.current;return i=ji(e,i),Ci(e,s),n=Om(t,e,n,r,i,s),r=Lm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Ie&&r&&Sm(e),e.flags|=1,Pt(t,e,n,s),e.child)}function m0(t,e,n,r,s){if(Ot(n)){var i=!0;Qu(e)}else i=!1;if(Ci(e,s),e.stateNode===null)wu(t,e),sT(e,n,r),$f(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=Ot(n)?Ns:_t.current,c=ji(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&u0(e,o,r,c),_r=!1;var m=e.memoizedState;o.state=m,ec(e,r,o,s),l=e.memoizedState,a!==r||m!==l||jt.current||_r?(typeof h=="function"&&(zf(e,n,h,r),l=e.memoizedState),(a=_r||l0(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cn(l):(l=Ot(n)?Ns:_t.current,l=ji(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&u0(e,o,r,l),_r=!1,m=e.memoizedState,o.state=m,ec(e,r,o,s);var _=e.memoizedState;a!==f||m!==_||jt.current||_r?(typeof y=="function"&&(zf(e,n,y,r),_=e.memoizedState),(c=_r||l0(e,n,c,r,m,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return qf(t,e,n,r,i,s)}function qf(t,e,n,r,s,i){uT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&e0(e,n,!1),tr(t,e,i);r=e.stateNode,zR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,a,i)):Pt(t,e,a,i),e.memoizedState=r.state,s&&e0(e,n,!0),e.child}function cT(t){var e=t.stateNode;e.pendingContext?Zv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zv(t,e.context,!1),bm(t,e.containerInfo)}function g0(t,e,n,r,s){return Oi(),Pm(s),e.flags|=256,Pt(t,e,n,r),e.child}var Kf={dehydrated:null,treeContext:null,retryLane:0};function Gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function hT(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Pe,s&1),t===null)return Uf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yc(o,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gf(n),e.memoizedState=Kf,t):Um(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $R(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mr(a,i):(i=Is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Gf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kf,r}return i=t.child,t=i.sibling,r=Mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Um(t,e){return e=Yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jl(t,e,n,r){return r!==null&&Pm(r),Li(e,t.child,null,n),t=Um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $R(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(B(422))),Jl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yc({mode:"visible",children:r.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=Gf(o),e.memoizedState=Kf,i);if(!(e.mode&1))return Jl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=kd(i,r,void 0),Jl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vt||a){if(r=Xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,er(t,s),vn(r,t,s,-1))}return qm(),r=kd(Error(B(421))),Jl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Vr(s.nextSibling),Wt=e,Ie=!0,gn=null,t!==null&&(rn[sn++]=Bn,rn[sn++]=zn,rn[sn++]=ks,Bn=t.id,zn=t.overflow,ks=e),e=Um(e,r.children),e.flags|=4096,e)}function y0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bf(t.return,e,n)}function bd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y0(t,n,e);else if(t.tag===19)y0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&tc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&tc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bd(e,!0,n,null,i);break;case"together":bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HR(t,e,n){switch(e.tag){case 3:cT(e),Oi();break;case 5:ME(e);break;case 1:Ot(e.type)&&Qu(e);break;case 4:bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Ju,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?hT(t,e,n):(ve(Pe,Pe.current&1),t=tr(t,e,n),t!==null?t.sibling:null);ve(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,lT(t,e,n)}return tr(t,e,n)}var fT,Qf,pT,mT;fT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qf=function(){};pT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ws(Rn.current);var i=null;switch(n){case"input":s=yf(t,s),r=yf(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=wf(t,s),r=wf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ku)}Ef(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ya.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};mT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WR(t,e,n){var r=e.pendingProps;switch(Im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ot(e.type)&&Gu(),dt(e),null;case 3:return r=e.stateNode,Mi(),Se(jt),Se(_t),Vm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(rp(gn),gn=null))),Qf(t,e),dt(e),null;case 5:Dm(e);var s=ws(Ra.current);if(n=e.type,t!==null&&e.stateNode!=null)pT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return dt(e),null}if(t=ws(Rn.current),Xl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[Aa]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<$o.length;s++)xe($o[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Pv(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Cv(r,i),xe("invalid",r)}Ef(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ql(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ql(r.textContent,a,t),s=["children",""+a]):ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Bl(r),Av(r,i,!0);break;case"textarea":Bl(r),Rv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ku)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$x(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[Aa]=r,fT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tf(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<$o.length;s++)xe($o[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Pv(t,r),s=yf(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Cv(t,r),s=wf(t,r),xe("invalid",t);break;default:s=r}Ef(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&va(t,l):typeof l=="number"&&va(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ya.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xe("scroll",t):l!=null&&cm(t,i,l,o))}switch(n){case"input":Bl(t),Av(t,r,!1);break;case"textarea":Bl(t),Rv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Si(t,!!r.multiple,i,!1):r.defaultValue!=null&&Si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)mT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ws(Ra.current),ws(Rn.current),Xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Ql(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return dt(e),null;case 13:if(Se(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&$t!==null&&e.mode&1&&!(e.flags&128))DE(),Oi(),e.flags|=98560,i=!1;else if(i=Xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[An]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else gn!==null&&(rp(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?qe===0&&(qe=3):qm())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Mi(),Qf(t,e),t===null&&Ia(e.stateNode.containerInfo),dt(e),null;case 10:return Rm(e.type._context),dt(e),null;case 17:return Ot(e.type)&&Gu(),dt(e),null;case 19:if(Se(Pe),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vo(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tc(t),o!==null){for(e.flags|=128,Vo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>Ui&&(e.flags|=128,r=!0,Vo(i,!1),e.lanes=4194304)}else{if(!r)if(t=tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return dt(e),null}else 2*Oe()-i.renderingStartTime>Ui&&n!==1073741824&&(e.flags|=128,r=!0,Vo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=Pe.current,ve(Pe,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Wm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function qR(t,e){switch(Im(e),e.tag){case 1:return Ot(e.type)&&Gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),Se(jt),Se(_t),Vm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dm(e),null;case 13:if(Se(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Pe),null;case 4:return Mi(),null;case 10:return Rm(e.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var Zl=!1,gt=!1,KR=typeof WeakSet=="function"?WeakSet:Set,W=null;function gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Xf(t,e,n){try{n()}catch(r){De(t,e,r)}}var v0=!1;function GR(t,e){if(Df=Hu,t=wE(),Tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vf={focusedElem:t,selectionRange:n},Hu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,S=_.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:pn(e.type,v),S);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){De(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return _=v0,v0=!1,_}function na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xf(e,n,i)}s=s.next}while(s!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gT(t){var e=t.alternate;e!==null&&(t.alternate=null,gT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[Aa],delete e[Lf],delete e[NR],delete e[kR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yT(t){return t.tag===5||t.tag===3||t.tag===4}function _0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ku));else if(r!==4&&(t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function Zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}var tt=null,mn=!1;function mr(t,e,n){for(n=n.child;n!==null;)vT(t,e,n),n=n.sibling}function vT(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Bc,n)}catch{}switch(n.tag){case 5:gt||gi(n,e);case 6:var r=tt,s=mn;tt=null,mr(t,e,n),tt=r,mn=s,tt!==null&&(mn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(mn?(t=tt,n=n.stateNode,t.nodeType===8?Id(t.parentNode,n):t.nodeType===1&&Id(t,n),Ea(t)):Id(tt,n.stateNode));break;case 4:r=tt,s=mn,tt=n.stateNode.containerInfo,mn=!0,mr(t,e,n),tt=r,mn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xf(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!gt&&(gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,mr(t,e,n),gt=r):mr(t,e,n);break;default:mr(t,e,n)}}function w0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KR),e.forEach(function(r){var s=rN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:tt=a.stateNode,mn=!1;break e;case 3:tt=a.stateNode.containerInfo,mn=!0;break e;case 4:tt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(tt===null)throw Error(B(160));vT(i,o,s),tt=null,mn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){De(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_T(e,t),e=e.sibling}function _T(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Sn(t),r&4){try{na(3,t,t.return),Qc(3,t)}catch(v){De(t,t.return,v)}try{na(5,t,t.return)}catch(v){De(t,t.return,v)}}break;case 1:fn(e,t),Sn(t),r&512&&n!==null&&gi(n,n.return);break;case 5:if(fn(e,t),Sn(t),r&512&&n!==null&&gi(n,n.return),t.flags&32){var s=t.stateNode;try{va(s,"")}catch(v){De(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Bx(s,i),Tf(a,o);var c=Tf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?qx(s,f):h==="dangerouslySetInnerHTML"?Hx(s,f):h==="children"?va(s,f):cm(s,h,f,c)}switch(a){case"input":vf(s,i);break;case"textarea":zx(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Si(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Si(s,!!i.multiple,i.defaultValue,!0):Si(s,!!i.multiple,i.multiple?[]:"",!1))}s[Aa]=i}catch(v){De(t,t.return,v)}}break;case 6:if(fn(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){De(t,t.return,v)}}break;case 3:if(fn(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ea(e.containerInfo)}catch(v){De(t,t.return,v)}break;case 4:fn(e,t),Sn(t);break;case 13:fn(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($m=Oe())),r&4&&w0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(c=gt)||h,fn(e,t),gt=c):fn(e,t),Sn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(f=W=h;W!==null;){switch(m=W,y=m.child,m.tag){case 0:case 11:case 14:case 15:na(4,m,m.return);break;case 1:gi(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){De(r,n,v)}}break;case 5:gi(m,m.return);break;case 22:if(m.memoizedState!==null){E0(f);continue}}y!==null?(y.return=m,W=y):E0(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Wx("display",o))}catch(v){De(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){De(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fn(e,t),Sn(t),r&4&&w0(t);break;case 21:break;default:fn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yT(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(va(s,""),r.flags&=-33);var i=_0(t);Zf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_0(t);Jf(t,a,o);break;default:throw Error(B(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QR(t,e,n){W=t,wT(t)}function wT(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||gt;a=Zl;var c=gt;if(Zl=o,(gt=l)&&!c)for(W=s;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?T0(s):l!==null?(l.return=o,W=l):T0(s);for(;i!==null;)W=i,wT(i),i=i.sibling;W=s,Zl=a,gt=c}x0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):x0(t)}}function x0(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&i0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ea(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}gt||e.flags&512&&Yf(e)}catch(m){De(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function E0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function T0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){De(e,s,l)}}var i=e.return;try{Yf(e)}catch(l){De(e,i,l)}break;case 5:var o=e.return;try{Yf(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var XR=Math.ceil,sc=lr.ReactCurrentDispatcher,Bm=lr.ReactCurrentOwner,an=lr.ReactCurrentBatchConfig,he=0,Xe=null,$e=null,st=0,zt=0,yi=ts(0),qe=0,Da=null,Ds=0,Xc=0,zm=0,ra=null,kt=null,$m=0,Ui=1/0,Fn=null,ic=!1,ep=null,Or=null,eu=!1,Cr=null,oc=0,sa=0,tp=null,xu=-1,Eu=0;function At(){return he&6?Oe():xu!==-1?xu:xu=Oe()}function Lr(t){return t.mode&1?he&2&&st!==0?st&-st:DR.transition!==null?(Eu===0&&(Eu=sE()),Eu):(t=pe,t!==0||(t=window.event,t=t===void 0?16:hE(t.type)),t):1}function vn(t,e,n,r){if(50<sa)throw sa=0,tp=null,Error(B(185));Za(t,n,r),(!(he&2)||t!==Xe)&&(t===Xe&&(!(he&2)&&(Xc|=n),qe===4&&Er(t,st)),Lt(t,r),n===1&&he===0&&!(e.mode&1)&&(Ui=Oe()+500,qc&&ns()))}function Lt(t,e){var n=t.callbackNode;DC(t,e);var r=$u(t,t===Xe?st:0);if(r===0)n!==null&&bv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bv(n),e===1)t.tag===0?bR(S0.bind(null,t)):NE(S0.bind(null,t)),CR(function(){!(he&6)&&ns()}),n=null;else{switch(iE(r)){case 1:n=mm;break;case 4:n=nE;break;case 16:n=zu;break;case 536870912:n=rE;break;default:n=zu}n=CT(n,xT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xT(t,e){if(xu=-1,Eu=0,he&6)throw Error(B(327));var n=t.callbackNode;if(Ri()&&t.callbackNode!==n)return null;var r=$u(t,t===Xe?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var s=he;he|=2;var i=TT();(Xe!==t||st!==e)&&(Fn=null,Ui=Oe()+500,Ss(t,e));do try{ZR();break}catch(a){ET(t,a)}while(!0);Cm(),sc.current=i,he=s,$e!==null?e=0:(Xe=null,st=0,e=qe)}if(e!==0){if(e===2&&(s=Cf(t),s!==0&&(r=s,e=np(t,s))),e===1)throw n=Da,Ss(t,0),Er(t,r),Lt(t,Oe()),n;if(e===6)Er(t,r);else{if(s=t.current.alternate,!(r&30)&&!YR(s)&&(e=ac(t,r),e===2&&(i=Cf(t),i!==0&&(r=i,e=np(t,i))),e===1))throw n=Da,Ss(t,0),Er(t,r),Lt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:fs(t,kt,Fn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=$m+500-Oe(),10<e)){if($u(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Of(fs.bind(null,t,kt,Fn),e);break}fs(t,kt,Fn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XR(r/1960))-r,10<r){t.timeoutHandle=Of(fs.bind(null,t,kt,Fn),r);break}fs(t,kt,Fn);break;case 5:fs(t,kt,Fn);break;default:throw Error(B(329))}}}return Lt(t,Oe()),t.callbackNode===n?xT.bind(null,t):null}function np(t,e){var n=ra;return t.current.memoizedState.isDehydrated&&(Ss(t,e).flags|=256),t=ac(t,e),t!==2&&(e=kt,kt=n,e!==null&&rp(e)),t}function rp(t){kt===null?kt=t:kt.push.apply(kt,t)}function YR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~zm,e&=~Xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function S0(t){if(he&6)throw Error(B(327));Ri();var e=$u(t,0);if(!(e&1))return Lt(t,Oe()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=Cf(t);r!==0&&(e=r,n=np(t,r))}if(n===1)throw n=Da,Ss(t,0),Er(t,e),Lt(t,Oe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,kt,Fn),Lt(t,Oe()),null}function Hm(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ui=Oe()+500,qc&&ns())}}function Vs(t){Cr!==null&&Cr.tag===0&&!(he&6)&&Ri();var e=he;he|=1;var n=an.transition,r=pe;try{if(an.transition=null,pe=1,t)return t()}finally{pe=r,an.transition=n,he=e,!(he&6)&&ns()}}function Wm(){zt=yi.current,Se(yi)}function Ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AR(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:Mi(),Se(jt),Se(_t),Vm();break;case 5:Dm(r);break;case 4:Mi();break;case 13:Se(Pe);break;case 19:Se(Pe);break;case 10:Rm(r.type._context);break;case 22:case 23:Wm()}n=n.return}if(Xe=t,$e=t=Mr(t.current,null),st=zt=e,qe=0,Da=null,zm=Xc=Ds=0,kt=ra=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_s=null}return t}function ET(t,e){do{var n=$e;try{if(Cm(),vu.current=rc,nc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nc=!1}if(bs=0,Qe=We=Re=null,ta=!1,Na=0,Bm.current=null,n===null||n.return===null){qe=1,Da=e,$e=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=h0(o);if(y!==null){y.flags&=-257,d0(y,o,a,i,e),y.mode&1&&c0(i,c,e),e=y,l=c;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){c0(i,c,e),qm();break e}l=Error(B(426))}}else if(Ie&&a.mode&1){var S=h0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),d0(S,o,a,i,e),Pm(Fi(l,a));break e}}i=l=Fi(l,a),qe!==4&&(qe=2),ra===null?ra=[i]:ra.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=iT(i,l,e);s0(i,x);break e;case 1:a=l;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Or===null||!Or.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=oT(i,a,e);s0(i,R);break e}}i=i.return}while(i!==null)}IT(n)}catch(j){e=j,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function TT(){var t=sc.current;return sc.current=rc,t===null?rc:t}function qm(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||!(Ds&268435455)&&!(Xc&268435455)||Er(Xe,st)}function ac(t,e){var n=he;he|=2;var r=TT();(Xe!==t||st!==e)&&(Fn=null,Ss(t,e));do try{JR();break}catch(s){ET(t,s)}while(!0);if(Cm(),he=n,sc.current=r,$e!==null)throw Error(B(261));return Xe=null,st=0,qe}function JR(){for(;$e!==null;)ST($e)}function ZR(){for(;$e!==null&&!SC();)ST($e)}function ST(t){var e=AT(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?IT(t):$e=e,Bm.current=null}function IT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qR(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,$e=null;return}}else if(n=WR(n,e,zt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);qe===0&&(qe=5)}function fs(t,e,n){var r=pe,s=an.transition;try{an.transition=null,pe=1,eN(t,e,n,r)}finally{an.transition=s,pe=r}return null}function eN(t,e,n,r){do Ri();while(Cr!==null);if(he&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(VC(t,i),t===Xe&&($e=Xe=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eu||(eu=!0,CT(zu,function(){return Ri(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=pe;pe=1;var a=he;he|=4,Bm.current=null,GR(t,n),_T(n,t),wR(Vf),Hu=!!Df,Vf=Df=null,t.current=n,QR(n),IC(),he=a,pe=o,an.transition=i}else t.current=n;if(eu&&(eu=!1,Cr=t,oc=s),i=t.pendingLanes,i===0&&(Or=null),CC(n.stateNode),Lt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ic)throw ic=!1,t=ep,ep=null,t;return oc&1&&t.tag!==0&&Ri(),i=t.pendingLanes,i&1?t===tp?sa++:(sa=0,tp=t):sa=0,ns(),null}function Ri(){if(Cr!==null){var t=iE(oc),e=an.transition,n=pe;try{if(an.transition=null,pe=16>t?16:t,Cr===null)var r=!1;else{if(t=Cr,Cr=null,oc=0,he&6)throw Error(B(331));var s=he;for(he|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:na(8,h,i)}var f=h.child;if(f!==null)f.return=h,W=f;else for(;W!==null;){h=W;var m=h.sibling,y=h.return;if(gT(h),h===c){W=null;break}if(m!==null){m.return=y,W=m;break}W=y}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:na(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,W=x;break e}W=i.return}}var w=t.current;for(W=w;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=w;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qc(9,a)}}catch(j){De(a,a.return,j)}if(a===o){W=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,W=R;break e}W=a.return}}if(he=s,ns(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Bc,t)}catch{}r=!0}return r}finally{pe=n,an.transition=e}}return!1}function I0(t,e,n){e=Fi(n,e),e=iT(t,e,1),t=jr(t,e,1),e=At(),t!==null&&(Za(t,1,e),Lt(t,e))}function De(t,e,n){if(t.tag===3)I0(t,t,n);else for(;e!==null;){if(e.tag===3){I0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Fi(n,t),t=oT(e,t,1),e=jr(e,t,1),t=At(),e!==null&&(Za(e,1,t),Lt(e,t));break}}e=e.return}}function tN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Oe()-$m?Ss(t,0):zm|=n),Lt(t,e)}function PT(t,e){e===0&&(t.mode&1?(e=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):e=1);var n=At();t=er(t,e),t!==null&&(Za(t,e,n),Lt(t,n))}function nN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PT(t,n)}function rN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),PT(t,n)}var AT;AT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,HR(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Ie&&e.flags&1048576&&kE(e,Yu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wu(t,e),t=e.pendingProps;var s=ji(e,_t.current);Ci(e,n),s=Om(null,e,r,t,s,n);var i=Lm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(i=!0,Qu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,km(e),s.updater=Gc,e.stateNode=s,s._reactInternals=e,$f(e,r,t,n),e=qf(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&Sm(e),Pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iN(r),t=pn(r,t),s){case 0:e=Wf(null,e,r,t,n);break e;case 1:e=m0(null,e,r,t,n);break e;case 11:e=f0(null,e,r,t,n);break e;case 14:e=p0(null,e,r,pn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Wf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),m0(t,e,r,s,n);case 3:e:{if(cT(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,LE(t,e),ec(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fi(Error(B(423)),e),e=g0(t,e,r,n,s);break e}else if(r!==s){s=Fi(Error(B(424)),e),e=g0(t,e,r,n,s);break e}else for($t=Vr(e.stateNode.containerInfo.firstChild),Wt=e,Ie=!0,gn=null,n=jE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=tr(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return ME(e),t===null&&Uf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,jf(r,s)?o=null:i!==null&&jf(r,i)&&(e.flags|=32),uT(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&Uf(e),null;case 13:return hT(t,e,n);case 4:return bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),f0(t,e,r,s,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Ju,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!jt.current){e=tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Gn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Bf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Bf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ci(e,n),s=cn(s),r=r(s),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,s=pn(r,e.pendingProps),s=pn(r.type,s),p0(t,e,r,s,n);case 15:return aT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),wu(t,e),e.tag=1,Ot(r)?(t=!0,Qu(e)):t=!1,Ci(e,n),sT(e,r,s),$f(e,r,s,n),qf(null,e,r,!0,t,n);case 19:return dT(t,e,n);case 22:return lT(t,e,n)}throw Error(B(156,e.tag))};function CT(t,e){return tE(t,e)}function sN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new sN(t,e,n,r)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iN(t){if(typeof t=="function")return Km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dm)return 11;if(t===fm)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ai:return Is(n.children,s,i,e);case hm:o=8,s|=8;break;case ff:return t=on(12,n,e,s|2),t.elementType=ff,t.lanes=i,t;case pf:return t=on(13,n,e,s),t.elementType=pf,t.lanes=i,t;case mf:return t=on(19,n,e,s),t.elementType=mf,t.lanes=i,t;case Mx:return Yc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ox:o=10;break e;case Lx:o=9;break e;case dm:o=11;break e;case fm:o=14;break e;case vr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Yc(t,e,n,r){return t=on(22,t,r,e),t.elementType=Mx,t.lanes=n,t.stateNode={isHidden:!1},t}function Dd(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Vd(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gm(t,e,n,r,s,i,o,a,l){return t=new oN(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=on(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},km(i),t}function aN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RT(t){if(!t)return Kr;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ot(n))return RE(t,n,e)}return e}function NT(t,e,n,r,s,i,o,a,l){return t=Gm(n,r,!0,t,s,i,o,a,l),t.context=RT(null),n=t.current,r=At(),s=Lr(n),i=Gn(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Za(t,s,r),Lt(t,r),t}function Jc(t,e,n,r){var s=e.current,i=At(),o=Lr(s);return n=RT(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(vn(t,s,o,i),yu(t,s,o)),o}function lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qm(t,e){P0(t,e),(t=t.alternate)&&P0(t,e)}function lN(){return null}var kT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xm(t){this._internalRoot=t}Zc.prototype.render=Xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Jc(t,e,null,null)};Zc.prototype.unmount=Xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){Jc(null,t,null,null)}),e[Zn]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=lE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&cE(t)}};function Ym(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function A0(){}function uN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=lc(o);i.call(c)}}var o=NT(e,r,t,0,null,!1,!1,"",A0);return t._reactRootContainer=o,t[Zn]=o.current,Ia(t.nodeType===8?t.parentNode:t),Vs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=lc(l);a.call(c)}}var l=Gm(t,0,!1,null,null,!1,!1,"",A0);return t._reactRootContainer=l,t[Zn]=l.current,Ia(t.nodeType===8?t.parentNode:t),Vs(function(){Jc(e,l,n,r)}),l}function th(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=lc(o);a.call(l)}}Jc(e,o,t,s)}else o=uN(n,e,t,s,r);return lc(o)}oE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zo(e.pendingLanes);n!==0&&(gm(e,n|1),Lt(e,Oe()),!(he&6)&&(Ui=Oe()+500,ns()))}break;case 13:Vs(function(){var r=er(t,1);if(r!==null){var s=At();vn(r,t,1,s)}}),Qm(t,1)}};ym=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=At();vn(e,t,134217728,n)}Qm(t,134217728)}};aE=function(t){if(t.tag===13){var e=Lr(t),n=er(t,e);if(n!==null){var r=At();vn(n,t,e,r)}Qm(t,e)}};lE=function(){return pe};uE=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};If=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wc(r);if(!s)throw Error(B(90));Ux(r),vf(r,s)}}}break;case"textarea":zx(t,n);break;case"select":e=n.value,e!=null&&Si(t,!!n.multiple,e,!1)}};Qx=Hm;Xx=Vs;var cN={usingClientEntryPoint:!1,Events:[tl,hi,Wc,Kx,Gx,Hm]},jo={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hN={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zx(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||lN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Bc=tu.inject(hN),Cn=tu}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ym(e))throw Error(B(200));return aN(t,e,null,n)};Xt.createRoot=function(t,e){if(!Ym(t))throw Error(B(299));var n=!1,r="",s=kT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gm(t,1,!1,null,null,n,!1,r,s),t[Zn]=e.current,Ia(t.nodeType===8?t.parentNode:t),new Xm(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Zx(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return Vs(t)};Xt.hydrate=function(t,e,n){if(!eh(e))throw Error(B(200));return th(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Ym(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NT(e,null,t,1,n??null,s,!1,i,o),t[Zn]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zc(e)};Xt.render=function(t,e,n){if(!eh(e))throw Error(B(200));return th(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!eh(t))throw Error(B(40));return t._reactRootContainer?(Vs(function(){th(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Xt.unstable_batchedUpdates=Hm;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!eh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return th(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function bT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bT)}catch(t){console.error(t)}}bT(),bx.exports=Xt;var dN=bx.exports,C0=dN;hf.createRoot=C0.createRoot,hf.hydrateRoot=C0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Va.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const R0="popstate";function fN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return sp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:uc(s)}return mN(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function DT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pN(){return Math.random().toString(36).substr(2,8)}function N0(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,r){return n===void 0&&(n=null),Va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?no(e):e,{state:n,key:e&&e.key||r||pN()})}function uc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function no(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Rr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Va({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Rr.Pop;let S=h(),x=S==null?null:S-c;c=S,l&&l({action:a,location:v.location,delta:x})}function m(S,x){a=Rr.Push;let w=sp(v.location,S,x);c=h()+1;let T=N0(w,c),R=v.createHref(w);try{o.pushState(T,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}i&&l&&l({action:a,location:v.location,delta:1})}function y(S,x){a=Rr.Replace;let w=sp(v.location,S,x);c=h();let T=N0(w,c),R=v.createHref(w);o.replaceState(T,"",R),i&&l&&l({action:a,location:v.location,delta:0})}function _(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof S=="string"?S:uc(S);return w=w.replace(/ $/,"%20"),Me(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return a},get location(){return t(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(R0,f),l=S,()=>{s.removeEventListener(R0,f),l=null}},createHref(S){return e(s,S)},createURL:_,encodeLocation(S){let x=_(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(S){return o.go(S)}};return v}var k0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k0||(k0={}));function gN(t,e,n){return n===void 0&&(n="/"),yN(t,e,n)}function yN(t,e,n,r){let s=typeof e=="string"?no(e):e,i=Jm(s.pathname||"/",n);if(i==null)return null;let o=VT(t);vN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=NN(i);a=AN(o[l],c)}return a}function VT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Fr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VT(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:IN(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of jT(i.path))s(i,o,l)}),e}function jT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=jT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _N=/^:[\w-]+$/,wN=3,xN=2,EN=1,TN=10,SN=-2,b0=t=>t==="*";function IN(t,e){let n=t.split("/"),r=n.length;return n.some(b0)&&(r+=SN),e&&(r+=xN),n.filter(s=>!b0(s)).reduce((s,i)=>s+(_N.test(i)?wN:i===""?EN:TN),r)}function PN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AN(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=CN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Fr([i,f.pathname]),pathnameBase:VN(Fr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Fr([i,f.pathnameBase]))}return o}function CN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let v=a[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[f];return y&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function RN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),DT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return DT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?no(t):t;return{pathname:n?n.startsWith("/")?n:bN(n,e):e,search:jN(r),hash:ON(s)}}function bN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function jd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zm(t,e){let n=DN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function eg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=no(t):(s=Va({},t),Me(!s.pathname||!s.pathname.includes("?"),jd("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),jd("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),jd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=kN(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),VN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ON=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OT=["post","put","patch","delete"];new Set(OT);const MN=["get",...OT];new Set(MN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ja.apply(this,arguments)}const tg=b.createContext(null),FN=b.createContext(null),rs=b.createContext(null),nh=b.createContext(null),ur=b.createContext({outlet:null,matches:[],isDataRoute:!1}),LT=b.createContext(null);function UN(t,e){let{relative:n}=e===void 0?{}:e;ro()||Me(!1);let{basename:r,navigator:s}=b.useContext(rs),{hash:i,pathname:o,search:a}=FT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Fr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ro(){return b.useContext(nh)!=null}function Hs(){return ro()||Me(!1),b.useContext(nh).location}function MT(t){b.useContext(rs).static||b.useLayoutEffect(t)}function ss(){let{isDataRoute:t}=b.useContext(ur);return t?ek():BN()}function BN(){ro()||Me(!1);let t=b.useContext(tg),{basename:e,future:n,navigator:r}=b.useContext(rs),{matches:s}=b.useContext(ur),{pathname:i}=Hs(),o=JSON.stringify(Zm(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return MT(()=>{a.current=!0}),b.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=eg(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function zN(){let{matches:t}=b.useContext(ur),e=t[t.length-1];return e?e.params:{}}function FT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(rs),{matches:s}=b.useContext(ur),{pathname:i}=Hs(),o=JSON.stringify(Zm(s,r.v7_relativeSplatPath));return b.useMemo(()=>eg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function $N(t,e){return HN(t,e)}function HN(t,e,n,r){ro()||Me(!1);let{navigator:s}=b.useContext(rs),{matches:i}=b.useContext(ur),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hs(),h;if(e){var f;let S=typeof e=="string"?no(e):e;l==="/"||(f=S.pathname)!=null&&f.startsWith(l)||Me(!1),h=S}else h=c;let m=h.pathname||"/",y=m;if(l!=="/"){let S=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=gN(t,{pathname:y}),v=QN(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Fr([l,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Fr([l,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&v?b.createElement(nh.Provider,{value:{location:ja({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Rr.Pop}},v):v}function WN(){let t=ZN(),e=LN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const qN=b.createElement(WN,null);class KN extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ur.Provider,{value:this.props.routeContext},b.createElement(LT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GN(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(tg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ur.Provider,{value:e},r)}function QN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,_=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,_=!1,v=null,S=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||qN,l&&(c<0&&m===0?(tk("route-fallback"),_=!0,S=null):c===m&&(_=!0,S=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),w=()=>{let T;return y?T=v:_?T=S:f.route.Component?T=b.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=h,b.createElement(GN,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(KN,{location:n.location,revalidation:n.revalidation,component:v,error:y,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var UT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UT||{}),BT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BT||{});function XN(t){let e=b.useContext(tg);return e||Me(!1),e}function YN(t){let e=b.useContext(FN);return e||Me(!1),e}function JN(t){let e=b.useContext(ur);return e||Me(!1),e}function zT(t){let e=JN(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function ZN(){var t;let e=b.useContext(LT),n=YN(),r=zT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ek(){let{router:t}=XN(UT.UseNavigateStable),e=zT(BT.UseNavigateStable),n=b.useRef(!1);return MT(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ja({fromRouteId:e},i)))},[t,e])}const D0={};function tk(t,e,n){D0[t]||(D0[t]=!0)}function nk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rk(t){let{to:e,replace:n,state:r,relative:s}=t;ro()||Me(!1);let{future:i,static:o}=b.useContext(rs),{matches:a}=b.useContext(ur),{pathname:l}=Hs(),c=ss(),h=eg(e,Zm(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return b.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function tn(t){Me(!1)}function sk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rr.Pop,navigator:i,static:o=!1,future:a}=t;ro()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:ja({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=no(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:_="default"}=r,v=b.useMemo(()=>{let S=Jm(h,l);return S==null?null:{location:{pathname:S,search:f,hash:m,state:y,key:_},navigationType:s}},[l,h,f,m,y,_,s]);return v==null?null:b.createElement(rs.Provider,{value:c},b.createElement(nh.Provider,{children:n,value:v}))}function V0(t){let{children:e,location:n}=t;return $N(ip(e),n)}new Promise(()=>{});function ip(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,ip(r.props.children,i));return}r.type!==tn&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ip(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},op.apply(this,arguments)}function ik(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ok(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ak(t,e){return t.button===0&&(!e||e==="_self")&&!ok(t)}function ap(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function lk(t,e){let n=ap(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const uk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ck="6";try{window.__reactRouterVersion=ck}catch{}const hk="startTransition",j0=tC[hk];function dk(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=fN({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=b.useCallback(f=>{c&&j0?j0(()=>l(f)):l(f)},[l,c]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>nk(r),[r]),b.createElement(sk,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const fk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,m=ik(e,uk),{basename:y}=b.useContext(rs),_,v=!1;if(typeof c=="string"&&pk.test(c)&&(_=c,fk))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),j=Jm(R.pathname,y);R.origin===T.origin&&j!=null?c=j+R.search+R.hash:v=!0}catch{}let S=UN(c,{relative:s}),x=mk(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function w(T){r&&r(T),T.defaultPrevented||x(T)}return b.createElement("a",op({},m,{href:_||S,onClick:v||i?r:w,ref:n,target:l}))});var O0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(O0||(O0={}));var L0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L0||(L0={}));function mk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ss(),c=Hs(),h=FT(t,{relative:o});return b.useCallback(f=>{if(ak(f,n)){f.preventDefault();let m=r!==void 0?r:uc(c)===uc(h);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function gk(t){let e=b.useRef(ap(t)),n=b.useRef(!1),r=Hs(),s=b.useMemo(()=>lk(r.search,n.current?null:e.current),[r.search]),i=ss(),o=b.useCallback((a,l)=>{const c=ap(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const $T=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),rh=b.createContext({}),sh=b.createContext(null),ih=typeof document<"u",ng=ih?b.useLayoutEffect:b.useEffect,HT=b.createContext({strict:!1}),rg=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),yk="framerAppearId",WT="data-"+rg(yk);function vk(t,e,n,r){const{visualElement:s}=b.useContext(rh),i=b.useContext(HT),o=b.useContext(sh),a=b.useContext($T).reducedMotion,l=b.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;b.useInsertionEffect(()=>{c&&c.update(n,o)});const h=b.useRef(!!(n[WT]&&!window.HandoffComplete));return ng(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),b.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function vi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _k(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):vi(n)&&(n.current=r))},[e])}function Oa(t){return typeof t=="string"||Array.isArray(t)}function oh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const sg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ig=["initial",...sg];function ah(t){return oh(t.animate)||ig.some(e=>Oa(t[e]))}function qT(t){return!!(ah(t)||t.variants)}function wk(t,e){if(ah(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Oa(n)?n:void 0,animate:Oa(r)?r:void 0}}return t.inherit!==!1?e:{}}function xk(t){const{initial:e,animate:n}=wk(t,b.useContext(rh));return b.useMemo(()=>({initial:e,animate:n}),[M0(e),M0(n)])}function M0(t){return Array.isArray(t)?t.join(" "):t}const F0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},La={};for(const t in F0)La[t]={isEnabled:e=>F0[t].some(n=>!!e[n])};function Ek(t){for(const e in t)La[e]={...La[e],...t[e]}}const og=b.createContext({}),KT=b.createContext({}),Tk=Symbol.for("motionComponentSymbol");function Sk({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&Ek(t);function i(a,l){let c;const h={...b.useContext($T),...a,layoutId:Ik(a)},{isStatic:f}=h,m=xk(a),y=r(a,f);if(!f&&ih){m.visualElement=vk(s,y,h,e);const _=b.useContext(KT),v=b.useContext(HT).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,v,t,_))}return b.createElement(rh.Provider,{value:m},c&&m.visualElement?b.createElement(c,{visualElement:m.visualElement,...h}):null,n(s,a,_k(y,m.visualElement,l),y,f,m.visualElement))}const o=b.forwardRef(i);return o[Tk]=s,o}function Ik({layoutId:t}){const e=b.useContext(og).id;return e&&t!==void 0?e+"-"+t:t}function Pk(t){function e(r,s={}){return Sk(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const Ak=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ag(t){return typeof t!="string"||t.includes("-")?!1:!!(Ak.indexOf(t)>-1||/[A-Z]/.test(t))}const cc={};function Ck(t){Object.assign(cc,t)}const rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ws=new Set(rl);function GT(t,{layout:e,layoutId:n}){return Ws.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cc[t]||t==="opacity")}const Ut=t=>!!(t&&t.getVelocity),Rk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nk=rl.length;function kk(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<Nk;o++){const a=rl[o];if(t[a]!==void 0){const l=Rk[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const QT=t=>e=>typeof e=="string"&&e.startsWith(t),XT=QT("--"),lp=QT("var(--"),bk=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Dk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gr=(t,e,n)=>Math.min(Math.max(n,t),e),qs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ia={...qs,transform:t=>Gr(0,1,t)},nu={...qs,default:1},oa=t=>Math.round(t*1e5)/1e5,lh=/(-)?([\d]*\.?[\d])+/g,YT=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Vk=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function sl(t){return typeof t=="string"}const il=t=>({test:e=>sl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yr=il("deg"),Nn=il("%"),Y=il("px"),jk=il("vh"),Ok=il("vw"),U0={...Nn,parse:t=>Nn.parse(t)/100,transform:t=>Nn.transform(t*100)},B0={...qs,transform:Math.round},JT={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:yr,rotateX:yr,rotateY:yr,rotateZ:yr,scale:nu,scaleX:nu,scaleY:nu,scaleZ:nu,skew:yr,skewX:yr,skewY:yr,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:ia,originX:U0,originY:U0,originZ:Y,zIndex:B0,fillOpacity:ia,strokeOpacity:ia,numOctaves:B0};function lg(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const f in e){const m=e[f];if(XT(f)){i[f]=m;continue}const y=JT[f],_=Dk(m,y);if(Ws.has(f)){if(l=!0,o[f]=_,!h)continue;m!==(y.default||0)&&(h=!1)}else f.startsWith("origin")?(c=!0,a[f]=_):s[f]=_}if(e.transform||(l||r?s.transform=kk(t.transform,n,h,r):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:y=0}=a;s.transformOrigin=`${f} ${m} ${y}`}}const ug=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZT(t,e,n){for(const r in e)!Ut(e[r])&&!GT(r,n)&&(t[r]=e[r])}function Lk({transformTemplate:t},e,n){return b.useMemo(()=>{const r=ug();return lg(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Mk(t,e,n){const r=t.style||{},s={};return ZT(s,r,t),Object.assign(s,Lk(t,e,n)),t.transformValues?t.transformValues(s):s}function Fk(t,e,n){const r={},s=Mk(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const Uk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Uk.has(t)}let eS=t=>!hc(t);function Bk(t){t&&(eS=e=>e.startsWith("on")?!hc(e):t(e))}try{Bk(require("@emotion/is-prop-valid").default)}catch{}function zk(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(eS(s)||n===!0&&hc(s)||!e&&!hc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function z0(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function $k(t,e,n){const r=z0(e,t.x,t.width),s=z0(n,t.y,t.height);return`${r} ${s}`}const Hk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wk={offset:"strokeDashoffset",array:"strokeDasharray"};function qk(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Hk:Wk;t[i.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[i.array]=`${o} ${a}`}function cg(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f,m){if(lg(t,c,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_,dimensions:v}=t;y.transform&&(v&&(_.transform=y.transform),delete y.transform),v&&(s!==void 0||i!==void 0||_.transform)&&(_.transformOrigin=$k(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&qk(y,o,a,l,!1)}const tS=()=>({...ug(),attrs:{}}),hg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Kk(t,e,n,r){const s=b.useMemo(()=>{const i=tS();return cg(i,e,{enableHardwareAcceleration:!1},hg(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};ZT(i,t.style,t),s.style={...i,...s.style}}return s}function Gk(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(ag(n)?Kk:Fk)(r,i,o,n),h={...zk(r,typeof n=="string",t),...l,ref:s},{children:f}=r,m=b.useMemo(()=>Ut(f)?f.get():f,[f]);return b.createElement(n,{...h,children:m})}}function nS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const rS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sS(t,e,n,r){nS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(rS.has(s)?s:rg(s),e.attrs[s])}function dg(t,e){const{style:n}=t,r={};for(const s in n)(Ut(n[s])||e.style&&Ut(e.style[s])||GT(s,t))&&(r[s]=n[s]);return r}function iS(t,e){const n=dg(t,e);for(const r in t)if(Ut(t[r])||Ut(e[r])){const s=rl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function fg(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function oS(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const dc=t=>Array.isArray(t),Qk=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Xk=t=>dc(t)?t[t.length-1]||0:t;function Su(t){const e=Ut(t)?t.get():t;return Qk(e)?e.toValue():e}function Yk({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:Jk(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const aS=t=>(e,n)=>{const r=b.useContext(rh),s=b.useContext(sh),i=()=>Yk(t,e,r,s);return n?i():oS(i)};function Jk(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Su(i[m]);let{initial:o,animate:a}=t;const l=ah(t),c=qT(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!oh(f)&&(Array.isArray(f)?f:[f]).forEach(y=>{const _=fg(t,y);if(!_)return;const{transitionEnd:v,transition:S,...x}=_;for(const w in x){let T=x[w];if(Array.isArray(T)){const R=h?T.length-1:0;T=T[R]}T!==null&&(s[w]=T)}for(const w in v)s[w]=v[w]}),s}const Le=t=>t;class $0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Zk(t){let e=new $0,n=new $0,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const f=h&&s,m=f?e:n;return c&&o.add(l),m.add(l)&&f&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const ru=["prepare","read","update","preRender","render","postRender"],eb=40;function tb(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ru.reduce((f,m)=>(f[m]=Zk(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,eb),1),s.timestamp=f,s.isProcessing=!0,ru.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:ru.reduce((f,m)=>{const y=i[m];return f[m]=(_,v=!1,S=!1)=>(n||l(),y.schedule(_,v,S)),f},{}),cancel:f=>ru.forEach(m=>i[m].cancel(f)),state:s,steps:i}}const{schedule:_e,cancel:nr,state:pt,steps:Od}=tb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Le,!0),nb={useVisualState:aS({scrapeMotionValuesFromProps:iS,createRenderState:tS,onMount:(t,e,{renderState:n,latestValues:r})=>{_e.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),_e.render(()=>{cg(n,r,{enableHardwareAcceleration:!1},hg(e.tagName),t.transformTemplate),sS(e,n)})}})},rb={useVisualState:aS({scrapeMotionValuesFromProps:dg,createRenderState:ug})};function sb(t,{forwardMotionProps:e=!1},n,r){return{...ag(t)?nb:rb,preloadedFeatures:n,useRender:Gk(e),createVisualElement:r,Component:t}}function $n(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const lS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function uh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const ib=t=>e=>lS(e)&&t(e,uh(e));function Qn(t,e,n,r){return $n(t,e,ib(n),r)}const ob=(t,e)=>n=>e(t(n)),Ur=(...t)=>t.reduce(ob);function uS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const H0=uS("dragHorizontal"),W0=uS("dragVertical");function cS(t){let e=!1;if(t==="y")e=W0();else if(t==="x")e=H0();else{const n=H0(),r=W0();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function hS(){const t=cS(!0);return t?(t(),!1):!0}class is{constructor(e){this.isMounted=!1,this.node=e}update(){}}function q0(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||hS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&_e.update(()=>a[r](i,o))};return Qn(t.current,n,s,{passive:!t.getProps()[r]})}class ab extends is{mount(){this.unmount=Ur(q0(this.node,!0),q0(this.node,!1))}unmount(){}}class lb extends is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ur($n(this.node.current,"focus",()=>this.onFocus()),$n(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const dS=(t,e)=>e?t===e?!0:dS(t,e.parentElement):!1;function Ld(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,uh(n))}class ub extends is{constructor(){super(...arguments),this.removeStartListeners=Le,this.removeEndListeners=Le,this.removeAccessibleListeners=Le,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Qn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:f}=this.node.getProps();_e.update(()=>{!f&&!dS(this.node.current,a.target)?h&&h(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Qn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ur(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Ld("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&_e.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=$n(this.node.current,"keyup",o),Ld("down",(a,l)=>{this.startPress(a,l)})},n=$n(this.node.current,"keydown",e),r=()=>{this.isPressing&&Ld("cancel",(i,o)=>this.cancelPress(i,o))},s=$n(this.node.current,"blur",r);this.removeAccessibleListeners=Ur(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_e.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!hS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_e.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Qn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=$n(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ur(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const up=new WeakMap,Md=new WeakMap,cb=t=>{const e=up.get(t.target);e&&e(t)},hb=t=>{t.forEach(cb)};function db({root:t,...e}){const n=t||document;Md.has(n)||Md.set(n,{});const r=Md.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(hb,{root:t,...e})),r[s]}function fb(t,e,n){const r=db(e);return up.set(t,n),r.observe(t),()=>{up.delete(t),r.unobserve(t)}}const pb={some:0,all:1};class mb extends is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:pb[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=c?h:f;m&&m(l)};return fb(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(gb(e,n))&&this.startObserver()}unmount(){}}function gb({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const yb={inView:{Feature:mb},tap:{Feature:ub},focus:{Feature:lb},hover:{Feature:ab}};function fS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function vb(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function _b(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ch(t,e,n){const r=t.getProps();return fg(r,e,n!==void 0?n:r.custom,vb(t),_b(t))}let pg=Le;const Ps=t=>t*1e3,Xn=t=>t/1e3,wb={current:!1},pS=t=>Array.isArray(t)&&typeof t[0]=="number";function mS(t){return!!(!t||typeof t=="string"&&gS[t]||pS(t)||Array.isArray(t)&&t.every(mS))}const Ho=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ho([0,.65,.55,1]),circOut:Ho([.55,0,1,.45]),backIn:Ho([.31,.01,.66,-.59]),backOut:Ho([.33,1.53,.69,.99])};function yS(t){if(t)return pS(t)?Ho(t):Array.isArray(t)?t.map(yS):gS[t]}function xb(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=yS(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Eb(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const vS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Tb=1e-7,Sb=12;function Ib(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=vS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>Tb&&++a<Sb);return o}function ol(t,e,n,r){if(t===e&&n===r)return Le;const s=i=>Ib(i,0,1,t,n);return i=>i===0||i===1?i:vS(s(i),e,r)}const Pb=ol(.42,0,1,1),Ab=ol(0,0,.58,1),_S=ol(.42,0,.58,1),Cb=t=>Array.isArray(t)&&typeof t[0]!="number",wS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xS=t=>e=>1-t(1-e),mg=t=>1-Math.sin(Math.acos(t)),ES=xS(mg),Rb=wS(mg),TS=ol(.33,1.53,.69,.99),gg=xS(TS),Nb=wS(gg),kb=t=>(t*=2)<1?.5*gg(t):.5*(2-Math.pow(2,-10*(t-1))),bb={linear:Le,easeIn:Pb,easeInOut:_S,easeOut:Ab,circIn:mg,circInOut:Rb,circOut:ES,backIn:gg,backInOut:Nb,backOut:TS,anticipate:kb},K0=t=>{if(Array.isArray(t)){pg(t.length===4);const[e,n,r,s]=t;return ol(e,n,r,s)}else if(typeof t=="string")return bb[t];return t},yg=(t,e)=>n=>!!(sl(n)&&Vk.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),SS=(t,e,n)=>r=>{if(!sl(r))return r;const[s,i,o,a]=r.match(lh);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Db=t=>Gr(0,255,t),Fd={...qs,transform:t=>Math.round(Db(t))},xs={test:yg("rgb","red"),parse:SS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Fd.transform(t)+", "+Fd.transform(e)+", "+Fd.transform(n)+", "+oa(ia.transform(r))+")"};function Vb(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const cp={test:yg("#"),parse:Vb,transform:xs.transform},_i={test:yg("hsl","hue"),parse:SS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Nn.transform(oa(e))+", "+Nn.transform(oa(n))+", "+oa(ia.transform(r))+")"},It={test:t=>xs.test(t)||cp.test(t)||_i.test(t),parse:t=>xs.test(t)?xs.parse(t):_i.test(t)?_i.parse(t):cp.parse(t),transform:t=>sl(t)?t:t.hasOwnProperty("red")?xs.transform(t):_i.transform(t)},Ae=(t,e,n)=>-n*t+n*e+t;function Ud(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jb({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Ud(l,a,t+1/3),i=Ud(l,a,t),o=Ud(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Bd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},Ob=[cp,xs,_i],Lb=t=>Ob.find(e=>e.test(t));function G0(t){const e=Lb(t);let n=e.parse(t);return e===_i&&(n=jb(n)),n}const IS=(t,e)=>{const n=G0(t),r=G0(e),s={...n};return i=>(s.red=Bd(n.red,r.red,i),s.green=Bd(n.green,r.green,i),s.blue=Bd(n.blue,r.blue,i),s.alpha=Ae(n.alpha,r.alpha,i),xs.transform(s))};function Mb(t){var e,n;return isNaN(t)&&sl(t)&&(((e=t.match(lh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(YT))===null||n===void 0?void 0:n.length)||0)>0}const PS={regex:bk,countKey:"Vars",token:"${v}",parse:Le},AS={regex:YT,countKey:"Colors",token:"${c}",parse:It.parse},CS={regex:lh,countKey:"Numbers",token:"${n}",parse:qs.parse};function zd(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function fc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&zd(n,PS),zd(n,AS),zd(n,CS),n}function RS(t){return fc(t).values}function NS(t){const{values:e,numColors:n,numVars:r,tokenised:s}=fc(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(PS.token,o[l]):l<r+n?a=a.replace(AS.token,It.transform(o[l])):a=a.replace(CS.token,oa(o[l]));return a}}const Fb=t=>typeof t=="number"?0:t;function Ub(t){const e=RS(t);return NS(t)(e.map(Fb))}const Qr={test:Mb,parse:RS,createTransformer:NS,getAnimatableNone:Ub},kS=(t,e)=>n=>`${n>0?e:t}`;function bS(t,e){return typeof t=="number"?n=>Ae(t,e,n):It.test(t)?IS(t,e):t.startsWith("var(")?kS(t,e):VS(t,e)}const DS=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>bS(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},Bb=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=bS(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},VS=(t,e)=>{const n=Qr.createTransformer(e),r=fc(t),s=fc(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Ur(DS(r.values,s.values),n):kS(t,e)},Ma=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Q0=(t,e)=>n=>Ae(t,e,n);function zb(t){return typeof t=="number"?Q0:typeof t=="string"?It.test(t)?IS:VS:Array.isArray(t)?DS:typeof t=="object"?Bb:Q0}function $b(t,e,n){const r=[],s=n||zb(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Le:e;a=Ur(l,a)}r.push(a)}return r}function jS(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(pg(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=$b(e,r,s),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=Ma(t[h],t[h+1],c);return o[h](f)};return n?c=>l(Gr(t[0],t[i-1],c)):l}function Hb(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ma(0,e,r);t.push(Ae(n,1,s))}}function Wb(t){const e=[0];return Hb(e,t.length-1),e}function qb(t,e){return t.map(n=>n*e)}function Kb(t,e){return t.map(()=>e||_S).splice(0,t.length-1)}function pc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Cb(r)?r.map(K0):K0(r),i={done:!1,value:e[0]},o=qb(n&&n.length===e.length?n:Wb(e),t),a=jS(o,e,{ease:Array.isArray(s)?s:Kb(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function OS(t,e){return e?t*(1e3/e):0}const Gb=5;function LS(t,e,n){const r=Math.max(e-Gb,0);return OS(n-t(r),e-r)}const $d=.001,Qb=.01,Xb=10,Yb=.05,Jb=1;function Zb({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=Gr(Yb,Jb,o),t=Gr(Qb,Xb,Xn(t)),o<1?(s=c=>{const h=c*o,f=h*t,m=h-n,y=hp(c,o),_=Math.exp(-f);return $d-m/y*_},i=c=>{const f=c*o*t,m=f*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-f),v=hp(Math.pow(c,2),o);return(-s(c)+$d>0?-1:1)*((m-y)*_)/v}):(s=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-$d+h*f},i=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=t2(s,i,a);if(t=Ps(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const e2=12;function t2(t,e,n){let r=n;for(let s=1;s<e2;s++)r=r-t(r)/e(r);return r}function hp(t,e){return t*Math.sqrt(1-e*e)}const n2=["duration","bounce"],r2=["stiffness","damping","mass"];function X0(t,e){return e.some(n=>t[n]!==void 0)}function s2(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!X0(t,r2)&&X0(t,n2)){const n=Zb(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function MS({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:h,velocity:f,isResolvedFromDuration:m}=s2({...r,velocity:-Xn(r.velocity||0)}),y=f||0,_=l/(2*Math.sqrt(a*c)),v=i-s,S=Xn(Math.sqrt(a/c)),x=Math.abs(v)<5;n||(n=x?.01:2),e||(e=x?.005:.5);let w;if(_<1){const T=hp(S,_);w=R=>{const j=Math.exp(-_*S*R);return i-j*((y+_*S*v)/T*Math.sin(T*R)+v*Math.cos(T*R))}}else if(_===1)w=T=>i-Math.exp(-S*T)*(v+(y+S*v)*T);else{const T=S*Math.sqrt(_*_-1);w=R=>{const j=Math.exp(-_*S*R),V=Math.min(T*R,300);return i-j*((y+_*S*v)*Math.sinh(V)+T*v*Math.cosh(V))/T}}return{calculatedDuration:m&&h||null,next:T=>{const R=w(T);if(m)o.done=T>=h;else{let j=y;T!==0&&(_<1?j=LS(w,T,R):j=0);const V=Math.abs(j)<=n,P=Math.abs(i-R)<=e;o.done=V&&P}return o.value=o.done?i:R,o}}}function Y0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=E=>a!==void 0&&E<a||l!==void 0&&E>l,_=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let v=n*e;const S=f+v,x=o===void 0?S:o(S);x!==S&&(v=x-f);const w=E=>-v*Math.exp(-E/r),T=E=>x+w(E),R=E=>{const A=w(E),C=T(E);m.done=Math.abs(A)<=c,m.value=m.done?x:C};let j,V;const P=E=>{y(m.value)&&(j=E,V=MS({keyframes:[m.value,_(m.value)],velocity:LS(T,E,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return P(0),{calculatedDuration:null,next:E=>{let A=!1;return!V&&j===void 0&&(A=!0,R(E),P(E)),j!==void 0&&E>j?V.next(E-j):(!A&&R(E),m)}}}const i2=t=>{const e=({timestamp:n})=>t(n);return{start:()=>_e.update(e,!0),stop:()=>nr(e),now:()=>pt.isProcessing?pt.timestamp:performance.now()}},J0=2e4;function Z0(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<J0;)e+=n,r=t.next(e);return e>=J0?1/0:e}const o2={decay:Y0,inertia:Y0,tween:pc,keyframes:pc,spring:MS};function mc({autoplay:t=!0,delay:e=0,driver:n=i2,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:f,...m}){let y=1,_=!1,v,S;const x=()=>{S=new Promise(G=>{v=G})};x();let w;const T=o2[s]||pc;let R;T!==pc&&typeof r[0]!="number"&&(R=jS([0,100],r,{clamp:!1}),r=[0,100]);const j=T({...m,keyframes:r});let V;a==="mirror"&&(V=T({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let P="idle",E=null,A=null,C=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=Z0(j));const{calculatedDuration:k}=j;let D=1/0,N=1/0;k!==null&&(D=k+o,N=D*(i+1)-o);let ee=0;const Je=G=>{if(A===null)return;y>0&&(A=Math.min(A,G)),y<0&&(A=Math.min(G-N/y,A)),E!==null?ee=E:ee=Math.round(G-A)*y;const se=ee-e*(y>=0?1:-1),ge=y>=0?se<0:se>N;ee=Math.max(se,0),P==="finished"&&E===null&&(ee=N);let Ze=ee,xt=j;if(i){const po=Math.min(ee,N)/D;let On=Math.floor(po),Zt=po%1;!Zt&&po>=1&&(Zt=1),Zt===1&&On--,On=Math.min(On,i+1),!!(On%2)&&(a==="reverse"?(Zt=1-Zt,o&&(Zt-=o/D)):a==="mirror"&&(xt=V)),Ze=Gr(0,1,Zt)*D}const Et=ge?{done:!1,value:r[0]}:xt.next(Ze);R&&(Et.value=R(Et.value));let{done:Jt}=Et;!ge&&k!==null&&(Jt=y>=0?ee>=N:ee<=0);const Uh=E===null&&(P==="finished"||P==="running"&&Jt);return f&&f(Et.value),Uh&&z(),Et},le=()=>{w&&w.stop(),w=void 0},Ve=()=>{P="idle",le(),v(),x(),A=C=null},z=()=>{P="finished",h&&h(),le(),v()},Q=()=>{if(_)return;w||(w=n(Je));const G=w.now();l&&l(),E!==null?A=G-E:(!A||P==="finished")&&(A=G),P==="finished"&&x(),C=A,E=null,P="running",w.start()};t&&Q();const J={then(G,se){return S.then(G,se)},get time(){return Xn(ee)},set time(G){G=Ps(G),ee=G,E!==null||!w||y===0?E=G:A=w.now()-G/y},get duration(){const G=j.calculatedDuration===null?Z0(j):j.calculatedDuration;return Xn(G)},get speed(){return y},set speed(G){G===y||!w||(y=G,J.time=Xn(ee))},get state(){return P},play:Q,pause:()=>{P="paused",E=ee},stop:()=>{_=!0,P!=="idle"&&(P="idle",c&&c(),Ve())},cancel:()=>{C!==null&&Je(C),Ve()},complete:()=>{P="finished"},sample:G=>(A=0,Je(G))};return J}function a2(t){let e;return()=>(e===void 0&&(e=t()),e)}const l2=a2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),u2=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),su=10,c2=2e4,h2=(t,e)=>e.type==="spring"||t==="backgroundColor"||!mS(e.ease);function d2(t,e,{onUpdate:n,onComplete:r,...s}){if(!(l2()&&u2.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const h=()=>{l=new Promise(T=>{a=T})};h();let{keyframes:f,duration:m=300,ease:y,times:_}=s;if(h2(e,s)){const T=mc({...s,repeat:0,delay:0});let R={done:!1,value:f[0]};const j=[];let V=0;for(;!R.done&&V<c2;)R=T.sample(V),j.push(R.value),V+=su;_=void 0,f=j,m=V-su,y="linear"}const v=xb(t.owner.current,e,f,{...s,duration:m,ease:y,times:_}),S=()=>{c=!1,v.cancel()},x=()=>{c=!0,_e.update(S),a(),h()};return v.onfinish=()=>{c||(t.set(Eb(f,s)),r&&r(),x())},{then(T,R){return l.then(T,R)},attachTimeline(T){return v.timeline=T,v.onfinish=null,Le},get time(){return Xn(v.currentTime||0)},set time(T){v.currentTime=Ps(T)},get speed(){return v.playbackRate},set speed(T){v.playbackRate=T},get duration(){return Xn(m)},play:()=>{o||(v.play(),nr(S))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:T}=v;if(T){const R=mc({...s,autoplay:!1});t.setWithVelocity(R.sample(T-su).value,R.sample(T).value,su)}x()},complete:()=>{c||v.finish()},cancel:x}}function f2({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Le,pause:Le,stop:Le,then:i=>(i(),Promise.resolve()),cancel:Le,complete:Le});return e?mc({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const p2={type:"spring",stiffness:500,damping:25,restSpeed:10},m2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),g2={type:"keyframes",duration:.8},y2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v2=(t,{keyframes:e})=>e.length>2?g2:Ws.has(t)?t.startsWith("scale")?m2(e[1]):p2:y2,dp=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qr.test(e)||e==="0")&&!e.startsWith("url(")),_2=new Set(["brightness","contrast","saturate","opacity"]);function w2(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(lh)||[];if(!r)return t;const s=n.replace(r,"");let i=_2.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const x2=/([a-z-]*)\(.*?\)/g,fp={...Qr,getAnimatableNone:t=>{const e=t.match(x2);return e?e.map(w2).join(" "):t}},E2={...JT,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:fp,WebkitFilter:fp},vg=t=>E2[t];function FS(t,e){let n=vg(t);return n!==fp&&(n=Qr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const US=t=>/^0[^.\s]+$/.test(t);function T2(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||US(t)}function S2(t,e,n,r){const s=dp(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),T2(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];i[h]=FS(e,a)}return i}function I2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function _g(t,e){return t[e]||t.default||t}const P2={skipAnimations:!1},wg=(t,e,n,r={})=>s=>{const i=_g(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ps(o);const l=S2(e,t,n,i),c=l[0],h=l[l.length-1],f=dp(t,c),m=dp(t,h);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:_=>{e.set(_),i.onUpdate&&i.onUpdate(_)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(I2(i)||(y={...y,...v2(t,y)}),y.duration&&(y.duration=Ps(y.duration)),y.repeatDelay&&(y.repeatDelay=Ps(y.repeatDelay)),!f||!m||wb.current||i.type===!1||P2.skipAnimations)return f2(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=d2(e,t,y);if(_)return _}return mc(y)};function gc(t){return!!(Ut(t)&&t.add)}const BS=t=>/^\-?\d*\.?\d+$/.test(t);function xg(t,e){t.indexOf(e)===-1&&t.push(e)}function Eg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Tg{constructor(){this.subscriptions=[]}add(e){return xg(this.subscriptions,e),()=>Eg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const A2=t=>!isNaN(parseFloat(t));class C2{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=pt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,_e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=A2(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Tg);const r=this.events[e].add(n);return e==="change"?()=>{r(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?OS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bi(t,e){return new C2(t,e)}const zS=t=>e=>e.test(t),R2={test:t=>t==="auto",parse:t=>t},$S=[qs,Y,Nn,yr,Ok,jk,R2],Oo=t=>$S.find(zS(t)),N2=[...$S,It,Qr],k2=t=>N2.find(zS(t));function b2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bi(n))}function D2(t,e){const n=ch(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Xk(i[o]);b2(t,o,a)}}function V2(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),h!=null&&(typeof h=="string"&&(BS(h)||US(h))?h=parseFloat(h):!k2(h)&&Qr.test(c)&&(h=FS(l,c)),t.addValue(l,Bi(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function j2(t,e){return e?(e[t]||e.default||e).from:void 0}function O2(t,e,n){const r={};for(const s in t){const i=j2(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function L2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function M2(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function HS(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const m=t.getValue(f),y=a[f];if(!m||y===void 0||h&&L2(h,f))continue;const _={delay:n,elapsed:0,..._g(i||{},f)};if(window.HandoffAppearAnimations){const x=t.getProps()[WT];if(x){const w=window.HandoffAppearAnimations(x,f,m,_e);w!==null&&(_.elapsed=w,_.isHandoff=!0)}}let v=!_.isHandoff&&!M2(m,y);if(_.type==="spring"&&(m.getVelocity()||_.velocity)&&(v=!1),m.animation&&(v=!1),v)continue;m.start(wg(f,m,y,t.shouldReduceMotion&&Ws.has(f)?{type:!1}:_));const S=m.animation;gc(l)&&(l.add(f),S.then(()=>l.remove(f))),c.push(S)}return o&&Promise.all(c).then(()=>{o&&D2(t,o)}),c}function pp(t,e,n={}){const r=ch(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(HS(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return F2(t,e,c+l,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function F2(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(U2).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(pp(c,e,{...i,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function U2(t,e){return t.sortNodePosition(e)}function B2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>pp(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=pp(t,e,n);else{const s=typeof e=="function"?ch(t,e,n.custom):e;r=Promise.all(HS(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const z2=[...sg].reverse(),$2=sg.length;function H2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>B2(t,n,r)))}function W2(t){let e=H2(t);const n=K2();let r=!0;const s=(l,c)=>{const h=ch(t,c);if(h){const{transition:f,transitionEnd:m,...y}=h;l={...l,...y,...m}}return l};function i(l){e=l(t)}function o(l,c){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],y=new Set;let _={},v=1/0;for(let x=0;x<$2;x++){const w=z2[x],T=n[w],R=h[w]!==void 0?h[w]:f[w],j=Oa(R),V=w===c?T.isActive:null;V===!1&&(v=x);let P=R===f[w]&&R!==h[w]&&j;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),T.protectedKeys={..._},!T.isActive&&V===null||!R&&!T.prevProp||oh(R)||typeof R=="boolean")continue;let A=q2(T.prevProp,R)||w===c&&T.isActive&&!P&&j||x>v&&j,C=!1;const k=Array.isArray(R)?R:[R];let D=k.reduce(s,{});V===!1&&(D={});const{prevResolvedValues:N={}}=T,ee={...N,...D},Je=le=>{A=!0,y.has(le)&&(C=!0,y.delete(le)),T.needsAnimating[le]=!0};for(const le in ee){const Ve=D[le],z=N[le];if(_.hasOwnProperty(le))continue;let Q=!1;dc(Ve)&&dc(z)?Q=!fS(Ve,z):Q=Ve!==z,Q?Ve!==void 0?Je(le):y.add(le):Ve!==void 0&&y.has(le)?Je(le):T.protectedKeys[le]=!0}T.prevProp=R,T.prevResolvedValues=D,T.isActive&&(_={..._,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!P||C)&&m.push(...k.map(le=>({animation:le,options:{type:w,...l}})))}if(y.size){const x={};y.forEach(w=>{const T=t.getBaseTarget(w);T!==void 0&&(x[w]=T)}),m.push({animation:x})}let S=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(m):Promise.resolve()}function a(l,c,h){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(l,c)}),n[l].isActive=c;const m=o(h,l);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function q2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fS(e,t):!1}function hs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function K2(){return{animate:hs(!0),whileInView:hs(),whileHover:hs(),whileTap:hs(),whileDrag:hs(),whileFocus:hs(),exit:hs()}}class G2 extends is{constructor(e){super(e),e.animationState||(e.animationState=W2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),oh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Q2=0;class X2 extends is{constructor(){super(...arguments),this.id=Q2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Y2={animation:{Feature:G2},exit:{Feature:X2}},e_=(t,e)=>Math.abs(t-e);function J2(t,e){const n=e_(t.x,e.x),r=e_(t.y,e.y);return Math.sqrt(n**2+r**2)}class WS{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Wd(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=J2(f.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:_}=f,{timestamp:v}=pt;this.history.push({..._,timestamp:v});const{onStart:S,onMove:x}=this.handlers;m||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Hd(m,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Wd(f.type==="pointercancel"?this.lastMoveEventInfo:Hd(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,S),_&&_(f,S)},!lS(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=uh(e),a=Hd(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=pt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Wd(a,this.history)),this.removeListeners=Ur(Qn(this.contextWindow,"pointermove",this.handlePointerMove),Qn(this.contextWindow,"pointerup",this.handlePointerUp),Qn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function Hd(t,e){return e?{point:e(t.point)}:t}function t_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wd({point:t},e){return{point:t,delta:t_(t,qS(e)),offset:t_(t,Z2(e)),velocity:eD(e,.1)}}function Z2(t){return t[0]}function qS(t){return t[t.length-1]}function eD(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=qS(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ps(e)));)n--;if(!r)return{x:0,y:0};const i=Xn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Qt(t){return t.max-t.min}function mp(t,e=0,n=.01){return Math.abs(t-e)<=n}function n_(t,e,n,r=.5){t.origin=r,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=Qt(n)/Qt(e),(mp(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ae(n.min,n.max,t.origin)-t.originPoint,(mp(t.translate)||isNaN(t.translate))&&(t.translate=0)}function aa(t,e,n,r){n_(t.x,e.x,n.x,r?r.originX:void 0),n_(t.y,e.y,n.y,r?r.originY:void 0)}function r_(t,e,n){t.min=n.min+e.min,t.max=t.min+Qt(e)}function tD(t,e,n){r_(t.x,e.x,n.x),r_(t.y,e.y,n.y)}function s_(t,e,n){t.min=e.min-n.min,t.max=t.min+Qt(e)}function la(t,e,n){s_(t.x,e.x,n.x),s_(t.y,e.y,n.y)}function nD(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ae(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ae(n,t,r.max):Math.min(t,n)),t}function i_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function rD(t,{top:e,left:n,bottom:r,right:s}){return{x:i_(t.x,n,s),y:i_(t.y,e,r)}}function o_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function sD(t,e){return{x:o_(t.x,e.x),y:o_(t.y,e.y)}}function iD(t,e){let n=.5;const r=Qt(t),s=Qt(e);return s>r?n=Ma(e.min,e.max-r,t.min):r>s&&(n=Ma(t.min,t.max-s,e.min)),Gr(0,1,n)}function oD(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const gp=.35;function aD(t=gp){return t===!1?t=0:t===!0&&(t=gp),{x:a_(t,"left","right"),y:a_(t,"top","bottom")}}function a_(t,e,n){return{min:l_(t,e),max:l_(t,n)}}function l_(t,e){return typeof t=="number"?t:t[e]||0}const u_=()=>({translate:0,scale:1,origin:0,originPoint:0}),wi=()=>({x:u_(),y:u_()}),c_=()=>({min:0,max:0}),Be=()=>({x:c_(),y:c_()});function nn(t){return[t("x"),t("y")]}function KS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lD({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uD(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function qd(t){return t===void 0||t===1}function yp({scale:t,scaleX:e,scaleY:n}){return!qd(t)||!qd(e)||!qd(n)}function ps(t){return yp(t)||GS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function GS(t){return h_(t.x)||h_(t.y)}function h_(t){return t&&t!=="0%"}function yc(t,e,n){const r=t-n,s=e*r;return n+s}function d_(t,e,n,r,s){return s!==void 0&&(t=yc(t,s,r)),yc(t,n,r)+e}function vp(t,e=0,n=1,r,s){t.min=d_(t.min,e,n,r,s),t.max=d_(t.max,e,n,r,s)}function QS(t,{x:e,y:n}){vp(t.x,e.translate,e.scale,e.originPoint),vp(t.y,n.translate,n.scale,n.originPoint)}function cD(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&xi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,QS(t,o)),r&&ps(i.latestValues)&&xi(t,i.latestValues))}e.x=f_(e.x),e.y=f_(e.y)}function f_(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function wr(t,e){t.min=t.min+e,t.max=t.max+e}function p_(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Ae(t.min,t.max,i);vp(t,e[n],e[r],o,e.scale)}const hD=["x","scaleX","originX"],dD=["y","scaleY","originY"];function xi(t,e){p_(t.x,e,hD),p_(t.y,e,dD)}function XS(t,e){return KS(uD(t.getBoundingClientRect(),e))}function fD(t,e,n){const r=XS(t,n),{scroll:s}=e;return s&&(wr(r.x,s.offset.x),wr(r.y,s.offset.y)),r}const YS=({current:t})=>t?t.ownerDocument.defaultView:null,pD=new WeakMap;class mD{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Be(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uh(h,"page").point)},i=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:_}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=cS(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(S=>{let x=this.getAxisMotionValue(S).get()||0;if(Nn.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[S];T&&(x=Qt(T)*(parseFloat(x)/100))}}this.originPoint[S]=x}),_&&_e.update(()=>_(h,f),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:_,onDrag:v}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:S}=f;if(y&&this.currentDirection===null){this.currentDirection=gD(S),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),v&&v(h,f)},a=(h,f)=>this.stop(h,f),l=()=>nn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new WS(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:YS(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&_e.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!iu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=nD(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&vi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=rD(s.layoutBox,n):this.constraints=!1,this.elastic=aD(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=oD(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=fD(r,s.root,this.visualElement.getTransformPagePoint());let o=sD(s.layout.layoutBox,i);if(n){const a=n(lD(o));this.hasMutatedConstraints=!!a,a&&(o=KS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nn(h=>{if(!iu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(wg(e,r,0,n))}stopAnimation(){nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nn(n=>{const{drag:r}=this.getProps();if(!iu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=iD({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nn(o=>{if(!iu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ae(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;pD.set(this.visualElement,this);const e=this.visualElement.current,n=Qn(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();vi(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=$n(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=gp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function iu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function gD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class yD extends is{constructor(e){super(e),this.removeGroupControls=Le,this.removeListeners=Le,this.controls=new mD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Le}unmount(){this.removeGroupControls(),this.removeListeners()}}const m_=t=>(e,n)=>{t&&_e.update(()=>t(e,n))};class vD extends is{constructor(){super(...arguments),this.removePointerDownListener=Le}onPointerDown(e){this.session=new WS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:m_(e),onStart:m_(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&_e.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Qn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _D(){const t=b.useContext(sh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=b.useId();return b.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=g_(t,e.target.x),r=g_(t,e.target.y);return`${n}% ${r}%`}},wD={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Qr.parse(t);if(s.length>5)return r;const i=Qr.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Ae(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class xD extends Uc.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;Ck(ED),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||_e.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JS(t){const[e,n]=_D(),r=b.useContext(og);return Uc.createElement(xD,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(KT),isPresent:e,safeToRemove:n})}const ED={borderRadius:{...Lo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lo,borderTopRightRadius:Lo,borderBottomLeftRadius:Lo,borderBottomRightRadius:Lo,boxShadow:wD},ZS=["TopLeft","TopRight","BottomLeft","BottomRight"],TD=ZS.length,y_=t=>typeof t=="string"?parseFloat(t):t,v_=t=>typeof t=="number"||Y.test(t);function SD(t,e,n,r,s,i){s?(t.opacity=Ae(0,n.opacity!==void 0?n.opacity:1,ID(r)),t.opacityExit=Ae(e.opacity!==void 0?e.opacity:1,0,PD(r))):i&&(t.opacity=Ae(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<TD;o++){const a=`border${ZS[o]}Radius`;let l=__(e,a),c=__(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||v_(l)===v_(c)?(t[a]=Math.max(Ae(y_(l),y_(c),r),0),(Nn.test(c)||Nn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ae(e.rotate||0,n.rotate||0,r))}function __(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ID=e1(0,.5,ES),PD=e1(.5,.95,Le);function e1(t,e,n){return r=>r<t?0:r>e?1:n(Ma(t,e,r))}function w_(t,e){t.min=e.min,t.max=e.max}function en(t,e){w_(t.x,e.x),w_(t.y,e.y)}function x_(t,e,n,r,s){return t-=e,t=yc(t,1/n,r),s!==void 0&&(t=yc(t,1/s,r)),t}function AD(t,e=0,n=1,r=.5,s,i=t,o=t){if(Nn.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ae(i.min,i.max,r);t===i&&(a-=e),t.min=x_(t.min,e,n,a,s),t.max=x_(t.max,e,n,a,s)}function E_(t,e,[n,r,s],i,o){AD(t,e[n],e[r],e[s],e.scale,i,o)}const CD=["x","scaleX","originX"],RD=["y","scaleY","originY"];function T_(t,e,n,r){E_(t.x,e,CD,n?n.x:void 0,r?r.x:void 0),E_(t.y,e,RD,n?n.y:void 0,r?r.y:void 0)}function S_(t){return t.translate===0&&t.scale===1}function t1(t){return S_(t.x)&&S_(t.y)}function ND(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function n1(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function I_(t){return Qt(t.x)/Qt(t.y)}class kD{constructor(){this.members=[]}add(e){xg(this.members,e),e.scheduleRender()}remove(e){if(Eg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P_(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const bD=(t,e)=>t.depth-e.depth;class DD{constructor(){this.children=[],this.isDirty=!1}add(e){xg(this.children,e),this.isDirty=!0}remove(e){Eg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bD),this.isDirty=!1,this.children.forEach(e)}}function VD(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(nr(r),t(i-e))};return _e.read(r,!0),()=>nr(r)}function jD(t){window.MotionDebug&&window.MotionDebug.record(t)}function OD(t){return t instanceof SVGElement&&t.tagName!=="svg"}function LD(t,e,n){const r=Ut(t)?t:Bi(t);return r.start(wg("",r,e,n)),r.animation}const A_=["","X","Y","Z"],MD={visibility:"hidden"},C_=1e3;let FD=0;const ms={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function r1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=FD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ms.totalNodes=ms.resolvedTargetDeltas=ms.recalculatedProjection=0,this.nodes.forEach(zD),this.nodes.forEach(KD),this.nodes.forEach(GD),this.nodes.forEach($D),jD(ms)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new DD)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Tg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OD(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=VD(m,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(N_))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||ZD,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=h.getProps(),w=!this.targetLayout||!n1(this.targetLayout,_)||y,T=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const R={..._g(v,"layout"),onPlay:S,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||N_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QD),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(R_);return}this.isUpdating||this.nodes.forEach(WD),this.isUpdating=!1,this.nodes.forEach(qD),this.nodes.forEach(UD),this.nodes.forEach(BD),this.clearAllSnapshots();const a=performance.now();pt.delta=Gr(0,1e3/60,a-pt.timestamp),pt.timestamp=a,pt.isProcessing=!0,Od.update.process(pt),Od.preRender.process(pt),Od.render.process(pt),pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(HD),this.sharedNodes.forEach(XD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!t1(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||ps(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),eV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Be();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(wr(a.x,l.offset.x),wr(a.y,l.offset.y)),a}removeElementScroll(o){const a=Be();en(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:f}=c;if(c!==this.root&&h&&f.layoutScroll){if(h.isRoot){en(a,o);const{scroll:m}=this.root;m&&(wr(a.x,-m.offset.x),wr(a.y,-m.offset.y))}wr(a.x,h.offset.x),wr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=Be();en(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&xi(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ps(h.latestValues)&&xi(l,h.latestValues)}return ps(this.latestValues)&&xi(l,this.latestValues),l}removeTransform(o){const a=Be();en(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ps(c.latestValues))continue;yp(c.latestValues)&&c.updateSnapshot();const h=Be(),f=c.measurePageBox();en(h,f),T_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return ps(this.latestValues)&&T_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=pt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),la(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Be(),this.targetWithTransforms=Be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):en(this.target,this.layout.layoutBox),QS(this.target,this.targetDelta)):en(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),la(this.relativeTargetOrigin,this.target,y.target),en(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ms.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yp(this.parent.latestValues)||GS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===pt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;en(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;cD(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=wi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi());const v=this.projectionTransform;aa(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=P_(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==m||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),ms.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Be(),y=l?l.source:void 0,_=this.layout?this.layout.source:void 0,v=y!==_,S=this.getStack(),x=!S||S.members.length<=1,w=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(JD));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const j=R/1e3;k_(f.x,o.x,j),k_(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(la(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YD(this.relativeTarget,this.relativeTargetOrigin,m,j),T&&ND(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Be()),en(T,this.relativeTarget)),v&&(this.animationValues=h,SD(h,c,this.latestValues,j,w,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=LD(0,C_,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(C_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&s1(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Be();const f=Qt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=Qt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}en(a,l),xi(a,h),aa(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new kD),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<A_.length;h++){const f="rotate"+A_[h];l[f]&&(c[f]=l[f],o.setStaticValue(f,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MD;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Su(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Su(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ps(this.latestValues)&&(v.transform=h?h({},""):"none",this.hasProjected=!1),v}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=P_(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:_}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in cc){if(m[v]===void 0)continue;const{correct:S,applyTo:x}=cc[v],w=c.transform==="none"?m[v]:S(m[v],f);if(x){const T=x.length;for(let R=0;R<T;R++)c[x[R]]=w}else c[v]=w}return this.options.layoutId&&(c.pointerEvents=f===this?Su(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(R_),this.root.sharedNodes.clear()}}}function UD(t){t.updateLayout()}function BD(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?nn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Qt(m);m.min=r[f].min,m.max=m.min+y}):s1(i,n.layoutBox,r)&&nn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Qt(r[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const a=wi();aa(a,r,n.layoutBox);const l=wi();o?aa(l,t.applyTransform(s,!0),n.measuredBox):aa(l,r,n.layoutBox);const c=!t1(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const _=Be();la(_,n.layoutBox,m.layoutBox);const v=Be();la(v,r,y.layoutBox),n1(_,v)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zD(t){ms.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $D(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HD(t){t.clearSnapshot()}function R_(t){t.clearMeasurements()}function WD(t){t.isLayoutDirty=!1}function qD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function N_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function KD(t){t.resolveTargetDelta()}function GD(t){t.calcProjection()}function QD(t){t.resetRotation()}function XD(t){t.removeLeadSnapshot()}function k_(t,e,n){t.translate=Ae(e.translate,0,n),t.scale=Ae(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function b_(t,e,n,r){t.min=Ae(e.min,n.min,r),t.max=Ae(e.max,n.max,r)}function YD(t,e,n,r){b_(t.x,e.x,n.x,r),b_(t.y,e.y,n.y,r)}function JD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZD={duration:.45,ease:[.4,0,.1,1]},D_=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),V_=D_("applewebkit/")&&!D_("chrome/")?Math.round:Le;function j_(t){t.min=V_(t.min),t.max=V_(t.max)}function eV(t){j_(t.x),j_(t.y)}function s1(t,e,n){return t==="position"||t==="preserve-aspect"&&!mp(I_(e),I_(n),.2)}const tV=r1({attachResizeListener:(t,e)=>$n(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kd={current:void 0},i1=r1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Kd.current){const t=new tV({});t.mount(window),t.setOptions({layoutScroll:!0}),Kd.current=t}return Kd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nV={pan:{Feature:vD},drag:{Feature:yD,ProjectionNode:i1,MeasureLayout:JS}},rV=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function sV(t){const e=rV.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function _p(t,e,n=1){const[r,s]=sV(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return BS(o)?parseFloat(o):o}else return lp(s)?_p(s,e,n+1):s}function iV(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!lp(i))return;const o=_p(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!lp(i))continue;const o=_p(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const oV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),o1=t=>oV.has(t),aV=t=>Object.keys(t).some(o1),O_=t=>t===qs||t===Y,L_=(t,e)=>parseFloat(t.split(", ")[e]),M_=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return L_(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?L_(i[1],t):0}},lV=new Set(["x","y","z"]),uV=rl.filter(t=>!lV.has(t));function cV(t){const e=[];return uV.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const zi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:M_(4,13),y:M_(5,14)};zi.translateX=zi.x;zi.translateY=zi.y;const hV=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=zi[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=zi[c](l,i)}),t},dV=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(o1);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],f=Oo(h);const m=e[l];let y;if(dc(m)){const _=m.length,v=m[0]===null?1:0;h=m[v],f=Oo(h);for(let S=v;S<_&&m[S]!==null;S++)y?pg(Oo(m[S])===y):y=Oo(m[S])}else y=Oo(m);if(f!==y)if(O_(f)&&O_(y)){const _=c.get();typeof _=="string"&&c.set(parseFloat(_)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&y===Y&&(e[l]=m.map(parseFloat))}else f!=null&&f.transform&&(y!=null&&y.transform)&&(h===0||m===0)?h===0?c.set(y.transform(h)):e[l]=f.transform(m):(o||(i=cV(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=hV(e,t,a);return i.length&&i.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),ih&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function fV(t,e,n,r){return aV(e)?dV(t,e,n,r):{target:e,transitionEnd:r}}const pV=(t,e,n,r)=>{const s=iV(t,e,r);return e=s.target,r=s.transitionEnd,fV(t,e,n,r)},wp={current:null},a1={current:!1};function mV(){if(a1.current=!0,!!ih)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>wp.current=t.matches;t.addListener(e),e()}else wp.current=!1}function gV(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Ut(i))t.addValue(s,i),gc(r)&&r.add(s);else if(Ut(o))t.addValue(s,Bi(i,{owner:t})),gc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Bi(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const F_=new WeakMap,l1=Object.keys(La),yV=l1.length,U_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],vV=ig.length;class _V{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_e.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=ah(n),this.isVariantNode=qT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&Ut(m)&&(m.set(a[f],!1),gc(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,F_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),a1.current||mV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:wp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){F_.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ws.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&_e.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<yV;l++){const c=l1[l],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:y}=La[c];m&&(o=m),h(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||f&&vi(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Be()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<U_.length;r++){const s=U_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=gV(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<vV;r++){const s=ig[r],i=this.props[s];(Oa(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bi(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=fg(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ut(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Tg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class u1 extends _V{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=O2(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){V2(this,r,o);const a=pV(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function wV(t){return window.getComputedStyle(t)}class xV extends u1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ws.has(n)){const r=vg(n);return r&&r.default||0}else{const r=wV(e),s=(XT(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XS(e,n)}build(e,n,r,s){lg(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return dg(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){nS(e,n,r,s)}}class EV extends u1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ws.has(n)){const r=vg(n);return r&&r.default||0}return n=rS.has(n)?n:rg(n),e.getAttribute(n)}measureInstanceViewportBox(){return Be()}scrapeMotionValuesFromProps(e,n){return iS(e,n)}build(e,n,r,s){cg(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){sS(e,n,r,s)}mount(e){this.isSVGTag=hg(e.tagName),super.mount(e)}}const TV=(t,e)=>ag(t)?new EV(e,{enableHardwareAcceleration:!1}):new xV(e,{enableHardwareAcceleration:!0}),SV={layout:{ProjectionNode:i1,MeasureLayout:JS}},IV={...Y2,...yb,...nV,...SV},Te=Pk((t,e)=>sb(t,e,IV,TV));function c1(){const t=b.useRef(!1);return ng(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function PV(){const t=c1(),[e,n]=b.useState(0),r=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>_e.postRender(r),[r]),e]}class AV extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CV({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),b.createElement(AV,{isPresent:e,childRef:r,sizeRef:s},b.cloneElement(t,{ref:r}))}const Gd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=oS(RV),l=b.useId(),c=b.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return b.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.createElement(CV,{isPresent:n},t)),b.createElement(sh.Provider,{value:c},t)};function RV(){return new Map}function NV(t){return b.useEffect(()=>()=>t(),[])}const gs=t=>t.key||"";function kV(t,e){t.forEach(n=>{const r=gs(n);e.set(r,n)})}function bV(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const DV=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=b.useContext(og).forceRender||PV()[0],l=c1(),c=bV(t);let h=c;const f=b.useRef(new Map).current,m=b.useRef(h),y=b.useRef(new Map).current,_=b.useRef(!0);if(ng(()=>{_.current=!1,kV(c,y),m.current=h}),NV(()=>{_.current=!0,y.clear(),f.clear()}),_.current)return b.createElement(b.Fragment,null,h.map(w=>b.createElement(Gd,{key:gs(w),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},w)));h=[...h];const v=m.current.map(gs),S=c.map(gs),x=v.length;for(let w=0;w<x;w++){const T=v[w];S.indexOf(T)===-1&&!f.has(T)&&f.set(T,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((w,T)=>{if(S.indexOf(T)!==-1)return;const R=y.get(T);if(!R)return;const j=v.indexOf(T);let V=w;if(!V){const P=()=>{f.delete(T);const E=Array.from(y.keys()).filter(A=>!S.includes(A));if(E.forEach(A=>y.delete(A)),m.current=c.filter(A=>{const C=gs(A);return C===T||E.includes(C)}),!f.size){if(l.current===!1)return;a(),r&&r()}};V=b.createElement(Gd,{key:gs(R),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:i,mode:o},R),f.set(T,V)}h.splice(j,0,V)}),h=h.map(w=>{const T=w.key;return f.has(T)?w:b.createElement(Gd,{key:gs(w),isPresent:!0,presenceAffectsLayout:i,mode:o},w)}),b.createElement(b.Fragment,null,f.size?h:h.map(w=>b.cloneElement(w)))};var B_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},VV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},d1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new jV;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OV=function(t){const e=h1(t);return d1.encodeByteArray(e,!0)},vc=function(t){return OV(t).replace(/\./g,"")},f1=function(t){try{return d1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=()=>LV().__FIREBASE_DEFAULTS__,FV=()=>{if(typeof process>"u"||typeof B_>"u")return;const t=B_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&f1(t[1]);return e&&JSON.parse(e)},hh=()=>{try{return MV()||FV()||UV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p1=t=>{var e,n;return(n=(e=hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BV=t=>{const e=p1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},m1=()=>{var t;return(t=hh())===null||t===void 0?void 0:t.config},g1=t=>{var e;return(e=hh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vc(JSON.stringify(n)),vc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function WV(){var t;const e=(t=hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QV(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XV(){return!WV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YV(){try{return typeof indexedDB=="object"}catch{return!1}}function JV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZV,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ej(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function ej(t,e){return t.replace(tj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tj=/\{\$([^}]+)}/g;function nj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _c(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(z_(i)&&z_(o)){if(!_c(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function z_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rj(t,e){const n=new sj(t,e);return n.subscribe.bind(n)}class sj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ij(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qd),s.error===void 0&&(s.error=Qd),s.complete===void 0&&(s.complete=Qd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ij(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lj(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aj(t){return t===ys?void 0:t}function lj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const cj={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},hj=ae.INFO,dj={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},fj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=hj,this._logHandler=fj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const pj=(t,e)=>e.some(n=>t instanceof n);let $_,H_;function mj(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gj(){return H_||(H_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y1=new WeakMap,xp=new WeakMap,v1=new WeakMap,Xd=new WeakMap,Ig=new WeakMap;function yj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&y1.set(n,t)}).catch(()=>{}),Ig.set(e,t),e}function vj(t){if(xp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xp.set(t,e)}let Ep={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||v1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _j(t){Ep=t(Ep)}function wj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yd(this),e,...n);return v1.set(r,e.sort?e.sort():[e]),Br(r)}:gj().includes(t)?function(...e){return t.apply(Yd(this),e),Br(y1.get(this))}:function(...e){return Br(t.apply(Yd(this),e))}}function xj(t){return typeof t=="function"?wj(t):(t instanceof IDBTransaction&&vj(t),pj(t,mj())?new Proxy(t,Ep):t)}function Br(t){if(t instanceof IDBRequest)return yj(t);if(Xd.has(t))return Xd.get(t);const e=xj(t);return e!==t&&(Xd.set(t,e),Ig.set(e,t)),e}const Yd=t=>Ig.get(t);function Ej(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Br(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Br(o.result),l.oldVersion,l.newVersion,Br(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Tj=["get","getKey","getAll","getAllKeys","count"],Sj=["put","add","delete","clear"],Jd=new Map;function W_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Sj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Tj.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Jd.set(e,i),i}_j(t=>({...t,get:(e,n,r)=>W_(e,n)||t.get(e,n,r),has:(e,n)=>!!W_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",q_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Sg("@firebase/app"),Aj="@firebase/app-compat",Cj="@firebase/analytics-compat",Rj="@firebase/analytics",Nj="@firebase/app-check-compat",kj="@firebase/app-check",bj="@firebase/auth",Dj="@firebase/auth-compat",Vj="@firebase/database",jj="@firebase/data-connect",Oj="@firebase/database-compat",Lj="@firebase/functions",Mj="@firebase/functions-compat",Fj="@firebase/installations",Uj="@firebase/installations-compat",Bj="@firebase/messaging",zj="@firebase/messaging-compat",$j="@firebase/performance",Hj="@firebase/performance-compat",Wj="@firebase/remote-config",qj="@firebase/remote-config-compat",Kj="@firebase/storage",Gj="@firebase/storage-compat",Qj="@firebase/firestore",Xj="@firebase/vertexai-preview",Yj="@firebase/firestore-compat",Jj="firebase",Zj="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",eO={[Tp]:"fire-core",[Aj]:"fire-core-compat",[Rj]:"fire-analytics",[Cj]:"fire-analytics-compat",[kj]:"fire-app-check",[Nj]:"fire-app-check-compat",[bj]:"fire-auth",[Dj]:"fire-auth-compat",[Vj]:"fire-rtdb",[jj]:"fire-data-connect",[Oj]:"fire-rtdb-compat",[Lj]:"fire-fn",[Mj]:"fire-fn-compat",[Fj]:"fire-iid",[Uj]:"fire-iid-compat",[Bj]:"fire-fcm",[zj]:"fire-fcm-compat",[$j]:"fire-perf",[Hj]:"fire-perf-compat",[Wj]:"fire-rc",[qj]:"fire-rc-compat",[Kj]:"fire-gcs",[Gj]:"fire-gcs-compat",[Qj]:"fire-fst",[Yj]:"fire-fst-compat",[Xj]:"fire-vertex","fire-js":"fire-js",[Jj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Map,tO=new Map,Ip=new Map;function K_(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $i(t){const e=t.name;if(Ip.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of wc.values())K_(n,t);for(const n of tO.values())K_(n,t);return!0}function Pg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new al("app","Firebase",nO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=Zj;function _1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zr.create("bad-app-name",{appName:String(s)});if(n||(n=m1()),!n)throw zr.create("no-options");const i=wc.get(s);if(i){if(_c(n,i.options)&&_c(r,i.config))return i;throw zr.create("duplicate-app",{appName:s})}const o=new uj(s);for(const l of Ip.values())o.addComponent(l);const a=new rO(n,r,o);return wc.set(s,a),a}function w1(t=Sp){const e=wc.get(t);if(!e&&t===Sp&&m1())return _1();if(!e)throw zr.create("no-app",{appName:t});return e}function $r(t,e,n){var r;let s=(r=eO[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}$i(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="firebase-heartbeat-database",iO=1,Fa="firebase-heartbeat-store";let Zd=null;function x1(){return Zd||(Zd=Ej(sO,iO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),Zd}async function oO(t){try{const n=(await x1()).transaction(Fa),r=await n.objectStore(Fa).get(E1(t));return await n.done,r}catch(e){if(e instanceof cr)rr.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function G_(t,e){try{const r=(await x1()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,E1(t)),await r.done}catch(n){if(n instanceof cr)rr.warn(n.message);else{const r=zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function E1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=1024,lO=30*24*60*60*1e3;class uO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q_(),{heartbeatsToSend:r,unsentEntries:s}=cO(this._heartbeatsCache.heartbeats),i=vc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function Q_(){return new Date().toISOString().substring(0,10)}function cO(t,e=aO){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),X_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),X_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YV()?JV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return G_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return G_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function X_(t){return vc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){$i(new js("platform-logger",e=>new Ij(e),"PRIVATE")),$i(new js("heartbeat",e=>new uO(e),"PRIVATE")),$r(Tp,q_,t),$r(Tp,q_,"esm2017"),$r("fire-js","")}dO("");function Ag(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fO=T1,S1=new al("auth","Firebase",T1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Sg("@firebase/auth");function pO(t,...e){xc.logLevel<=ae.WARN&&xc.warn(`Auth (${io}): ${t}`,...e)}function Pu(t,...e){xc.logLevel<=ae.ERROR&&xc.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw Cg(t,...e)}function qt(t,...e){return Cg(t,...e)}function I1(t,e,n){const r=Object.assign(Object.assign({},fO()),{[e]:n});return new al("auth","Firebase",r).create(e,{appName:t.name})}function Hr(t){return I1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return S1.create(t,...e)}function K(t,e,...n){if(!t)throw Cg(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function ir(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function P1(){return Y_()==="http:"||Y_()==="https:"}function Y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P1()||KV()||"connection"in navigator)?navigator.onLine:!0}function gO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=HV()||GV()}get(){return mO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new ll(3e4,6e4);function hr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jn(t,e,n,r,s={}){return C1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=so(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return qV()||(c.referrerPolicy="no-referrer"),A1.fetch()(R1(t,t.config.apiHost,n,a),c)})}async function C1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yO),e);try{const s=new _O(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wo(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw I1(t,h,c);sr(t,h)}}catch(s){if(s instanceof cr)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function dh(t,e,n,r,s={}){const i=await jn(t,e,n,r,s);return"mfaPendingCredential"in i&&sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function R1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Rg(t.config,s):`${t.config.apiScheme}://${s}`}class _O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qt(this.auth,"network-request-failed")),vO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return t!==void 0&&t.getResponse!==void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t){return(await jn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e){return jn(t,"POST","/v1/accounts:delete",e)}async function N1(t,e){return jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EO(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=Ng(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ua(ef(s.auth_time)),issuedAtTime:ua(ef(s.iat)),expirationTime:ua(ef(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ef(t){return Number(t)*1e3}function Ng(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=f1(n);return s?JSON.parse(s):(Pu("Failed to decode base64 JWT payload"),null)}catch(s){return Pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Z_(t){const e=Ng(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&TO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ua(this.lastLoginAt),this.creationTime=ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ua(t,N1(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?k1(i.providerUserInfo):[],a=PO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ap(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function IO(t){const e=Ye(t);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PO(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function k1(t){return t.map(e=>{var{providerId:n}=e,r=Ag(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e){const n=await C1(t,{},async()=>{const r=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=R1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",A1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CO(t,e){return jn(t,"POST","/v2/accounts:revokeToken",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Z_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await AO(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ni;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ap(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EO(this,e)}reload(){return IO(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await Ua(this,xO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:P}=n;K(T&&P,e,"internal-error");const E=Ni.fromJSON(this.name,P);K(typeof T=="string",e,"internal-error"),gr(f,e.name),gr(m,e.name),K(typeof R=="boolean",e,"internal-error"),K(typeof j=="boolean",e,"internal-error"),gr(y,e.name),gr(_,e.name),gr(v,e.name),gr(S,e.name),gr(x,e.name),gr(w,e.name);const A=new qn({uid:T,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:j,photoURL:_,phoneNumber:y,tenantId:v,stsTokenManager:E,createdAt:x,lastLoginAt:w});return V&&Array.isArray(V)&&(A.providerData=V.map(C=>Object.assign({},C))),S&&(A._redirectEventId=S),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ni;s.updateFromServerResponse(n);const i=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ec(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?k1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ni;a.updateFromIdToken(r);const l=new qn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;function Kn(t){ir(t instanceof Function,"Expected a class definition");let e=ew.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ew.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b1.type="NONE";const tw=b1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class ki{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,i),this.fullPersistenceKey=Au("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ki(Kn(tw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Kn(tw);const o=Au(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=qn._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ki(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ki(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M1(e))return"Blackberry";if(F1(e))return"Webos";if(V1(e))return"Safari";if((e.includes("chrome/")||j1(e))&&!e.includes("edge/"))return"Chrome";if(L1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function D1(t=wt()){return/firefox\//i.test(t)}function V1(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j1(t=wt()){return/crios\//i.test(t)}function O1(t=wt()){return/iemobile/i.test(t)}function L1(t=wt()){return/android/i.test(t)}function M1(t=wt()){return/blackberry/i.test(t)}function F1(t=wt()){return/webos/i.test(t)}function kg(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RO(t=wt()){var e;return kg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NO(){return QV()&&document.documentMode===10}function U1(t=wt()){return kg(t)||L1(t)||F1(t)||M1(t)||/windows phone/i.test(t)||O1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e=[]){let n;switch(t){case"Browser":n=nw(wt());break;case"Worker":n=`${nw(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e={}){return jn(t,"GET","/v2/passwordPolicy",hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=6;class VO{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:DO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rw(this),this.idTokenSubscription=new rw(this),this.beforeStateQueue=new kO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ki.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await N1(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Hr(this));const n=e?Ye(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bO(this),n=new VO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await ki.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oo(t){return Ye(t)}class rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=rj(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OO(t){fh=t}function z1(t){return fh.loadJS(t)}function LO(){return fh.recaptchaV2Script}function MO(){return fh.gapiScript}function $1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e){const n=Pg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_c(i,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function UO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BO(t,e,n){const r=oo(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=H1(e),{host:o,port:a}=zO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),$O()}function H1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zO(t){const e=H1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:sw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:sw(o)}}}function sw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $O(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t,e){return dh(t,"POST","/v1/accounts:signInWithIdp",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="http://localhost";class Os extends bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ag(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bi(e,n)}buildRequest(){const e={requestUri:HO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=so(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(t,e){return jn(t,"POST","/v1/accounts:sendVerificationCode",hr(t,e))}async function qO(t,e){return dh(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,e))}async function KO(t,e){const n=await dh(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,e));if(n.temporaryProof)throw Wo(t,"account-exists-with-different-credential",n);return n}const GO={USER_NOT_FOUND:"user-not-found"};async function QO(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return dh(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,n),GO)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends bg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ca({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ca({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return qO(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return KO(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return QO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new ca({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends W1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends ul{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Os._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends ul{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends ul{constructor(){super("twitter.com")}static credential(e,n){return Os._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qn._fromIdTokenResponse(e,r,s),o=iw(r);return new Hi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=iw(r);return new Hi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function iw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Tc(e,n,r,s)}}function q1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(t,i,e,r):i})}async function XO(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Hr(r));const s="reauthenticate";try{const i=await Ua(t,q1(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Ng(i.idToken);K(o,r,"internal-error");const{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),Hi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(t,e,n=!1){if(Hn(t.app))return Promise.reject(Hr(t));const r="signIn",s=await q1(t,r,e),i=await Hi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function JO(t,e){return K1(oo(t),e)}function ZO(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function eL(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function tL(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function nL(t){return Ye(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e){return jn(t,"POST","/v2/accounts/mfaEnrollment:start",hr(t,e))}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=1e3,iL=10;class Q1 extends G1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=U1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);NO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q1.type="LOCAL";const oL=Q1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1 extends G1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}X1.type="SESSION";const Y1=X1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ph(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await aL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Dg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return window}function uL(t){ze().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){return typeof ze().WorkerGlobalScope<"u"&&typeof ze().importScripts=="function"}async function cL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dL(){return Vg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebaseLocalStorageDb",fL=1,Ic="firebaseLocalStorage",Z1="fbase_key";class cl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mh(t,e){return t.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function pL(){const t=indexedDB.deleteDatabase(J1);return new cl(t).toPromise()}function Cp(){const t=indexedDB.open(J1,fL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ic,{keyPath:Z1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ic)?e(r):(r.close(),await pL(),e(await Cp()))})})}async function ow(t,e,n){const r=mh(t,!0).put({[Z1]:e,value:n});return new cl(r).toPromise()}async function mL(t,e){const n=mh(t,!1).get(e),r=await new cl(n).toPromise();return r===void 0?null:r.value}function aw(t,e){const n=mh(t,!0).delete(e);return new cl(n).toPromise()}const gL=800,yL=3;class eI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(dL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cL(),!this.activeServiceWorker)return;this.sender=new lL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await ow(e,Sc,"1"),await aw(e,Sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ow(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=mh(s,!1).getAll();return new cl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eI.type="LOCAL";const vL=eI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e){return jn(t,"POST","/v2/accounts/mfaSignIn:start",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=500,xL=6e4,ou=1e12;class EL{constructor(e){this.auth=e,this.counter=ou,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new TL(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||ou;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||ou;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||ou;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class TL{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;K(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=SL(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},xL)},wL))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function SL(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=$1("rcb"),IL=new ll(3e4,6e4);class PL{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ze().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return K(AL(n),e,"argument-error"),this.shouldResolveImmediately(n)&&J_(ze().grecaptcha)?Promise.resolve(ze().grecaptcha):new Promise((r,s)=>{const i=ze().setTimeout(()=>{s(qt(e,"network-request-failed"))},IL.get());ze()[tf]=()=>{ze().clearTimeout(i),delete ze()[tf];const a=ze().grecaptcha;if(!a||!J_(a)){s(qt(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const f=l(c,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${LO()}?${so({onload:tf,render:"explicit",hl:n})}`;z1(o).catch(()=>{clearTimeout(i),s(qt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ze().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function AL(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class CL{async load(e){return new EL(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="recaptcha",RL={theme:"light",type:"image"};class NL{constructor(e,n,r=Object.assign({},RL)){this.parameters=r,this.type=tI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=oo(e),this.isInvisible=this.parameters.size==="invisible",K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;K(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new CL:new PL,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ze()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){K(P1()&&!Vg(),this.auth,"internal-error"),await kL(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await wO(this.auth);K(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function kL(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ca._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function DL(t,e,n){if(Hn(t.app))return Promise.reject(Hr(t));const r=oo(t),s=await VL(r,e,Ye(n));return new bL(s,i=>JO(r,i))}async function VL(t,e,n){var r;const s=await n.verify();try{K(typeof s=="string",t,"argument-error"),K(n.type===tI,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return K(o.type==="enroll",t,"internal-error"),(await rL(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{K(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return K(a,t,"missing-multi-factor-info"),(await _L(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await WO(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e){return e?Kn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OL(t){return K1(t.auth,new jg(t),t.bypassAuthState)}function LL(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),YO(n,new jg(t),t.bypassAuthState)}async function ML(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),XO(n,new jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OL;case"linkViaPopup":case"linkViaRedirect":return ML;case"reauthViaPopup":case"reauthViaRedirect":return LL;default:sr(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new ll(2e3,1e4);class Ei extends nI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FL.get())};e()}}Ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="pendingRedirect",Cu=new Map;class BL extends nI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await zL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zL(t,e){const n=WL(e),r=HL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $L(t,e){Cu.set(t._key(),e)}function HL(t){return Kn(t._redirectPersistence)}function WL(t){return Au(UL,t.config.apiKey,t.name)}async function qL(t,e,n=!1){if(Hn(t.app))return Promise.reject(Hr(t));const r=oo(t),s=jL(r,e),o=await new BL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=10*60*1e3;class GL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KL&&this.cachedEventUids.clear(),this.cachedEventUids.has(lw(e))}saveEventToCache(e){this.cachedEventUids.add(lw(e)),this.lastProcessedEventTime=Date.now()}}function lw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e={}){return jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JL=/^https?/;async function ZL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XL(t);for(const n of e)try{if(eM(n))return}catch{}sr(t,"unauthorized-domain")}function eM(t){const e=Pp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JL.test(n))return!1;if(YL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new ll(3e4,6e4);function uw(){const t=ze().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nM(t){return new Promise((e,n)=>{var r,s,i;function o(){uw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uw(),n(qt(t,"network-request-failed"))},timeout:tM.get()})}if(!((s=(r=ze().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ze().gapi)===null||i===void 0)&&i.load)o();else{const a=$1("iframefcb");return ze()[a]=()=>{gapi.load?o():n(qt(t,"network-request-failed"))},z1(`${MO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function rM(t){return Ru=Ru||nM(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new ll(5e3,15e3),iM="__/auth/iframe",oM="emulator/auth/iframe",aM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uM(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rg(e,oM):`https://${t.config.authDomain}/${iM}`,r={apiKey:e.apiKey,appName:t.name,v:io},s=lM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${so(r).slice(1)}`}async function cM(t){const e=await rM(t),n=ze().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:uM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qt(t,"network-request-failed"),a=ze().setTimeout(()=>{i(o)},sM.get());function l(){ze().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dM=500,fM=600,pM="_blank",mM="http://localhost";class cw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gM(t,e,n,r=dM,s=fM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=wt().toLowerCase();n&&(a=j1(c)?pM:n),D1(c)&&(e=e||mM,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,_])=>`${m}${y}=${_},`,"");if(RO(c)&&a!=="_self")return yM(e||"",a),new cw(null);const f=window.open(e||"",a,h);K(f,t,"popup-blocked");try{f.focus()}catch{}return new cw(f)}function yM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="__/auth/handler",_M="emulator/auth/handler",wM=encodeURIComponent("fac");async function hw(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:io,eventId:s};if(e instanceof W1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ul){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${wM}=${encodeURIComponent(l)}`:"";return`${xM(t)}?${so(a).slice(1)}${c}`}function xM({config:t}){return t.emulator?Rg(t,_M):`https://${t.authDomain}/${vM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class EM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=qL,this._overrideRedirectResult=$L}async _openPopup(e,n,r,s){var i;ir((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await hw(e,n,r,Pp(),s);return gM(e,o,Dg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await hw(e,n,r,Pp(),s);return uL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ir(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cM(e),r=new GL(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[nf];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return U1()||V1()||kg()}}const TM=EM;var dw="@firebase/auth",fw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PM(t){$i(new js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B1(t)},c=new jO(r,s,i,l);return UO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$i(new js("auth-internal",e=>{const n=oo(e.getProvider("auth").getImmediate());return(r=>new SM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(dw,fw,IM(t)),$r(dw,fw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=5*60,CM=g1("authIdTokenMaxAge")||AM;let pw=null;const RM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CM)return;const s=n==null?void 0:n.token;pw!==s&&(pw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NM(t=w1()){const e=Pg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FO(t,{popupRedirectResolver:TM,persistence:[vL,oL,Y1]}),r=g1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=RM(i.toString());eL(n,o,()=>o(n.currentUser)),ZO(n,a=>o(a))}}const s=p1("auth");return s&&BO(n,`http://${s}`),n}function kM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",kM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PM("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bM(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function DM(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ti=function(){return Ti=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ti.apply(this,arguments)},sI=function(t){return{loading:t==null,value:t}},VM=function(){return function(t,e){switch(e.type){case"error":return Ti(Ti({},t),{error:e.error,loading:!1,value:void 0});case"reset":return sI(e.defaultValue);case"value":return Ti(Ti({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},jM=function(t){var e=t?t():void 0,n=b.useReducer(VM(),sI(e)),r=n[0],s=n[1],i=b.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=b.useCallback(function(l){s({type:"error",error:l})},[]),a=b.useCallback(function(l){s({type:"value",value:l})},[]);return b.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Ks=function(t,e){var n=jM(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return b.useEffect(function(){var l=tL(t,function(c){return bM(void 0,void 0,void 0,function(){var h;return DM(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),i(h),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var As,iI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,E){function A(){}A.prototype=E.prototype,P.D=E.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(C,k,D){for(var N=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)N[ee-2]=arguments[ee];return E.prototype[k].apply(C,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,E,A){A||(A=0);var C=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)C[k]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(k=0;16>k;++k)C[k]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=P.g[0],A=P.g[1],k=P.g[2];var D=P.g[3],N=E+(D^A&(k^D))+C[0]+3614090360&4294967295;E=A+(N<<7&4294967295|N>>>25),N=D+(k^E&(A^k))+C[1]+3905402710&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(A^D&(E^A))+C[2]+606105819&4294967295,k=D+(N<<17&4294967295|N>>>15),N=A+(E^k&(D^E))+C[3]+3250441966&4294967295,A=k+(N<<22&4294967295|N>>>10),N=E+(D^A&(k^D))+C[4]+4118548399&4294967295,E=A+(N<<7&4294967295|N>>>25),N=D+(k^E&(A^k))+C[5]+1200080426&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(A^D&(E^A))+C[6]+2821735955&4294967295,k=D+(N<<17&4294967295|N>>>15),N=A+(E^k&(D^E))+C[7]+4249261313&4294967295,A=k+(N<<22&4294967295|N>>>10),N=E+(D^A&(k^D))+C[8]+1770035416&4294967295,E=A+(N<<7&4294967295|N>>>25),N=D+(k^E&(A^k))+C[9]+2336552879&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(A^D&(E^A))+C[10]+4294925233&4294967295,k=D+(N<<17&4294967295|N>>>15),N=A+(E^k&(D^E))+C[11]+2304563134&4294967295,A=k+(N<<22&4294967295|N>>>10),N=E+(D^A&(k^D))+C[12]+1804603682&4294967295,E=A+(N<<7&4294967295|N>>>25),N=D+(k^E&(A^k))+C[13]+4254626195&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(A^D&(E^A))+C[14]+2792965006&4294967295,k=D+(N<<17&4294967295|N>>>15),N=A+(E^k&(D^E))+C[15]+1236535329&4294967295,A=k+(N<<22&4294967295|N>>>10),N=E+(k^D&(A^k))+C[1]+4129170786&4294967295,E=A+(N<<5&4294967295|N>>>27),N=D+(A^k&(E^A))+C[6]+3225465664&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^A&(D^E))+C[11]+643717713&4294967295,k=D+(N<<14&4294967295|N>>>18),N=A+(D^E&(k^D))+C[0]+3921069994&4294967295,A=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(A^k))+C[5]+3593408605&4294967295,E=A+(N<<5&4294967295|N>>>27),N=D+(A^k&(E^A))+C[10]+38016083&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^A&(D^E))+C[15]+3634488961&4294967295,k=D+(N<<14&4294967295|N>>>18),N=A+(D^E&(k^D))+C[4]+3889429448&4294967295,A=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(A^k))+C[9]+568446438&4294967295,E=A+(N<<5&4294967295|N>>>27),N=D+(A^k&(E^A))+C[14]+3275163606&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^A&(D^E))+C[3]+4107603335&4294967295,k=D+(N<<14&4294967295|N>>>18),N=A+(D^E&(k^D))+C[8]+1163531501&4294967295,A=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(A^k))+C[13]+2850285829&4294967295,E=A+(N<<5&4294967295|N>>>27),N=D+(A^k&(E^A))+C[2]+4243563512&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^A&(D^E))+C[7]+1735328473&4294967295,k=D+(N<<14&4294967295|N>>>18),N=A+(D^E&(k^D))+C[12]+2368359562&4294967295,A=k+(N<<20&4294967295|N>>>12),N=E+(A^k^D)+C[5]+4294588738&4294967295,E=A+(N<<4&4294967295|N>>>28),N=D+(E^A^k)+C[8]+2272392833&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^A)+C[11]+1839030562&4294967295,k=D+(N<<16&4294967295|N>>>16),N=A+(k^D^E)+C[14]+4259657740&4294967295,A=k+(N<<23&4294967295|N>>>9),N=E+(A^k^D)+C[1]+2763975236&4294967295,E=A+(N<<4&4294967295|N>>>28),N=D+(E^A^k)+C[4]+1272893353&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^A)+C[7]+4139469664&4294967295,k=D+(N<<16&4294967295|N>>>16),N=A+(k^D^E)+C[10]+3200236656&4294967295,A=k+(N<<23&4294967295|N>>>9),N=E+(A^k^D)+C[13]+681279174&4294967295,E=A+(N<<4&4294967295|N>>>28),N=D+(E^A^k)+C[0]+3936430074&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^A)+C[3]+3572445317&4294967295,k=D+(N<<16&4294967295|N>>>16),N=A+(k^D^E)+C[6]+76029189&4294967295,A=k+(N<<23&4294967295|N>>>9),N=E+(A^k^D)+C[9]+3654602809&4294967295,E=A+(N<<4&4294967295|N>>>28),N=D+(E^A^k)+C[12]+3873151461&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^A)+C[15]+530742520&4294967295,k=D+(N<<16&4294967295|N>>>16),N=A+(k^D^E)+C[2]+3299628645&4294967295,A=k+(N<<23&4294967295|N>>>9),N=E+(k^(A|~D))+C[0]+4096336452&4294967295,E=A+(N<<6&4294967295|N>>>26),N=D+(A^(E|~k))+C[7]+1126891415&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~A))+C[14]+2878612391&4294967295,k=D+(N<<15&4294967295|N>>>17),N=A+(D^(k|~E))+C[5]+4237533241&4294967295,A=k+(N<<21&4294967295|N>>>11),N=E+(k^(A|~D))+C[12]+1700485571&4294967295,E=A+(N<<6&4294967295|N>>>26),N=D+(A^(E|~k))+C[3]+2399980690&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~A))+C[10]+4293915773&4294967295,k=D+(N<<15&4294967295|N>>>17),N=A+(D^(k|~E))+C[1]+2240044497&4294967295,A=k+(N<<21&4294967295|N>>>11),N=E+(k^(A|~D))+C[8]+1873313359&4294967295,E=A+(N<<6&4294967295|N>>>26),N=D+(A^(E|~k))+C[15]+4264355552&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~A))+C[6]+2734768916&4294967295,k=D+(N<<15&4294967295|N>>>17),N=A+(D^(k|~E))+C[13]+1309151649&4294967295,A=k+(N<<21&4294967295|N>>>11),N=E+(k^(A|~D))+C[4]+4149444226&4294967295,E=A+(N<<6&4294967295|N>>>26),N=D+(A^(E|~k))+C[11]+3174756917&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~A))+C[2]+718787259&4294967295,k=D+(N<<15&4294967295|N>>>17),N=A+(D^(k|~E))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+E&4294967295,P.g[1]=P.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+D&4294967295}r.prototype.u=function(P,E){E===void 0&&(E=P.length);for(var A=E-this.blockSize,C=this.B,k=this.h,D=0;D<E;){if(k==0)for(;D<=A;)s(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<E;)if(C[k++]=P.charCodeAt(D++),k==this.blockSize){s(this,C),k=0;break}}else for(;D<E;)if(C[k++]=P[D++],k==this.blockSize){s(this,C),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var E=1;E<P.length-8;++E)P[E]=0;var A=8*this.o;for(E=P.length-8;E<P.length;++E)P[E]=A&255,A/=256;for(this.u(P),P=Array(16),E=A=0;4>E;++E)for(var C=0;32>C;C+=8)P[A++]=this.g[E]>>>C&255;return P};function i(P,E){var A=a;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=E(P)}function o(P,E){this.h=E;for(var A=[],C=!0,k=P.length-1;0<=k;k--){var D=P[k]|0;C&&D==E||(A[k]=D,C=!1)}this.g=A}var a={};function l(P){return-128<=P&&128>P?i(P,function(E){return new o([E|0],0>E?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return S(c(-P));for(var E=[],A=1,C=0;P>=A;C++)E[C]=P/A|0,A*=4294967296;return new o(E,0)}function h(P,E){if(P.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P.charAt(0)=="-")return S(h(P.substring(1),E));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(E,8)),C=f,k=0;k<P.length;k+=8){var D=Math.min(8,P.length-k),N=parseInt(P.substring(k,k+D),E);8>D?(D=c(Math.pow(E,D)),C=C.j(D).add(c(N))):(C=C.j(A),C=C.add(c(N)))}return C}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var P=0,E=1,A=0;A<this.g.length;A++){var C=this.i(A);P+=(0<=C?C:4294967296+C)*E,E*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(v(this))return"-"+S(this).toString(P);for(var E=c(Math.pow(P,6)),A=this,C="";;){var k=R(A,E).g;A=x(A,k.j(E));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=k,_(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(var E=0;E<P.g.length;E++)if(P.g[E]!=0)return!1;return!0}function v(P){return P.h==-1}t.l=function(P){return P=x(this,P),v(P)?-1:_(P)?0:1};function S(P){for(var E=P.g.length,A=[],C=0;C<E;C++)A[C]=~P.g[C];return new o(A,~P.h).add(m)}t.abs=function(){return v(this)?S(this):this},t.add=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0,k=0;k<=E;k++){var D=C+(this.i(k)&65535)+(P.i(k)&65535),N=(D>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);C=N>>>16,D&=65535,N&=65535,A[k]=N<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function x(P,E){return P.add(S(E))}t.j=function(P){if(_(this)||_(P))return f;if(v(this))return v(P)?S(this).j(S(P)):S(S(this).j(P));if(v(P))return S(this.j(S(P)));if(0>this.l(y)&&0>P.l(y))return c(this.m()*P.m());for(var E=this.g.length+P.g.length,A=[],C=0;C<2*E;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<P.g.length;k++){var D=this.i(C)>>>16,N=this.i(C)&65535,ee=P.i(k)>>>16,Je=P.i(k)&65535;A[2*C+2*k]+=N*Je,w(A,2*C+2*k),A[2*C+2*k+1]+=D*Je,w(A,2*C+2*k+1),A[2*C+2*k+1]+=N*ee,w(A,2*C+2*k+1),A[2*C+2*k+2]+=D*ee,w(A,2*C+2*k+2)}for(C=0;C<E;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=E;C<2*E;C++)A[C]=0;return new o(A,0)};function w(P,E){for(;(P[E]&65535)!=P[E];)P[E+1]+=P[E]>>>16,P[E]&=65535,E++}function T(P,E){this.g=P,this.h=E}function R(P,E){if(_(E))throw Error("division by zero");if(_(P))return new T(f,f);if(v(P))return E=R(S(P),E),new T(S(E.g),S(E.h));if(v(E))return E=R(P,S(E)),new T(S(E.g),E.h);if(30<P.g.length){if(v(P)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var A=m,C=E;0>=C.l(P);)A=j(A),C=j(C);var k=V(A,1),D=V(C,1);for(C=V(C,2),A=V(A,2);!_(C);){var N=D.add(C);0>=N.l(P)&&(k=k.add(A),D=N),C=V(C,1),A=V(A,1)}return E=x(P,k.j(E)),new T(k,E)}for(k=f;0<=P.l(E);){for(A=Math.max(1,Math.floor(P.m()/E.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=c(A),N=D.j(E);v(N)||0<N.l(P);)A-=C,D=c(A),N=D.j(E);_(D)&&(D=m),k=k.add(D),P=x(P,N)}return new T(k,P)}t.A=function(P){return R(this,P).h},t.and=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)&P.i(C);return new o(A,this.h&P.h)},t.or=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)|P.i(C);return new o(A,this.h|P.h)},t.xor=function(P){for(var E=Math.max(this.g.length,P.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)^P.i(C);return new o(A,this.h^P.h)};function j(P){for(var E=P.g.length+1,A=[],C=0;C<E;C++)A[C]=P.i(C)<<1|P.i(C-1)>>>31;return new o(A,P.h)}function V(P,E){var A=E>>5;E%=32;for(var C=P.g.length-A,k=[],D=0;D<C;D++)k[D]=0<E?P.i(D+A)>>>E|P.i(D+A+1)<<32-E:P.i(D+A);return new o(k,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,As=o}).apply(typeof mw<"u"?mw:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,qo,aI,Nu,Rp,lI,uI,cI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var O=u[I];if(!(O in g))break e;g=g[O]}u=u[u.length-1],I=g[u],p=p(I),p!=I&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,I=!1,O={next:function(){if(!I&&g<u.length){var M=g++;return{value:p(M,u[M]),done:!1}}return I=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,I),u.apply(p,O)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function _(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(I,O,M){for(var $=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)$[ye-2]=arguments[ye];return p.prototype[O].apply(I,$)}}function v(u){const p=u.length;if(0<p){const g=Array(p);for(let I=0;I<p;I++)g[I]=u[I];return g}return[]}function S(u,p){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(l(I)){const O=u.length||0,M=I.length||0;u.length=O+M;for(let $=0;$<M;$++)u[O+$]=I[$]}else u.push(I)}}class x{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var j=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(u,p,g){for(const I in u)p.call(g,u[I],I,u)}function P(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function E(u){const p={};for(const g in u)p[g]=u[g];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let g,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(g in I)u[g]=I[g];for(let M=0;M<A.length;M++)g=A[M],Object.prototype.hasOwnProperty.call(I,g)&&(u[g]=I[g])}}function k(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function N(){var u=Q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,g){const I=Je.get();I.set(p,g),this.h?this.h.next=I:this.g=I,this.h=I}}var Je=new x(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,z=!1,Q=new ee,J=()=>{const u=a.Promise.resolve(void 0);Ve=()=>{u.then(G)}};var G=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(g){D(g)}var p=Je;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}z=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function xt(u,p){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(j){e:{try{R(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xt.aa.h.call(this)}}_(xt,ge);var Et={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),Uh=0;function po(u,p,g,I,O){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!I,this.ha=O,this.key=++Uh,this.da=this.fa=!1}function On(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Zt(u){this.src=u,this.g={},this.h=0}Zt.prototype.add=function(u,p,g,I,O){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var $=Bh(u,p,I,O);return-1<$?(p=u[$],g||(p.fa=!1)):(p=new po(p,this.src,M,!!I,O),p.fa=g,u.push(p)),p};function El(u,p){var g=p.type;if(g in u.g){var I=u.g[g],O=Array.prototype.indexOf.call(I,p,void 0),M;(M=0<=O)&&Array.prototype.splice.call(I,O,1),M&&(On(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Bh(u,p,g,I){for(var O=0;O<u.length;++O){var M=u[O];if(!M.da&&M.listener==p&&M.capture==!!g&&M.ha==I)return O}return-1}var zh="closure_lm_"+(1e6*Math.random()|0),$h={};function xy(u,p,g,I,O){if(Array.isArray(p)){for(var M=0;M<p.length;M++)xy(u,p[M],g,I,O);return null}return g=Sy(g),u&&u[Jt]?u.K(p,g,c(I)?!!I.capture:!1,O):uA(u,p,g,!1,I,O)}function uA(u,p,g,I,O,M){if(!p)throw Error("Invalid event type");var $=c(O)?!!O.capture:!!O,ye=Wh(u);if(ye||(u[zh]=ye=new Zt(u)),g=ye.add(p,g,I,$,M),g.proxy)return g;if(I=cA(),g.proxy=I,I.src=u,I.listener=g,u.addEventListener)Ze||(O=$),O===void 0&&(O=!1),u.addEventListener(p.toString(),I,O);else if(u.attachEvent)u.attachEvent(Ty(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function cA(){function u(g){return p.call(u.src,u.listener,g)}const p=hA;return u}function Ey(u,p,g,I,O){if(Array.isArray(p))for(var M=0;M<p.length;M++)Ey(u,p[M],g,I,O);else I=c(I)?!!I.capture:!!I,g=Sy(g),u&&u[Jt]?(u=u.i,p=String(p).toString(),p in u.g&&(M=u.g[p],g=Bh(M,g,I,O),-1<g&&(On(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete u.g[p],u.h--)))):u&&(u=Wh(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Bh(p,g,I,O)),(g=-1<u?p[u]:null)&&Hh(g))}function Hh(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Jt])El(p.i,u);else{var g=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(g,I,u.capture):p.detachEvent?p.detachEvent(Ty(g),I):p.addListener&&p.removeListener&&p.removeListener(I),(g=Wh(p))?(El(g,u),g.h==0&&(g.src=null,p[zh]=null)):On(u)}}}function Ty(u){return u in $h?$h[u]:$h[u]="on"+u}function hA(u,p){if(u.da)u=!0;else{p=new xt(p,this);var g=u.listener,I=u.ha||u.src;u.fa&&Hh(u),u=g.call(I,p)}return u}function Wh(u){return u=u[zh],u instanceof Zt?u:null}var qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sy(u){return typeof u=="function"?u:(u[qh]||(u[qh]=function(p){return u.handleEvent(p)}),u[qh])}function lt(){se.call(this),this.i=new Zt(this),this.M=this,this.F=null}_(lt,se),lt.prototype[Jt]=!0,lt.prototype.removeEventListener=function(u,p,g,I){Ey(this,u,p,g,I)};function Tt(u,p){var g,I=u.F;if(I)for(g=[];I;I=I.F)g.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new ge(p,u);else if(p instanceof ge)p.target=p.target||u;else{var O=p;p=new ge(I,u),C(p,O)}if(O=!0,g)for(var M=g.length-1;0<=M;M--){var $=p.g=g[M];O=Tl($,I,!0,p)&&O}if($=p.g=u,O=Tl($,I,!0,p)&&O,O=Tl($,I,!1,p)&&O,g)for(M=0;M<g.length;M++)$=p.g=g[M],O=Tl($,I,!1,p)&&O}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],I=0;I<g.length;I++)On(g[I]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,g,I){return this.i.add(String(u),p,!1,g,I)},lt.prototype.L=function(u,p,g,I){return this.i.add(String(u),p,!0,g,I)};function Tl(u,p,g,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,M=0;M<p.length;++M){var $=p[M];if($&&!$.da&&$.capture==g){var ye=$.listener,et=$.ha||$.src;$.fa&&El(u.i,$),O=ye.call(et,I)!==!1&&O}}return O&&!I.defaultPrevented}function Iy(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Py(u){u.g=Iy(()=>{u.g=null,u.i&&(u.i=!1,Py(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class dA extends se{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Py(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(u){se.call(this),this.h=u,this.g={}}_(mo,se);var Ay=[];function Cy(u){V(u.g,function(p,g){this.g.hasOwnProperty(g)&&Hh(p)},u),u.g={}}mo.prototype.N=function(){mo.aa.N.call(this),Cy(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kh=a.JSON.stringify,fA=a.JSON.parse,pA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gh(){}Gh.prototype.h=null;function Ry(u){return u.h||(u.h=u.i())}function Ny(){}var go={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qh(){ge.call(this,"d")}_(Qh,ge);function Xh(){ge.call(this,"c")}_(Xh,ge);var as={},ky=null;function Sl(){return ky=ky||new lt}as.La="serverreachability";function by(u){ge.call(this,as.La,u)}_(by,ge);function yo(u){const p=Sl();Tt(p,new by(p))}as.STAT_EVENT="statevent";function Dy(u,p){ge.call(this,as.STAT_EVENT,u),this.stat=p}_(Dy,ge);function St(u){const p=Sl();Tt(p,new Dy(p,u))}as.Ma="timingevent";function Vy(u,p){ge.call(this,as.Ma,u),this.size=p}_(Vy,ge);function vo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function _o(){this.g=!0}_o.prototype.xa=function(){this.g=!1};function mA(u,p,g,I,O,M){u.info(function(){if(u.g)if(M)for(var $="",ye=M.split("&"),et=0;et<ye.length;et++){var de=ye[et].split("=");if(1<de.length){var ut=de[0];de=de[1];var ct=ut.split("_");$=2<=ct.length&&ct[1]=="type"?$+(ut+"="+de+"&"):$+(ut+"=redacted&")}}else $=null;else $=M;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+p+`
`+g+`
`+$})}function gA(u,p,g,I,O,M,$){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+p+`
`+g+`
`+M+" "+$})}function Js(u,p,g,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+vA(u,g)+(I?" "+I:"")})}function yA(u,p){u.info(function(){return"TIMEOUT: "+p})}_o.prototype.info=function(){};function vA(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var I=g[u];if(!(2>I.length)){var O=I[1];if(Array.isArray(O)&&!(1>O.length)){var M=O[0];if(M!="noop"&&M!="stop"&&M!="close")for(var $=1;$<O.length;$++)O[$]=""}}}}return Kh(g)}catch{return p}}var Il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yh;function Pl(){}_(Pl,Gh),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Yh=new Pl;function dr(u,p,g,I){this.j=u,this.i=p,this.l=g,this.R=I||1,this.U=new mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oy}function Oy(){this.i=null,this.g="",this.h=!1}var Ly={},Jh={};function Zh(u,p,g){u.L=1,u.v=Nl(Ln(p)),u.m=g,u.P=!0,My(u,null)}function My(u,p){u.F=Date.now(),Al(u),u.A=Ln(u.v);var g=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Jy(g.i,"t",I),u.C=0,g=u.j.J,u.h=new Oy,u.g=gv(u.j,g?p:null,!u.m),0<u.O&&(u.M=new dA(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,I=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ay[0]=O.toString()),O=Ay);for(var M=0;M<O.length;M++){var $=xy(g,O[M],I||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),yo(),mA(u.i,u.u,u.A,u.l,u.R,u.m)}dr.prototype.ca=function(u){u=u.target;const p=this.M;p&&Mn(u)==3?p.j():this.Y(u)},dr.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Mn(this.g);var p=this.g.Ba();const ti=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||iv(this.g)))){this.J||ct!=4||p==7||(p==8||0>=ti?yo(3):yo(2)),ed(this);var g=this.g.Z();this.X=g;t:if(Fy(this)){var I=iv(this.g);u="";var O=I.length,M=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),wo(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(M&&p==O-1)});I.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,gA(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,et=this.g;if((ye=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ye)){var de=ye;break t}}de=null}if(g=de)Js(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,td(this,g);else{this.o=!1,this.s=3,St(12),ls(this),wo(this);break e}}if(this.P){g=!0;let dn;for(;!this.J&&this.C<$.length;)if(dn=_A(this,$),dn==Jh){ct==4&&(this.s=4,St(14),g=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Ly){this.s=4,St(15),Js(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else Js(this.i,this.l,dn,null),td(this,dn);if(Fy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||$.length!=0||this.h.h||(this.s=1,St(16),g=!1),this.o=this.o&&g,!g)Js(this.i,this.l,$,"[Invalid Chunked Response]"),ls(this),wo(this);else if(0<$.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),ad(ut),ut.M=!0,St(11))}}else Js(this.i,this.l,$,null),td(this,$);ct==4&&ls(this),this.o&&!this.J&&(ct==4?dv(this.j,this):(this.o=!1,Al(this)))}else OA(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),ls(this),wo(this)}}}catch{}finally{}};function Fy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _A(u,p){var g=u.C,I=p.indexOf(`
`,g);return I==-1?Jh:(g=Number(p.substring(g,I)),isNaN(g)?Ly:(I+=1,I+g>p.length?Jh:(p=p.slice(I,I+g),u.C=I+g,p)))}dr.prototype.cancel=function(){this.J=!0,ls(this)};function Al(u){u.S=Date.now()+u.I,Uy(u,u.I)}function Uy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vo(m(u.ba,u),p)}function ed(u){u.B&&(a.clearTimeout(u.B),u.B=null)}dr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yA(this.i,this.A),this.L!=2&&(yo(),St(17)),ls(this),this.s=2,wo(this)):Uy(this,this.S-u)};function wo(u){u.j.G==0||u.J||dv(u.j,u)}function ls(u){ed(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Cy(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function td(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||nd(g.h,u))){if(!u.K&&nd(g.h,u)&&g.G==3){try{var I=g.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Ol(g),Vl(g);else break e;od(g),St(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=vo(m(g.Za,g),6e3));if(1>=$y(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else cs(g,11)}else if((u.K||g.g==u)&&Ol(g),!w(p))for(O=g.Da.g.parse(p),p=0;p<O.length;p++){let de=O[p];if(g.T=de[0],de=de[1],g.G==2)if(de[0]=="c"){g.K=de[1],g.ia=de[2];const ut=de[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=de[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const ti=de[5];ti!=null&&typeof ti=="number"&&0<ti&&(I=1.5*ti,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const dn=u.g;if(dn){const Ml=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var M=I.h;M.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(rd(M,M.h),M.h=null))}if(I.D){const ld=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(I.ya=ld,we(I.I,I.D,ld))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var $=u;if(I.qa=mv(I,I.J?I.ia:null,I.W),$.K){Hy(I.h,$);var ye=$,et=I.L;et&&(ye.I=et),ye.B&&(ed(ye),Al(ye)),I.g=$}else cv(I);0<g.i.length&&jl(g)}else de[0]!="stop"&&de[0]!="close"||cs(g,7);else g.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?cs(g,7):id(g):de[0]!="noop"&&g.l&&g.l.ta(de),g.v=0)}}yo(4)}catch{}}var wA=class{constructor(u,p){this.g=u,this.map=p}};function By(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $y(u){return u.h?1:u.g?u.g.size:0}function nd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function rd(u,p){u.g?u.g.add(p):u.h=p}function Hy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}By.prototype.cancel=function(){if(this.i=Wy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return v(u.i)}function xA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,I=0;I<g;I++)p.push(u[I]);return p}p=[],g=0;for(I in u)p[g++]=u[I];return p}function EA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const I in u)p[g++]=I;return p}}}function qy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=EA(u),I=xA(u),O=I.length,M=0;M<O;M++)p.call(void 0,I[M],g&&g[M],u)}var Ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TA(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var I=u[g].indexOf("="),O=null;if(0<=I){var M=u[g].substring(0,I);O=u[g].substring(I+1)}else M=u[g];p(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function us(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof us){this.h=u.h,Cl(this,u.j),this.o=u.o,this.g=u.g,Rl(this,u.s),this.l=u.l;var p=u.i,g=new To;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Gy(this,g),this.m=u.m}else u&&(p=String(u).match(Ky))?(this.h=!1,Cl(this,p[1]||"",!0),this.o=xo(p[2]||""),this.g=xo(p[3]||"",!0),Rl(this,p[4]),this.l=xo(p[5]||"",!0),Gy(this,p[6]||"",!0),this.m=xo(p[7]||"")):(this.h=!1,this.i=new To(null,this.h))}us.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Eo(p,Qy,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Eo(p,Qy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Eo(g,g.charAt(0)=="/"?PA:IA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Eo(g,CA)),u.join("")};function Ln(u){return new us(u)}function Cl(u,p,g){u.j=g?xo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Rl(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Gy(u,p,g){p instanceof To?(u.i=p,RA(u.i,u.h)):(g||(p=Eo(p,AA)),u.i=new To(p,u.h))}function we(u,p,g){u.i.set(p,g)}function Nl(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Eo(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,SA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function SA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qy=/[#\/\?@]/g,IA=/[#\?:]/g,PA=/[#\?]/g,AA=/[#\?@]/g,CA=/#/g;function To(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function fr(u){u.g||(u.g=new Map,u.h=0,u.i&&TA(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=To.prototype,t.add=function(u,p){fr(this),this.i=null,u=Zs(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Xy(u,p){fr(u),p=Zs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Yy(u,p){return fr(u),p=Zs(u,p),u.g.has(p)}t.forEach=function(u,p){fr(this),this.g.forEach(function(g,I){g.forEach(function(O){u.call(p,O,I,this)},this)},this)},t.na=function(){fr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let I=0;I<p.length;I++){const O=u[I];for(let M=0;M<O.length;M++)g.push(p[I])}return g},t.V=function(u){fr(this);let p=[];if(typeof u=="string")Yy(this,u)&&(p=p.concat(this.g.get(Zs(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return fr(this),this.i=null,u=Zs(this,u),Yy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Jy(u,p,g){Xy(u,p),0<g.length&&(u.i=null,u.g.set(Zs(u,p),v(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var I=p[g];const M=encodeURIComponent(String(I)),$=this.V(I);for(I=0;I<$.length;I++){var O=M;$[I]!==""&&(O+="="+encodeURIComponent(String($[I]))),u.push(O)}}return this.i=u.join("&")};function Zs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function RA(u,p){p&&!u.j&&(fr(u),u.i=null,u.g.forEach(function(g,I){var O=I.toLowerCase();I!=O&&(Xy(this,I),Jy(this,O,g))},u)),u.j=p}function NA(u,p){const g=new _o;if(a.Image){const I=new Image;I.onload=y(pr,g,"TestLoadImage: loaded",!0,p,I),I.onerror=y(pr,g,"TestLoadImage: error",!1,p,I),I.onabort=y(pr,g,"TestLoadImage: abort",!1,p,I),I.ontimeout=y(pr,g,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function kA(u,p){const g=new _o,I=new AbortController,O=setTimeout(()=>{I.abort(),pr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(M=>{clearTimeout(O),M.ok?pr(g,"TestPingServer: ok",!0,p):pr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),pr(g,"TestPingServer: error",!1,p)})}function pr(u,p,g,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(g)}catch{}}function bA(){this.g=new pA}function DA(u,p,g){const I=g||"";try{qy(u,function(O,M){let $=O;c(O)&&($=Kh(O)),p.push(I+M+"="+encodeURIComponent($))})}catch(O){throw p.push(I+"type="+encodeURIComponent("_badmap")),O}}function kl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(kl,Gh),kl.prototype.g=function(){return new bl(this.l,this.j)},kl.prototype.i=function(u){return function(){return u}}({});function bl(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bl,lt),t=bl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Io(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?So(this):Io(this),this.readyState==3&&Zy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,So(this))},t.Qa=function(u){this.g&&(this.response=u,So(this))},t.ga=function(){this.g&&So(this)};function So(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Io(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Io(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ev(u){let p="";return V(u,function(g,I){p+=I,p+=":",p+=g,p+=`\r
`}),p}function sd(u,p,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=ev(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):we(u,p,g))}function be(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(be,lt);var VA=/^https?$/i,jA=["POST","PUT"];t=be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yh.g(),this.v=this.o?Ry(this.o):Ry(Yh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(M){tv(this,M);return}if(u=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)g.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const M of I.keys())g.set(M,I.get(M));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jA,p,void 0))||I||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,$]of g)this.g.setRequestHeader(M,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sv(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){tv(this,M)}};function tv(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,nv(u),Dl(u)}function nv(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),Dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rv(this):this.bb())},t.bb=function(){rv(this)};function rv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)Iy(u.Ea,0,u);else if(Tt(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var I;if(I=$===0){var O=String(u.D).match(Ky)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),I=!VA.test(O?O.toLowerCase():"")}g=I}if(g)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var M=2<Mn(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",nv(u)}}finally{Dl(u)}}}}function Dl(u,p){if(u.g){sv(u);const g=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Tt(u,"ready");try{g.onreadystatechange=I}catch{}}}function sv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),fA(p)}};function iv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function OA(u){const p={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(w(u[I]))continue;var g=k(u[I]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=p[O]||[];p[O]=M,M.push(g)}P(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function ov(u){this.Aa=0,this.i=[],this.j=new _o,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,u),this.cb=Po("retryDelaySeedMs",1e4,u),this.Wa=Po("forwardChannelMaxRetries",2,u),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new By(u&&u.concurrentRequestLimit),this.Da=new bA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ov.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,I){St(0),this.W=u,this.H=p||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=mv(this,null,this.W),jl(this)};function id(u){if(av(u),u.G==3){var p=u.U++,g=Ln(u.I);if(we(g,"SID",u.K),we(g,"RID",p),we(g,"TYPE","terminate"),Ao(u,g),p=new dr(u,u.j,p),p.L=2,p.v=Nl(Ln(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=gv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Al(p)}pv(u)}function Vl(u){u.g&&(ad(u),u.g.cancel(),u.g=null)}function av(u){Vl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ol(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function jl(u){if(!zy(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ve||J(),z||(Ve(),z=!0),Q.add(p,u),u.B=0}}function LA(u,p){return $y(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vo(m(u.Ga,u,p),fv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new dr(this,this.j,u);let M=this.o;if(this.S&&(M?(M=E(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(O.H=M,M=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=uv(this,O,p),g=Ln(this.I),we(g,"RID",u),we(g,"CVER",22),this.D&&we(g,"X-HTTP-Session-Id",this.D),Ao(this,g),M&&(this.O?p="headers="+encodeURIComponent(String(ev(M)))+"&"+p:this.m&&sd(g,this.m,M)),rd(this.h,O),this.Ua&&we(g,"TYPE","init"),this.P?(we(g,"$req",p),we(g,"SID","null"),O.T=!0,Zh(O,g,null)):Zh(O,g,p),this.G=2}}else this.G==3&&(u?lv(this,u):this.i.length==0||zy(this.h)||lv(this))};function lv(u,p){var g;p?g=p.l:g=u.U++;const I=Ln(u.I);we(I,"SID",u.K),we(I,"RID",g),we(I,"AID",u.T),Ao(u,I),u.m&&u.o&&sd(I,u.m,u.o),g=new dr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=uv(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rd(u.h,g),Zh(g,I,p)}function Ao(u,p){u.H&&V(u.H,function(g,I){we(p,I,g)}),u.l&&qy({},function(g,I){we(p,I,g)})}function uv(u,p,g){g=Math.min(u.i.length,g);var I=u.l?m(u.l.Na,u.l,u):null;e:{var O=u.i;let M=-1;for(;;){const $=["count="+g];M==-1?0<g?(M=O[0].g,$.push("ofs="+M)):M=0:$.push("ofs="+M);let ye=!0;for(let et=0;et<g;et++){let de=O[et].g;const ut=O[et].map;if(de-=M,0>de)M=Math.max(0,O[et].g-100),ye=!1;else try{DA(ut,$,"req"+de+"_")}catch{I&&I(ut)}}if(ye){I=$.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,I}function cv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ve||J(),z||(Ve(),z=!0),Q.add(p,u),u.v=0}}function od(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vo(m(u.Fa,u),fv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,hv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Vl(this),hv(this))};function ad(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function hv(u){u.g=new dr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Ln(u.qa);we(p,"RID","rpc"),we(p,"SID",u.K),we(p,"AID",u.T),we(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(p,"TO",u.ja),we(p,"TYPE","xmlhttp"),Ao(u,p),u.m&&u.o&&sd(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Nl(Ln(p)),g.m=null,g.P=!0,My(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Vl(this),od(this),St(19))};function Ol(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function dv(u,p){var g=null;if(u.g==p){Ol(u),ad(u),u.g=null;var I=2}else if(nd(u.h,p))g=p.D,Hy(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var O=u.B;I=Sl(),Tt(I,new Vy(I,g)),jl(u)}else cv(u);else if(O=p.s,O==3||O==0&&0<p.X||!(I==1&&LA(u,p)||I==2&&od(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),O){case 1:cs(u,5);break;case 4:cs(u,10);break;case 3:cs(u,6);break;default:cs(u,2)}}}function fv(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function cs(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),I=u.Xa;const O=!I;I=new us(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cl(I,"https"),Nl(I),O?NA(I.toString(),g):kA(I.toString(),g)}else St(2);u.G=0,u.l&&u.l.sa(p),pv(u),av(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function pv(u){if(u.G=0,u.ka=[],u.l){const p=Wy(u.h);(p.length!=0||u.i.length!=0)&&(S(u.ka,p),S(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function mv(u,p,g){var I=g instanceof us?Ln(g):new us(g);if(I.g!="")p&&(I.g=p+"."+I.g),Rl(I,I.s);else{var O=a.location;I=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var M=new us(null);I&&Cl(M,I),p&&(M.g=p),O&&Rl(M,O),g&&(M.l=g),I=M}return g=u.D,p=u.ya,g&&p&&we(I,g,p),we(I,"VER",u.la),Ao(u,I),I}function gv(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new be(new kl({eb:g})):new be(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yv(){}t=yv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ll(){}Ll.prototype.g=function(u,p){return new Bt(u,p)};function Bt(u,p){lt.call(this),this.g=new ov(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ei(this)}_(Bt,lt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){id(this.g)},Bt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Kh(u),u=g);p.i.push(new wA(p.Ya++,u)),p.G==3&&jl(p)},Bt.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,Bt.aa.N.call(this)};function vv(u){Qh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(vv,Qh);function _v(){Xh.call(this),this.status=1}_(_v,Xh);function ei(u){this.g=u}_(ei,yv),ei.prototype.ua=function(){Tt(this.g,"a")},ei.prototype.ta=function(u){Tt(this.g,new vv(u))},ei.prototype.sa=function(u){Tt(this.g,new _v)},ei.prototype.ra=function(){Tt(this.g,"b")},Ll.prototype.createWebChannel=Ll.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,cI=function(){return new Ll},uI=function(){return Sl()},lI=as,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,Nu=Il,jy.COMPLETE="complete",aI=jy,Ny.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",lt.prototype.listen=lt.prototype.K,qo=Ny,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,oI=be}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const gw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Sg("@firebase/firestore");function Mo(){return Ls.logLevel}function q(t,...e){if(Ls.logLevel<=ae.DEBUG){const n=e.map(Og);Ls.debug(`Firestore (${ao}): ${t}`,...n)}}function or(t,...e){if(Ls.logLevel<=ae.ERROR){const n=e.map(Og);Ls.error(`Firestore (${ao}): ${t}`,...n)}}function Wi(t,...e){if(Ls.logLevel<=ae.WARN){const n=e.map(Og);Ls.warn(`Firestore (${ao}): ${t}`,...n)}}function Og(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function me(t,e){t||Z()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class LM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MM{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new hI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new mt(e)}}class FM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new FM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new BM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=$M(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function qi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Ke(0,0))}static max(){return new te(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends Ba{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Ba{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return HM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ee.fromString(e))}static fromName(e){return new X(Ee.fromString(e).popFirst(5))}static empty(){return new X(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ee(e.slice()))}}function WM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Xr(s,X.empty(),e)}function qM(t){return new Xr(t.readTime,t.key,-1)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(te.min(),X.empty(),-1)}static max(){return new Xr(te.max(),X.empty(),-1)}}function KM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==GM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function XM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Lg.oe=-1;function gh(t){return t==null}function Pc(t){return t===0&&1/t==-1/0}function YM(t){return typeof t=="number"&&Number.isInteger(t)&&!Pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lu(this.root,e,this.comparator,!0)}}class lu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vw(this.data.getIterator())}getIteratorFrom(e){return new vw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class vw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new it(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pI("Invalid base64 string: "+i):i}}(e);return new at(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const JM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(me(!!t),typeof t=="string"){let e=0;const n=JM.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ms(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fg(t){const e=t.mapValue.fields.__previous_value__;return Mg(e)?Fg(e):e}function za(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class $a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu={mapValue:{}};function Fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mg(t)?4:t4(t)?9007199254740991:e4(t)?10:11:Z()}function Dn(t,e){if(t===e)return!0;const n=Fs(t);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return za(t).isEqual(za(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),a=Yr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ms(s.bytesValue).isEqual(Ms(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),a=je(i.doubleValue);return o===a?Pc(o)===Pc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(yw(o)!==yw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Ha(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Ki(t,e){if(t===e)return 0;const n=Fs(t),r=Fs(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=je(i.integerValue||i.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _w(t.timestampValue,e.timestampValue);case 4:return _w(za(t),za(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ms(i),l=Ms(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=fe(a[c],l[c]);if(h!==0)return h}return fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=fe(je(i.latitude),je(o.latitude));return a!==0?a:fe(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ww(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,v=fe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:ww(y,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===uu.mapValue&&o===uu.mapValue)return 0;if(i===uu.mapValue)return 1;if(o===uu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=fe(l[f],h[f]);if(m!==0)return m;const y=Ki(a[l[f]],c[h[f]]);if(y!==0)return y}return fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function _w(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Yr(t),r=Yr(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function ww(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ki(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function Gi(t){return Np(t)}function Np(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Np(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Np(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function xw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kp(t){return!!t&&"integerValue"in t}function Ug(t){return!!t&&"arrayValue"in t}function Ew(t){return!!t&&"nullValue"in t}function Tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function e4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function t4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ku(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(ha(this.value))}}function mI(t){const e=[];return Gs(t.fields,(n,r)=>{const s=new rt([n]);if(ku(r)){const i=mI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yt(e,0,te.min(),te.min(),te.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,te.min(),te.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,te.min(),te.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function Sw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Ki(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function n4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gI=class{};class He extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new s4(e,n,r):n==="array-contains"?new a4(e,r):n==="in"?new l4(e,r):n==="not-in"?new u4(e,r):n==="array-contains-any"?new c4(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new i4(e,r):new o4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ki(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(Ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new xn(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yI(t){return t.op==="and"}function vI(t){return r4(t)&&yI(t)}function r4(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function bp(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Gi(t.value);if(vI(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function _I(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&_I(o,s.filters[a]),!0):!1}(t,e):void Z()}function wI(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Gi(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class s4 extends He{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class i4 extends He{constructor(e,n){super(e,"in",n),this.keys=xI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class o4 extends He{constructor(e,n){super(e,"not-in",n),this.keys=xI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class a4 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ug(n)&&Ha(n.arrayValue,this.value)}}class l4 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ha(this.value.arrayValue,n)}}class u4 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ha(this.value.arrayValue,n)}}class c4 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Pw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new h4(t,e,n,r,s,i,o)}function Bg(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gi(r)).join(",")),e.ue=n}return e.ue}function zg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_I(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iw(t.startAt,e.startAt)&&Iw(t.endAt,e.endAt)}function Dp(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function d4(t,e,n,r,s,i,o,a){return new lo(t,e,n,r,s,i,o,a)}function $g(t){return new lo(t)}function Aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EI(t){return t.collectionGroup!==null}function da(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new it(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Wa(i,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new Wa(rt.keyField(),r))}return e.ce}function kn(t){const e=ne(t);return e.le||(e.le=f4(e,da(t))),e.le}function f4(t,e){if(t.limitType==="F")return Pw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Pw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vp(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jp(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return zg(kn(t),kn(e))&&t.limitType===e.limitType}function TI(t){return`${Bg(kn(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>wI(s)).join(", ")}]`),gh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Gi(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function vh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of da(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Sw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,da(r),s)||r.endAt&&!function(o,a,l){const c=Sw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,da(r),s))}(t,e)}function p4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SI(t){return(e,n)=>{let r=!1;for(const s of da(t)){const i=m4(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function m4(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ki(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new ke(X.comparator);function ar(){return g4}const II=new ke(X.comparator);function Ko(...t){let e=II;for(const n of t)e=e.insert(n.key,n);return e}function PI(t){let e=II;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return fa()}function AI(){return fa()}function fa(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const y4=new ke(X.comparator),v4=new it(X.comparator);function oe(...t){let e=v4;for(const n of t)e=e.add(n);return e}const _4=new it(fe);function w4(){return _4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function CI(t){return{integerValue:""+t}}function x4(t,e){return YM(e)?CI(e):Hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function E4(t,e,n){return t instanceof qa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mg(i)&&(i=Fg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ka?NI(t,e):t instanceof Ga?kI(t,e):function(s,i){const o=RI(s,i),a=Cw(o)+Cw(s.Pe);return kp(o)&&kp(s.Pe)?CI(a):Hg(s.serializer,a)}(t,e)}function T4(t,e,n){return t instanceof Ka?NI(t,e):t instanceof Ga?kI(t,e):n}function RI(t,e){return t instanceof Cc?function(r){return kp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qa extends _h{}class Ka extends _h{constructor(e){super(),this.elements=e}}function NI(t,e){const n=bI(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ga extends _h{constructor(e){super(),this.elements=e}}function kI(t,e){let n=bI(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class Cc extends _h{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Cw(t){return je(t.integerValue||t.doubleValue)}function bI(t){return Ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.field=e,this.transform=n}}function I4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ka&&s instanceof Ka||r instanceof Ga&&s instanceof Ga?qi(r.elements,s.elements,Dn):r instanceof Cc&&s instanceof Cc?Dn(r.Pe,s.Pe):r instanceof qa&&s instanceof qa}(t.transform,e.transform)}class P4{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function DI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wg(t.key,ln.none()):new fl(t.key,t.data,ln.none());{const n=t.data,r=Dt.empty();let s=new it(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(t.key,r,new Ht(s.toArray()),ln.none())}}function A4(t,e,n){t instanceof fl?function(s,i,o){const a=s.value.clone(),l=Nw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,i,o){if(!bu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Nw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(VI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pa(t,e,n,r){return t instanceof fl?function(i,o,a,l){if(!bu(i.precondition,o))return a;const c=i.value.clone(),h=kw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(i,o,a,l){if(!bu(i.precondition,o))return a;const c=kw(i.fieldTransforms,l,o),h=o.data;return h.setAll(VI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function C4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=RI(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Rw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qi(r,s,(i,o)=>I4(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fl extends wh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends wh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nw(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,T4(o,a,n[s]))}return r}function kw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,E4(i,o,e))}return r}class Wg extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R4 extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&A4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=DI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(n,r)=>Rw(n,r))&&qi(this.baseMutations,e.baseMutations,(n,r)=>Rw(n,r))}}class qg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return y4}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new qg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,ue;function D4(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function jI(t){if(t===void 0)return or("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ue.OK:return F.OK;case Ue.CANCELLED:return F.CANCELLED;case Ue.UNKNOWN:return F.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return F.INTERNAL;case Ue.UNAVAILABLE:return F.UNAVAILABLE;case Ue.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ue.NOT_FOUND:return F.NOT_FOUND;case Ue.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ue.ABORTED:return F.ABORTED;case Ue.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ue.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(ue=Ue||(Ue={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new As([4294967295,4294967295],0);function bw(t){const e=V4().encode(t),n=new iI;return n.update(e),new Uint8Array(n.digest())}function Dw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new As([n,r],0),new As([s,i],0)]}class Kg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Go(`Invalid padding: ${n}`);if(r<0)throw new Go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Go(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=As.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(As.fromNumber(r)));return s.compare(j4)===1&&(s=new As([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Kg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=bw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xh(te.min(),s,new ke(fe),ar(),oe())}}class pl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pl(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class OI{constructor(e,n){this.targetId=e,this.me=n}}class LI{constructor(e,n,r=at.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vw{constructor(){this.fe=0,this.ge=Ow(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new pl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ow()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class O4{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=jw(),this.Qe=new ke(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Dp(i))if(r===0){const o=new X(i.path);this.Ue(n,o,yt.newNoDocument(o,te.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ms(r).toUint8Array()}catch(l){if(l instanceof pI)return Wi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Kg(o,s,i)}catch(l){return Wi(l instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Dp(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,yt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=oe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new xh(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=jw(),this.Qe=new ke(fe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jw(){return new ke(X.comparator)}function Ow(){return new ke(X.comparator)}const L4={asc:"ASCENDING",desc:"DESCENDING"},M4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class U4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Op(t,e){return t.useProto3Json||gh(e)?e:{value:e}}function Rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B4(t,e){return Rc(t,e.toTimestamp())}function bn(t){return me(!!t),te.fromTimestamp(function(n){const r=Yr(n);return new Ke(r.seconds,r.nanos)}(t))}function Gg(t,e){return Lp(t,e).canonicalString()}function Lp(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FI(t){const e=Ee.fromString(t);return me(HI(e)),e}function Mp(t,e){return Gg(t.databaseId,e.path)}function rf(t,e){const n=FI(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(BI(n))}function UI(t,e){return Gg(t.databaseId,e)}function z4(t){const e=FI(t);return e.length===4?Ee.emptyPath():BI(e)}function Fp(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BI(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Lw(t,e,n){return{name:Mp(t,e),fields:n.value.mapValue.fields}}function $4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(me(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:jI(c.code);return new H(h,c.message||"")}(o);n=new LI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=rf(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):te.min(),a=new Dt({mapValue:{fields:r.document.fields}}),l=yt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Du(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=rf(t,r.document),i=r.readTime?bn(r.readTime):te.min(),o=yt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Du([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=rf(t,r.document),i=r.removedTargetIds||[];n=new Du([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new b4(s,i),a=r.targetId;n=new OI(a,o)}}return n}function H4(t,e){let n;if(e instanceof fl)n={update:Lw(t,e.key,e.value)};else if(e instanceof Wg)n={delete:Mp(t,e.key)};else if(e instanceof os)n={update:Lw(t,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof R4))return Z();n={verify:Mp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ka)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:B4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function W4(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(te.min())&&(o=bn(i)),new P4(o,s.transformResults||[])}(n,e))):[]}function q4(t,e){return{documents:[UI(t,e.path)]}}function K4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UI(t,s);const i=function(c){if(c.length!==0)return $I(xn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:si(m.field),direction:X4(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Op(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function G4(t){let e=z4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=zI(f);return m instanceof xn&&vI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(_){return new Wa(ii(_.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,gh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Ac(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Ac(y,m)}(n.endAt)),d4(e,s,o,i,a,"F",l,c)}function Q4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ii(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ii(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ii(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return He.create(ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>zI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function X4(t){return L4[t]}function Y4(t){return M4[t]}function J4(t){return F4[t]}function si(t){return{fieldPath:t.canonicalString()}}function ii(t){return rt.fromServerFormat(t.fieldPath)}function $I(t){return t instanceof He?function(n){if(n.op==="=="){if(Tw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(Ew(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tw(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(Ew(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:Y4(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>$I(s));return r.length===1?r[0]:{compositeFilter:{op:J4(n.op),filters:r}}}(t):Z()}function Z4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,s,i=te.min(),o=te.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.ct=e}}function tF(t){const e=G4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(){this.un=new rF}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Xr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class rF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qi(0)}static kn(){return new Qi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pa(r.mutation,s,Ht.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=Es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ko();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ar();const o=fa(),a=function(){return fa()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof os)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),pa(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new iF(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fa();let s=new ke((o,a)=>o-a),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ht.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(s.get(a.batchId)||oe()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=AI();h.forEach(m=>{if(!i.has(m)){const y=DI(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Es());let a=-1,l=i;return o.next(c=>U.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,oe())).next(h=>({batchId:a,changes:PI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Ko();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ko();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(f,m){return new lo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,yt.newInvalidDocument(h)))});let a=Ko();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&pa(h.mutation,c,Ht.empty(),Ke.now()),vh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:tF(s.bundledQuery),readTime:bn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.overlays=new ke(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Es(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Es(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Es(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new k4(n,r));let i=this.Ir.get(n);i===void 0&&(i=oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Tr=new it(Ge.Er),this.dr=new it(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=oe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(Ge.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N4(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ge(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(fe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new X(i),0);let a=new it(fe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.Mr=e,this.docs=function(){return new ke(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ar();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KM(qM(h),r)<=0||(s.has(h.key)||vh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dF(this)}getSize(e){return U.resolve(this.size)}}class dF extends sF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.persistence=e,this.Nr=new uo(n=>Bg(n),zg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qg,this.targetCount=0,this.kr=Qi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Lg(0),this.Kr=!1,this.Kr=!0,this.$r=new uF,this.referenceDelegate=e(this),this.Ur=new fF(this),this.indexManager=new nF,this.remoteDocumentCache=function(s){return new hF(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new eF(n),this.Gr=new aF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cF(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new mF(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class mF extends QM{constructor(e){super(),this.currentSequenceNumber=e}}class Xg{constructor(e){this.persistence=e,this.Jr=new Qg,this.Yr=null}static Zr(e){return new Xg(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Yg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XV()?8:XM(wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new gF;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Mo()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Mo()<=ae.DEBUG&&q("QueryEngine","Query:",ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Mo()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):U.resolve())}Yi(e,n){if(Aw(n))return U.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jp(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,jp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return Aw(n)||s.isEqual(te.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Mo()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ri(n)),this.rs(e,o,n,WM(s,-1)).next(a=>a))})}ts(e,n){let r=new it(SI(e));return n.forEach((s,i)=>{vh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Mo()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ri(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ke(fe),this._s=new uo(i=>Bg(i),zg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _F(t,e,n,r){return new vF(t,e,n,r)}async function WI(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=oe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function wF(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let y=U.resolve();return m.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(v=>{const S=c.docVersions.get(_);me(S!==null),v.version.compareTo(S)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qI(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xF(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(at.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,S,x){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=ar(),c=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(EF(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function EF(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ar();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function TF(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SF(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Up(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!dl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Mw(t,e,n){const r=ne(t);let s=te.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ne(l),m=f._s.get(h);return m!==void 0?U.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,kn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:te.min(),n?i:oe())).next(a=>(IF(r,p4(e),a),{documents:a,Ts:i})))}function IF(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Fw{constructor(){this.activeTargetIds=w4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PF{constructor(){this.so=new Fw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function sf(){return cu===null?cu=function(){return 268435456+Math.round(2147483648*Math.random())}():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class NF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=sf(),l=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Wi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ao}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=CF[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=sf();return new Promise((o,a)=>{const l=new oI;l.setWithCredentials(!0),l.listenOnce(aI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nu.NO_ERROR:const h=l.getResponseJson();q(ft,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Nu.TIMEOUT:q(ft,`RPC '${e}' ${i} timed out`),a(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const f=l.getStatus();if(q(ft,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const _=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(y.status);a(new H(_,y.message))}else a(new H(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q(ft,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);q(ft,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=sf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cI(),a=uI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,y=!1;const _=new RF({Io:S=>{y?q(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(m||(q(ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),q(ft,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},To:()=>f.close()}),v=(S,x,w)=>{S.listen(x,T=>{try{w(T)}catch(R){setTimeout(()=>{throw R},0)}})};return v(f,qo.EventType.OPEN,()=>{y||(q(ft,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),v(f,qo.EventType.CLOSE,()=>{y||(y=!0,q(ft,`RPC '${e}' stream ${s} transport closed`),_.So())}),v(f,qo.EventType.ERROR,S=>{y||(y=!0,Wi(ft,`RPC '${e}' stream ${s} transport errored:`,S),_.So(new H(F.UNAVAILABLE,"The operation could not be completed")))}),v(f,qo.EventType.MESSAGE,S=>{var x;if(!y){const w=S.data[0];me(!!w);const T=w,R=T.error||((x=T[0])===null||x===void 0?void 0:x.error);if(R){q(ft,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let V=function(A){const C=Ue[A];if(C!==void 0)return jI(C)}(j),P=R.message;V===void 0&&(V=F.INTERNAL,P="Unknown error status: "+j+" with message "+R.message),y=!0,_.So(new H(V,P)),f.close()}else q(ft,`RPC '${e}' stream ${s} received:`,w),_.bo(w)}}),v(a,lI.STAT_EVENT,S=>{S.stat===Rp.PROXY?q(ft,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Rp.NOPROXY&&q(ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return new U4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kF extends GI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$4(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?bn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fp(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Dp(l)?{documents:q4(i,l)}:{query:K4(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MI(i,o.resumeToken);const c=Op(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Rc(i,o.snapshotVersion.toTimestamp());const c=Op(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Q4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.a_(n)}}class bF extends GI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=W4(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>H4(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Lp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Lp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Qs(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await ml(c),c.q_.set("Unknown"),c.L_.delete(4),await Th(c)}(this))})}),this.q_=new VF(r,s)}}async function Th(t){if(Qs(t))for(const e of t.B_)await e(!0)}async function ml(t){for(const e of t.B_)await e(!1)}function QI(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ty(n)?ey(n):co(n).r_()&&Zg(n,e))}function Jg(t,e){const n=ne(t),r=co(n);n.N_.delete(e),r.r_()&&XI(n,e),n.N_.size===0&&(r.r_()?r.o_():Qs(n)&&n.q_.set("Unknown"))}function Zg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(t).A_(e)}function XI(t,e){t.Q_.xe(e),co(t).R_(e)}function ey(t){t.Q_=new O4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),co(t).start(),t.q_.v_()}function ty(t){return Qs(t)&&!co(t).n_()&&t.N_.size>0}function Qs(t){return ne(t).L_.size===0}function YI(t){t.Q_=void 0}async function OF(t){t.q_.set("Online")}async function LF(t){t.N_.forEach((e,n)=>{Zg(t,e)})}async function MF(t,e){YI(t),ty(t)?(t.q_.M_(e),ey(t)):t.q_.set("Unknown")}async function FF(t,e,n){if(t.q_.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nc(t,r)}else if(e instanceof Du?t.Q_.Ke(e):e instanceof OI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await qI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),XI(i,l);const f=new Nr(h.target,l,c,h.sequenceNumber);Zg(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Nc(t,r)}}async function Nc(t,e,n){if(!dl(e))throw e;t.L_.add(1),await ml(t),t.q_.set("Offline"),n||(n=()=>qI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Th(t)})}function JI(t,e){return e().catch(n=>Nc(t,n,e))}async function Sh(t){const e=ne(t),n=Jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UF(e);)try{const s=await TF(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,BF(e,s)}catch(s){await Nc(e,s)}ZI(e)&&eP(e)}function UF(t){return Qs(t)&&t.O_.length<10}function BF(t,e){t.O_.push(e);const n=Jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZI(t){return Qs(t)&&!Jr(t).n_()&&t.O_.length>0}function eP(t){Jr(t).start()}async function zF(t){Jr(t).p_()}async function $F(t){const e=Jr(t);for(const n of t.O_)e.m_(n.mutations)}async function HF(t,e,n){const r=t.O_.shift(),s=qg.from(r,e,n);await JI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sh(t)}async function WF(t,e){e&&Jr(t).V_&&await async function(r,s){if(function(o){return D4(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Jr(r).s_(),await JI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sh(r)}}(t,e),ZI(t)&&eP(t)}async function Bw(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Qs(n);n.L_.add(3),await ml(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Th(n)}async function qF(t,e){const n=ne(t);e?(n.L_.delete(2),await Th(n)):e||(n.L_.add(2),await ml(n),n.q_.set("Unknown"))}function co(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new kF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:OF.bind(null,t),Ro:LF.bind(null,t),mo:MF.bind(null,t),d_:FF.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ty(t)?ey(t):t.q_.set("Unknown")):(await t.K_.stop(),YI(t))})),t.K_}function Jr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new bF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zF.bind(null,t),mo:WF.bind(null,t),f_:$F.bind(null,t),g_:HF.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sh(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ny(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(t,e){if(or("AsyncQueue",`${e}: ${t}`),dl(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Ko(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new Di(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.W_=new ke(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xi(e,n,Di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GF{constructor(){this.queries=$w(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=$w(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function $w(){return new uo(t=>TI(t),yh)}async function tP(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new KF,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ry(o,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&sy(n)}async function nP(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QF(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&sy(n)}function XF(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function sy(t){t.Y_.forEach(e=>{e.next()})}var Bp,Hw;(Hw=Bp||(Bp={})).ea="default",Hw.Cache="cache";class rP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.key=e}}class iP{constructor(e){this.key=e}}class YF{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=SI(e),this.Ra=new Di(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new zw,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=vh(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;m&&y?m.data.isEqual(y.data)?_!==v&&(r.track({type:3,doc:y}),S=!0):this.ga(m,y)||(r.track({type:2,doc:y}),S=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),S=!0):m&&!y&&(r.track({type:1,doc:m}),S=!0,(l||c)&&(a=!0)),S&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,_){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return v(y)-v(_)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Xi(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new iP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new sP(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZF{constructor(e){this.key=e,this.va=!1}}class eU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new uo(a=>TI(a),yh),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(X.comparator),this.Na=new Map,this.La=new Qg,this.Ba={},this.ka=new Map,this.qa=Qi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tU(t,e,n=!0){const r=hP(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await oP(r,e,n,!0),s}async function nU(t,e){const n=hP(t);await oP(n,e,!0,!1)}async function oP(t,e,n,r){const s=await SF(t.localStore,kn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await rU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&QI(t.remoteStore,s),a}async function rU(t,e,n,r,s){t.Ka=(f,m,y)=>async function(v,S,x,w){let T=S.view.ma(x);T.ns&&(T=await Mw(v.localStore,S.query,!1).then(({documents:P})=>S.view.ma(P,T)));const R=w&&w.targetChanges.get(S.targetId),j=w&&w.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(T,v.isPrimaryClient,R,j);return qw(v,S.targetId,V.wa),V.snapshot}(t,f,m,y);const i=await Mw(t.localStore,e,!0),o=new YF(e,i.Ts),a=o.ma(i.documents),l=pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);qw(t,n,c.wa);const h=new JF(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function sU(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!yh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Up(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jg(r.remoteStore,s.targetId),zp(r,s.targetId)}).catch(hl)):(zp(r,s.targetId),await Up(r.localStore,s.targetId,!0))}async function iU(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jg(n.remoteStore,r.targetId))}async function oU(t,e,n){const r=fU(t);try{const s=await function(o,a){const l=ne(o),c=Ke.now(),h=a.reduce((y,_)=>y.add(_.key),oe());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=ar(),v=oe();return l.cs.getEntries(y,h).next(S=>{_=S,_.forEach((x,w)=>{w.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(S=>{f=S;const x=[];for(const w of a){const T=C4(w,f.get(w.key).overlayedDocument);T!=null&&x.push(new os(w.key,T,mI(T.value.mapValue),ln.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,x,a)}).next(S=>{m=S;const x=S.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(y,S.batchId,x)})}).then(()=>({batchId:m.batchId,changes:PI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ke(fe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await gl(r,s.changes),await Sh(r.remoteStore)}catch(s){const i=ry(s,"Failed to persist write");n.reject(i)}}async function aP(t,e){const n=ne(t);try{const r=await xF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?me(o.va):s.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await gl(n,r,e)}catch(r){await hl(r)}}function Ww(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&sy(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aU(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ke(X.comparator);o=o.insert(i,yt.newNoDocument(i,te.min()));const a=oe().add(i),l=new xh(te.min(),new Map,new ke(fe),o,a);await aP(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),iy(r)}else await Up(r.localStore,e,!1).then(()=>zp(r,e,n)).catch(hl)}async function lU(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await wF(n.localStore,e);uP(n,r,null),lP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gl(n,s)}catch(s){await hl(s)}}async function uU(t,e,n){const r=ne(t);try{const s=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(me(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);uP(r,e,n),lP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gl(r,s)}catch(s){await hl(s)}}function lP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uP(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function zp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cP(t,r)})}function cP(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),iy(t))}function qw(t,e,n){for(const r of n)r instanceof sP?(t.La.addReference(r.key,e),cU(t,r)):r instanceof iP?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cP(t,r.key)):Z()}function cU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),iy(t))}function iy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new ZF(n)),t.Oa=t.Oa.insert(n,r),QI(t.remoteStore,new Nr(kn($g(n.path)),r,"TargetPurposeLimboResolution",Lg.oe))}}async function gl(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Yg.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,m=>U.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>U.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!dl(f))throw f;q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),_=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(m,v)}}}(r.localStore,i))}async function hU(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await WI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new H(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gl(n,r.hs)}}function dU(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function hP(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aU.bind(null,e),e.Ca.d_=QF.bind(null,e.eventManager),e.Ca.$a=XF.bind(null,e.eventManager),e}function fU(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uU.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _F(this.persistence,new yF,e.initialUser,this.serializer)}Ga(e){return new pF(Xg.Zr,this.serializer)}Wa(e){return new PF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class $p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ww(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hU.bind(null,this.syncEngine),await qF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GF}()}createDatastore(e){const n=Eh(e.databaseInfo.databaseId),r=function(i){return new NF(i)}(e.databaseInfo);return function(i,o,a,l){return new DF(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new jF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ww(this.syncEngine,n,0),function(){return Uw.D()?new Uw:new AF}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const f=new eU(s,i,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ml(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$p.provider={build:()=>new $p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=dI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ry(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function af(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await WI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mU(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bw(e.remoteStore,s)),t._onlineComponents=e}async function mU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await af(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),await af(t,new kc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await af(t,new kc);return t._offlineComponents}async function fP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Kw(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Kw(t,new $p))),t._onlineComponents}function gU(t){return fP(t).then(e=>e.syncEngine)}async function pP(t){const e=await fP(t),n=e.eventManager;return n.onListen=tU.bind(null,e.syncEngine),n.onUnlisten=sU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iU.bind(null,e.syncEngine),n}function yU(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new dP({next:m=>{h.Za(),o.enqueueAndForget(()=>nP(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new rP($g(a.path),h,{includeMetadataChanges:!0,_a:!0});return tP(i,f)}(await pP(t),t.asyncQueue,e,n,r)),r.promise}function vU(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new dP({next:m=>{h.Za(),o.enqueueAndForget(()=>nP(i,f)),m.fromCache&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new rP(a,h,{includeMetadataChanges:!0,_a:!0});return tP(i,f)}(await pP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _U(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qw(t){if(!X.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xw(t){if(X.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ih(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_U("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OM;switch(r.type){case"firstParty":return new UM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gw.get(n);r&&(q("ComponentProvider","Removing Datastore"),Gw.delete(n),r.terminate())}(this),Promise.resolve()}}function wU(t,e,n,r={}){var s;const i=(t=En(t,Ph))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=mt.MOCK_USER;else{a=$V(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new mt(c)}t._authCredentials=new LM(new hI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class Wr extends Xs{constructor(e,n,r){super(e,n,$g(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new X(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function Kt(t,e,...n){if(t=Ye(t),gP("collection","path",e),t instanceof Ph){const r=Ee.fromString(e,...n);return Xw(r),new Wr(t,null,r)}{if(!(t instanceof Ct||t instanceof Wr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Xw(r),new Wr(t.firestore,null,r)}}function _n(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=dI.newId()),gP("doc","path",e),t instanceof Ph){const r=Ee.fromString(e,...n);return Qw(r),new Ct(t,null,new X(r))}{if(!(t instanceof Ct||t instanceof Wr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Qw(r),new Ct(t.firestore,t instanceof Wr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KI(this,"async_queue_retry"),this.Vu=()=>{const r=of();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!dl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw or("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ny.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ys extends Ph{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Jw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jw(e),this._firestoreClient=void 0,await e}}}function xU(t,e){const n=typeof t=="object"?t:w1(),r=typeof t=="string"?t:"(default)",s=Pg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=BV("firestore");i&&wU(s,...i)}return s}function oy(t){if(t._terminated)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EU(t),t._firestoreClient}function EU(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new ZM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,mP(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new pU(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yi(at.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yi(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=/^__.*__$/;class SU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new fl(e,this.data,n,this.fieldTransforms)}}class yP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class uy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new uy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vP(this.Cu)&&TU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eh(e)}Qu(e,n,r,s=!1){return new uy({Cu:e,methodName:n,qu:r,path:rt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rh(t){const e=t._freezeSettings(),n=Eh(t._databaseId);return new IU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _P(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);hy("Data must be an object, but it was:",o,r);const a=wP(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Hp(e,f,n);if(!o.contains(m))throw new H(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);EP(h,m)||h.push(m)}l=new Ht(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new SU(new Dt(a),l,c)}class Nh extends Ch{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nh}}class cy extends Ch{_toFieldTransform(e){return new S4(e.path,new qa)}isEqual(e){return e instanceof cy}}function PU(t,e,n,r){const s=t.Qu(1,e,n);hy("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Gs(r,(l,c)=>{const h=dy(e,l,n);c=Ye(c);const f=s.Nu(h);if(c instanceof Nh)i.push(h);else{const m=yl(c,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new Ht(i);return new yP(o,a,s.fieldTransforms)}function AU(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Hp(e,r,n)],l=[s];if(i.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Hp(e,i[m])),l.push(i[m+1]);const c=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!EP(c,a[m])){const y=a[m];let _=l[m];_=Ye(_);const v=o.Nu(y);if(_ instanceof Nh)c.push(y);else{const S=yl(_,v);S!=null&&(c.push(y),h.set(y,S))}}const f=new Ht(c);return new yP(h,f,o.fieldTransforms)}function CU(t,e,n,r=!1){return yl(n,t.Qu(r?4:3,e))}function yl(t,e){if(xP(t=Ye(t)))return hy("Unsupported field value:",e,t),wP(t,e);if(t instanceof Ch)return function(r,s){if(!vP(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=yl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x4(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Rc(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(s.serializer,i)}}if(r instanceof ay)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yi)return{bytesValue:MI(s.serializer,r._byteString)};if(r instanceof Ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ly)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Hg(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ih(r)}`)}(t,e)}function wP(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,s)=>{const i=yl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof ay||t instanceof Yi||t instanceof Ct||t instanceof Ch||t instanceof ly)}function hy(t,e,n){if(!xP(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ih(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Hp(t,e,n){if((e=Ye(e))instanceof Ah)return e._internalPath;if(typeof e=="string")return dy(t,e);throw bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const RU=new RegExp("[~\\*/\\[\\]]");function dy(t,e,n){if(e.search(RU)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ah(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new H(F.INVALID_ARGUMENT,a+t+l)}function EP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NU extends TP{data(){return super.data()}}function kh(t,e){return typeof e=="string"?dy(t,e):e instanceof Ah?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class SP extends fy{}function Qa(t,e,...n){let r=[];e instanceof fy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof my).length,a=i.filter(l=>l instanceof bh).length;if(o>1||o>0&&a>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bh extends SP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bh(e,n,r)}_apply(e){const n=this._parse(e);return IP(e._query,n),new Xs(e.firestore,e.converter,Vp(e._query,n))}_parse(e){const n=Rh(e.firestore);return function(i,o,a,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ex(f,h);const y=[];for(const _ of f)y.push(Zw(l,i,_));m={arrayValue:{values:y}}}else m=Zw(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ex(f,h),m=CU(a,o,f,h==="in"||h==="not-in");return He.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function py(t,e,n){const r=e,s=kh("where",t);return bh._create(s,r,n)}class my extends fy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new my(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)IP(o,l),o=Vp(o,l)}(e._query,n),new Xs(e.firestore,e.converter,Vp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gy extends SP{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wa(i,o)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Dh(t,e="asc"){const n=e,r=kh("orderBy",t);return gy._create(r,n)}function Zw(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EI(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!X.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xw(t,new X(r))}if(n instanceof Ct)return xw(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function ex(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IP(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bU{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new ly(i)}convertGeoPoint(e){return new ay(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(za(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);me(HI(r));const s=new $a(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||or(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AP extends TP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vu extends AP{data(e={}){return super.data(e)}}class DU{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new Qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:VU(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){t=En(t,Ct);const e=En(t.firestore,Ys);return yU(oy(e),t._key).then(n=>OU(e,t,n))}class CP extends bU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Zr(t){t=En(t,Xs);const e=En(t.firestore,Ys),n=oy(e),r=new CP(e);return kU(t._query),vU(n,t._query).then(s=>new DU(e,r,t,s))}function jU(t,e,n){t=En(t,Ct);const r=En(t.firestore,Ys),s=PP(t.converter,e);return Vh(r,[_P(Rh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ln.none())])}function yy(t,e,n,...r){t=En(t,Ct);const s=En(t.firestore,Ys),i=Rh(s);let o;return o=typeof(e=Ye(e))=="string"||e instanceof Ah?AU(i,"updateDoc",t._key,e,n,r):PU(i,"updateDoc",t._key,e),Vh(s,[o.toMutation(t._key,ln.exists(!0))])}function RP(t){return Vh(En(t.firestore,Ys),[new Wg(t._key,ln.none())])}function Ya(t,e){const n=En(t.firestore,Ys),r=_n(t),s=PP(t.converter,e);return Vh(n,[_P(Rh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}function Vh(t,e){return function(r,s){const i=new Yn;return r.asyncQueue.enqueueAndForget(async()=>oU(await gU(r),s,i)),i.promise}(oy(t),e)}function OU(t,e,n){const r=n.docs.get(e._key),s=new CP(t);return new AP(t,s,e._key,r,new Qo(n.hasPendingWrites,n.fromCache),e.converter)}function LU(){return new cy("serverTimestamp")}(function(e,n=!0){(function(s){ao=s})(io),$i(new js("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ys(new MM(r.getProvider("auth-internal")),new zM(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$r(gw,"4.7.3",e),$r(gw,"4.7.3","esm2017")})();var MU="firebase",FU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(MU,FU,"app");const UU={apiKey:"AIzaSyBMJU8PeiJr0e5o0SBJl36XFuAJCjXCK6Q",authDomain:"courier-pwa-5b980.firebaseapp.com",projectId:"courier-pwa-5b980",storageBucket:"courier-pwa-5b980.firebasestorage.app",messagingSenderId:"639502526434",appId:"1:639502526434:web:3260096d768c7b0489fbbb",measurementId:"G-N2TGH0JMX3"},NP=_1(UU),Vn=NM(NP),Ce=xU(NP);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>b.createElement("svg",{ref:h,...BU,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${zU(t)}`,a].join(" "),...c},[...e.map(([f,m])=>b.createElement(f,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=ce("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ce("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),XU=({children:t,requireAdmin:e=!1})=>{const[n,r,s]=Ks(Vn),[i,o]=b.useState(null),[a,l]=b.useState(!0),c=ss();return b.useEffect(()=>{r||(n?(async()=>{if(n)try{const f=_n(Ce,"staffs",n.uid),m=await Xa(f);if(m.exists())o(m.data().role);else{const y={uid:n.uid,name:n.displayName||"Staff User",phone:n.phoneNumber||"",role:"staff",createdAt:LU()};await jU(f,y),o("staff")}}catch(f){console.error("Error fetching user role:",f)}finally{l(!1)}})():c("/login",{replace:!0}))},[n,r,c]),r||a?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsx(Te.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:d.jsx(Cs,{className:"h-8 w-8 text-primary"})})}):s?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Authentication Error"}),d.jsx("p",{className:"text-gray-600 mt-2",children:s.message})]})}):e&&i!=="admin"?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Admin access required"})]})}):d.jsx(d.Fragment,{children:t})},YU=()=>{const t=ss(),e=Hs(),[n,r]=b.useState(!1),s=async()=>{try{await nL(Vn),t("/login")}catch(a){console.error("Sign out error:",a)}},i=[{path:"/dashboard",icon:HU,label:"Dashboard"},{path:"/parcels",icon:un,label:"Parcels"},{path:"/wallet",icon:ma,label:"Wallet"},{path:"/ledger",icon:Kp,label:"Ledger"}],o=a=>e.pathname===a;return d.jsx("header",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"flex justify-between items-center h-16",children:[d.jsxs(bt,{to:"/dashboard",className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent rounded-lg flex items-center justify-center",children:d.jsx(un,{className:"h-5 w-5 text-white"})}),d.jsx("span",{className:"font-bold text-xl text-gray-900",children:"Courier"})]}),d.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:i.map(({path:a,icon:l,label:c})=>d.jsxs(bt,{to:a,className:`flex items-center space-x-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ${o(a)?"text-primary bg-primary/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[d.jsx(l,{className:"h-4 w-4"}),d.jsx("span",{children:c})]},a))}),d.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[d.jsx(bt,{to:"/admin/destinations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:d.jsx(rx,{className:"h-5 w-5"})}),d.jsx("button",{onClick:s,className:"text-gray-600 hover:text-red-600 transition-colors",children:d.jsx(nx,{className:"h-5 w-5"})})]}),d.jsx("button",{className:"md:hidden p-2",onClick:()=>r(!n),children:n?d.jsx(Lc,{className:"h-6 w-6 text-gray-600"}):d.jsx(WU,{className:"h-6 w-6 text-gray-600"})})]}),n&&d.jsx(Te.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"md:hidden py-4 border-t border-gray-100",children:d.jsxs("nav",{className:"space-y-2",children:[i.map(({path:a,icon:l,label:c})=>d.jsxs(bt,{to:a,className:`flex items-center space-x-3 px-3 py-2 rounded-lg font-medium transition-all duration-200 ${o(a)?"text-primary bg-primary/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>r(!1),children:[d.jsx(l,{className:"h-5 w-5"}),d.jsx("span",{children:c})]},a)),d.jsx("hr",{className:"my-2"}),d.jsxs(bt,{to:"/admin/destinations",className:"flex items-center space-x-3 px-3 py-2 rounded-lg font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all duration-200",onClick:()=>r(!1),children:[d.jsx(rx,{className:"h-5 w-5"}),d.jsx("span",{children:"Admin"})]}),d.jsxs("button",{onClick:()=>{s(),r(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg font-medium text-gray-600 hover:text-red-600 transition-all duration-200",children:[d.jsx(nx,{className:"h-5 w-5"}),d.jsx("span",{children:"Sign Out"})]})]})})]})})},JU=({children:t})=>d.jsx(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},className:"w-full",children:t});function ZU(){const t=Date.now().toString(36).toUpperCase(),e=Math.random().toString(36).substring(2,6).toUpperCase();return`${t}-${e}`.slice(0,12)}function ga(t){return t.startsWith("07")||t.startsWith("01")?`+254${t.substring(1)}`:t.startsWith("254")?`+${t}`:(t.startsWith("+254"),t)}function Yp(t){return/^\+[1-9]\d{1,14}$/.test(ga(t))}const e3=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState("phone"),[o,a]=b.useState(!1),[l,c]=b.useState(""),[h,f]=b.useState(null),m=ss(),y=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new NL(Vn,"recaptcha-container",{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")}}))},_=async S=>{S.preventDefault(),c(""),a(!0);try{const x=ga(t);if(!Yp(x))throw new Error("Please enter a valid phone number");y();const w=await DL(Vn,x,window.recaptchaVerifier);f(w),i("otp")}catch(x){c(x.message||"Failed to send OTP"),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=void 0)}finally{a(!1)}},v=async S=>{S.preventDefault(),c(""),a(!0);try{if(!h)throw new Error("No confirmation result found");await h.confirm(n),m("/dashboard")}catch{c("Invalid OTP. Please try again.")}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 via-accent/10 to-warm/10 p-4",children:d.jsx(Te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full max-w-md",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-accent rounded-2xl mx-auto mb-4 flex items-center justify-center",children:d.jsx(Qp,{className:"h-8 w-8 text-white"})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),d.jsx("p",{className:"text-gray-600 mt-2",children:s==="phone"?"Enter your phone number to get started":"Enter the verification code we sent you"})]}),s==="phone"?d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),d.jsxs("div",{className:"relative",children:[d.jsx(jc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"tel",id:"phone",value:t,onChange:S=>e(S.target.value),placeholder:"+254700000000",className:"input-field pl-11",required:!0})]})]}),l&&d.jsx(Te.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:l}),d.jsx("button",{type:"submit",disabled:o||!t,className:"btn-primary w-full flex items-center justify-center space-x-2",children:o?d.jsx(Cs,{className:"h-5 w-5 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"Send OTP"}),d.jsx(tx,{className:"h-4 w-4"})]})})]}):d.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),d.jsx("input",{type:"text",id:"otp",value:n,onChange:S=>r(S.target.value),placeholder:"123456",className:"input-field text-center text-lg tracking-widest",maxLength:6,required:!0})]}),l&&d.jsx(Te.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:l}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{type:"submit",disabled:o||n.length!==6,className:"btn-primary w-full flex items-center justify-center space-x-2",children:o?d.jsx(Cs,{className:"h-5 w-5 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"Verify & Login"}),d.jsx(tx,{className:"h-4 w-4"})]})}),d.jsx("button",{type:"button",onClick:()=>{i("phone"),r(""),c("")},className:"btn-secondary w-full",children:"Back to Phone"})]})]}),d.jsx("div",{id:"recaptcha-container"})]})})})},t3=()=>{const[t]=Ks(Vn),[e,n]=b.useState({totalParcels:0,pendingParcels:0,inTransitParcels:0,deliveredParcels:0,walletBalance:0}),[r,s]=b.useState([]),[i,o]=b.useState(!0);b.useEffect(()=>{(async()=>{var c;if(t)try{const h=Qa(Kt(Ce,"parcels"),py("createdBy","==",t.uid),Dh("createdAt","desc")),m=(await Zr(h)).docs.map(T=>({...T.data(),id:T.id})),y=m.length,_=m.filter(T=>T.status==="pending").length,v=m.filter(T=>T.status==="in_transit").length,S=m.filter(T=>T.status==="delivered").length,x=await Xa(_n(Ce,"wallets",t.uid)),w=x.exists()&&((c=x.data())==null?void 0:c.balance)||0;n({totalParcels:y,pendingParcels:_,inTransitParcels:v,deliveredParcels:S,walletBalance:w}),s(m.slice(0,5))}catch(h){console.error("Error fetching dashboard data:",h)}finally{o(!1)}})()},[t]);const a=({icon:l,title:c,value:h,color:f,link:m})=>d.jsx(bt,{to:m,children:d.jsx(Te.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`card hover:shadow-lg cursor-pointer border-l-4 ${f}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:c}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:h})]}),d.jsx("div",{className:`p-3 rounded-xl bg-opacity-10 ${f.replace("border-","bg-")}`,children:d.jsx(l,{className:`h-6 w-6 ${f.replace("border-","text-")}`})})]})})});return i?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(l=>d.jsx("div",{className:"card h-24 bg-gray-200"},l))})})}):d.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your overview."})]}),d.jsx(bt,{to:"/parcels/new",children:d.jsxs(Te.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"New Parcel"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(a,{icon:un,title:"Total Parcels",value:e.totalParcels,color:"border-primary",link:"/parcels"}),d.jsx(a,{icon:bP,title:"Pending",value:e.pendingParcels,color:"border-yellow-500",link:"/parcels?status=pending"}),d.jsx(a,{icon:LP,title:"In Transit",value:e.inTransitParcels,color:"border-blue-500",link:"/parcels?status=in_transit"}),d.jsx(a,{icon:Wp,title:"Delivered",value:e.deliveredParcels,color:"border-green-500",link:"/parcels?status=delivered"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Parcels"}),d.jsx(bt,{to:"/parcels",className:"text-primary hover:text-primary/80 font-medium",children:"View All"})]}),r.length>0?d.jsx("div",{className:"space-y-4",children:r.map(l=>d.jsxs(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"font-semibold text-gray-900",children:l.trackingCode}),d.jsx("span",{className:`status-${l.status}`,children:l.status.replace("_"," ")})]}),d.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[l.senderName," → ",l.recipientName]})]}),d.jsx(bt,{to:`/parcels/${l.id}`,className:"text-primary hover:text-primary/80 font-medium",children:"View"})]},l.id))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(un,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"No parcels yet"}),d.jsx(bt,{to:"/parcels/new",className:"text-primary hover:text-primary/80 font-medium",children:"Create your first parcel"})]})]})}),d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"card",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ma,{className:"h-12 w-12 text-primary mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Wallet Balance"}),d.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",e.walletBalance.toLocaleString()]}),d.jsx(bt,{to:"/wallet",className:"inline-block mt-4 text-primary hover:text-primary/80 font-medium",children:"View Details →"})]})})})]})]})},n3=()=>{const[t]=Ks(Vn),[e,n]=gk(),[r,s]=b.useState([]),[i,o]=b.useState([]),[a,l]=b.useState(""),[c,h]=b.useState(e.get("status")||"all"),[f,m]=b.useState(!0);b.useEffect(()=>{(async()=>{if(t)try{const S=Qa(Kt(Ce,"parcels"),py("createdBy","==",t.uid),Dh("createdAt","desc")),w=(await Zr(S)).docs.map(T=>({id:T.id,...T.data()}));s(w),o(w)}catch(S){console.error("Error fetching parcels:",S)}finally{m(!1)}})()},[t]),b.useEffect(()=>{let v=r;c!=="all"&&(v=v.filter(S=>S.status===c)),a&&(v=v.filter(S=>S.trackingCode.toLowerCase().includes(a.toLowerCase())||S.senderName.toLowerCase().includes(a.toLowerCase())||S.recipientName.toLowerCase().includes(a.toLowerCase())||S.shortDescription.toLowerCase().includes(a.toLowerCase()))),o(v)},[r,a,c]);const y=v=>{h(v),v==="all"?e.delete("status"):e.set("status",v),n(e)},_=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return f?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:[1,2,3].map(v=>d.jsx("div",{className:"card h-32 bg-gray-200 mb-4"},v))})}):d.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Parcels"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your parcel deliveries"})]}),d.jsx(bt,{to:"/parcels/new",children:d.jsxs(Te.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"New Parcel"})]})})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(GU,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Search by tracking code, names, or description...",value:a,onChange:v=>l(v.target.value),className:"input-field pl-11"})]})}),d.jsx("div",{className:"flex space-x-2",children:[{key:"all",label:"All",count:r.length},{key:"pending",label:"Pending",count:r.filter(v=>v.status==="pending").length},{key:"in_transit",label:"In Transit",count:r.filter(v=>v.status==="in_transit").length},{key:"delivered",label:"Delivered",count:r.filter(v=>v.status==="delivered").length}].map(({key:v,label:S,count:x})=>d.jsxs("button",{onClick:()=>y(v),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${c===v?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[S," (",x,")"]},v))})]})}),i.length>0?d.jsx("div",{className:"space-y-4",children:i.map(v=>{var S,x,w;return d.jsx(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card hover:shadow-md transition-all duration-200",children:d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-6",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.trackingCode}),d.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_(v.status)}`,children:v.status.replace("_"," ").toUpperCase()})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(jc,{className:"h-4 w-4"}),d.jsxs("span",{children:[v.senderName," → ",v.recipientName]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(un,{className:"h-4 w-4"}),d.jsx("span",{children:v.shortDescription})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Dc,{className:"h-4 w-4"}),d.jsxs("span",{children:["Created: ",(w=(x=(S=v.createdAt)==null?void 0:S.toDate)==null?void 0:x.call(S))==null?void 0:w.toLocaleDateString()]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Vc,{className:"h-4 w-4"}),d.jsxs("span",{children:["Dest: ",v.destinationId]})]})]})]}),d.jsx("div",{className:"flex items-center space-x-3",children:d.jsxs(bt,{to:`/parcels/${v.id}`,className:"btn-primary flex items-center space-x-2",children:[d.jsx($U,{className:"h-4 w-4"}),d.jsx("span",{children:"View"})]})})]})},v.id)})}):d.jsxs("div",{className:"card text-center py-12",children:[d.jsx(un,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No parcels found"}),d.jsx("p",{className:"text-gray-600 mb-6",children:a||c!=="all"?"Try adjusting your search or filters":"Get started by creating your first parcel"}),!a&&c==="all"&&d.jsxs(bt,{to:"/parcels/new",className:"btn-primary inline-flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"Create Parcel"})]})]})]})};function MP(t,e){return function(){return t.apply(e,arguments)}}const{toString:r3}=Object.prototype,{getPrototypeOf:vy}=Object,{iterator:jh,toStringTag:FP}=Symbol,Oh=(t=>e=>{const n=r3.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tn=t=>(t=t.toLowerCase(),e=>Oh(e)===t),Lh=t=>e=>typeof e===t,{isArray:ho}=Array,Ji=Lh("undefined");function vl(t){return t!==null&&!Ji(t)&&t.constructor!==null&&!Ji(t.constructor)&&Mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const UP=Tn("ArrayBuffer");function s3(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&UP(t.buffer),e}const i3=Lh("string"),Mt=Lh("function"),BP=Lh("number"),_l=t=>t!==null&&typeof t=="object",o3=t=>t===!0||t===!1,Ou=t=>{if(Oh(t)!=="object")return!1;const e=vy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(FP in t)&&!(jh in t)},a3=t=>{if(!_l(t)||vl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},l3=Tn("Date"),u3=Tn("File"),c3=Tn("Blob"),h3=Tn("FileList"),d3=t=>_l(t)&&Mt(t.pipe),f3=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mt(t.append)&&((e=Oh(t))==="formdata"||e==="object"&&Mt(t.toString)&&t.toString()==="[object FormData]"))},p3=Tn("URLSearchParams"),[m3,g3,y3,v3]=["ReadableStream","Request","Response","Headers"].map(Tn),_3=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),ho(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(vl(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function zP(t,e){if(vl(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$P=t=>!Ji(t)&&t!==Ts;function Jp(){const{caseless:t,skipUndefined:e}=$P(this)&&this||{},n={},r=(s,i)=>{const o=t&&zP(n,i)||i;Ou(n[o])&&Ou(s)?n[o]=Jp(n[o],s):Ou(s)?n[o]=Jp({},s):ho(s)?n[o]=s.slice():(!e||!Ji(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&wl(arguments[s],r);return n}const w3=(t,e,n,{allOwnKeys:r}={})=>(wl(e,(s,i)=>{n&&Mt(s)?t[i]=MP(s,n):t[i]=s},{allOwnKeys:r}),t),x3=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),E3=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},T3=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&vy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},S3=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},I3=t=>{if(!t)return null;if(ho(t))return t;let e=t.length;if(!BP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},P3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&vy(Uint8Array)),A3=(t,e)=>{const r=(t&&t[jh]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},C3=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},R3=Tn("HTMLFormElement"),N3=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),ix=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),k3=Tn("RegExp"),HP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};wl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},b3=t=>{HP(t,(e,n)=>{if(Mt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},D3=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return ho(t)?r(t):r(String(t).split(e)),n},V3=()=>{},j3=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function O3(t){return!!(t&&Mt(t.append)&&t[FP]==="FormData"&&t[jh])}const L3=t=>{const e=new Array(10),n=(r,s)=>{if(_l(r)){if(e.indexOf(r)>=0)return;if(vl(r))return r;if(!("toJSON"in r)){e[s]=r;const i=ho(r)?[]:{};return wl(r,(o,a)=>{const l=n(o,s+1);!Ji(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},M3=Tn("AsyncFunction"),F3=t=>t&&(_l(t)||Mt(t))&&Mt(t.then)&&Mt(t.catch),WP=((t,e)=>t?setImmediate:e?((n,r)=>(Ts.addEventListener("message",({source:s,data:i})=>{s===Ts&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ts.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mt(Ts.postMessage)),U3=typeof queueMicrotask<"u"?queueMicrotask.bind(Ts):typeof process<"u"&&process.nextTick||WP,B3=t=>t!=null&&Mt(t[jh]),L={isArray:ho,isArrayBuffer:UP,isBuffer:vl,isFormData:f3,isArrayBufferView:s3,isString:i3,isNumber:BP,isBoolean:o3,isObject:_l,isPlainObject:Ou,isEmptyObject:a3,isReadableStream:m3,isRequest:g3,isResponse:y3,isHeaders:v3,isUndefined:Ji,isDate:l3,isFile:u3,isBlob:c3,isRegExp:k3,isFunction:Mt,isStream:d3,isURLSearchParams:p3,isTypedArray:P3,isFileList:h3,forEach:wl,merge:Jp,extend:w3,trim:_3,stripBOM:x3,inherits:E3,toFlatObject:T3,kindOf:Oh,kindOfTest:Tn,endsWith:S3,toArray:I3,forEachEntry:A3,matchAll:C3,isHTMLForm:R3,hasOwnProperty:ix,hasOwnProp:ix,reduceDescriptors:HP,freezeMethods:b3,toObjectSet:D3,toCamelCase:N3,noop:V3,toFiniteNumber:j3,findKey:zP,global:Ts,isContextDefined:$P,isSpecCompliantForm:O3,toJSONObject:L3,isAsyncFn:M3,isThenable:F3,setImmediate:WP,asap:U3,isIterable:B3};function re(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}L.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const qP=re.prototype,KP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{KP[t]={value:t}});Object.defineProperties(re,KP);Object.defineProperty(qP,"isAxiosError",{value:!0});re.from=(t,e,n,r,s,i)=>{const o=Object.create(qP);L.toFlatObject(t,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return re.call(o,a,l,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const z3=null;function Zp(t){return L.isPlainObject(t)||L.isArray(t)}function GP(t){return L.endsWith(t,"[]")?t.slice(0,-2):t}function ox(t,e,n){return t?t.concat(e).map(function(s,i){return s=GP(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function $3(t){return L.isArray(t)&&!t.some(Zp)}const H3=L.toFlatObject(L,{},null,function(e){return/^is[A-Z]/.test(e)});function Mh(t,e,n){if(!L.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=L.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,S){return!L.isUndefined(S[v])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(e);if(!L.isFunction(s))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(L.isDate(_))return _.toISOString();if(L.isBoolean(_))return _.toString();if(!l&&L.isBlob(_))throw new re("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(_)||L.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,v,S){let x=_;if(_&&!S&&typeof _=="object"){if(L.endsWith(v,"{}"))v=r?v:v.slice(0,-2),_=JSON.stringify(_);else if(L.isArray(_)&&$3(_)||(L.isFileList(_)||L.endsWith(v,"[]"))&&(x=L.toArray(_)))return v=GP(v),x.forEach(function(T,R){!(L.isUndefined(T)||T===null)&&e.append(o===!0?ox([v],R,i):o===null?v:v+"[]",c(T))}),!1}return Zp(_)?!0:(e.append(ox(S,v,i),c(_)),!1)}const f=[],m=Object.assign(H3,{defaultVisitor:h,convertValue:c,isVisitable:Zp});function y(_,v){if(!L.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(_),L.forEach(_,function(x,w){(!(L.isUndefined(x)||x===null)&&s.call(e,x,L.isString(w)?w.trim():w,v,m))===!0&&y(x,v?v.concat(w):[w])}),f.pop()}}if(!L.isObject(t))throw new TypeError("data must be an object");return y(t),e}function ax(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function _y(t,e){this._pairs=[],t&&Mh(t,this,e)}const QP=_y.prototype;QP.append=function(e,n){this._pairs.push([e,n])};QP.toString=function(e){const n=e?function(r){return e.call(this,r,ax)}:ax;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function W3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function XP(t,e,n){if(!e)return t;const r=n&&n.encode||W3;L.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=L.isURLSearchParams(e)?e.toString():new _y(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class lx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){L.forEach(this.handlers,function(r){r!==null&&e(r)})}}const YP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q3=typeof URLSearchParams<"u"?URLSearchParams:_y,K3=typeof FormData<"u"?FormData:null,G3=typeof Blob<"u"?Blob:null,Q3={isBrowser:!0,classes:{URLSearchParams:q3,FormData:K3,Blob:G3},protocols:["http","https","file","blob","url","data"]},wy=typeof window<"u"&&typeof document<"u",em=typeof navigator=="object"&&navigator||void 0,X3=wy&&(!em||["ReactNative","NativeScript","NS"].indexOf(em.product)<0),Y3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J3=wy&&window.location.href||"http://localhost",Z3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wy,hasStandardBrowserEnv:X3,hasStandardBrowserWebWorkerEnv:Y3,navigator:em,origin:J3},Symbol.toStringTag,{value:"Module"})),vt={...Z3,...Q3};function e6(t,e){return Mh(t,new vt.classes.URLSearchParams,{visitor:function(n,r,s,i){return vt.isNode&&L.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function t6(t){return L.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function n6(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function JP(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&L.isArray(s)?s.length:o,l?(L.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!L.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&L.isArray(s[o])&&(s[o]=n6(s[o])),!a)}if(L.isFormData(t)&&L.isFunction(t.entries)){const n={};return L.forEachEntry(t,(r,s)=>{e(t6(r),s,n,0)}),n}return null}function r6(t,e,n){if(L.isString(t))try{return(e||JSON.parse)(t),L.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const xl={transitional:YP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=L.isObject(e);if(i&&L.isHTMLForm(e)&&(e=new FormData(e)),L.isFormData(e))return s?JSON.stringify(JP(e)):e;if(L.isArrayBuffer(e)||L.isBuffer(e)||L.isStream(e)||L.isFile(e)||L.isBlob(e)||L.isReadableStream(e))return e;if(L.isArrayBufferView(e))return e.buffer;if(L.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return e6(e,this.formSerializer).toString();if((a=L.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Mh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),r6(e)):e}],transformResponse:[function(e){const n=this.transitional||xl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(L.isResponse(e)||L.isReadableStream(e))return e;if(e&&L.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?re.from(a,re.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],t=>{xl.headers[t]={}});const s6=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),i6=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&s6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ux=Symbol("internals");function Fo(t){return t&&String(t).trim().toLowerCase()}function Lu(t){return t===!1||t==null?t:L.isArray(t)?t.map(Lu):String(t)}function o6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const a6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lf(t,e,n,r,s){if(L.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!L.isString(e)){if(L.isString(r))return e.indexOf(r)!==-1;if(L.isRegExp(r))return r.test(e)}}function l6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function u6(t,e){const n=L.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Ft=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const h=Fo(l);if(!h)throw new Error("header name must be a non-empty string");const f=L.findKey(s,h);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=Lu(a))}const o=(a,l)=>L.forEach(a,(c,h)=>i(c,h,l));if(L.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(L.isString(e)&&(e=e.trim())&&!a6(e))o(i6(e),n);else if(L.isObject(e)&&L.isIterable(e)){let a={},l,c;for(const h of e){if(!L.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?L.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Fo(e),e){const r=L.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return o6(s);if(L.isFunction(n))return n.call(this,s,r);if(L.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Fo(e),e){const r=L.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||lf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Fo(o),o){const a=L.findKey(r,o);a&&(!n||lf(r,r[a],a,n))&&(delete r[a],s=!0)}}return L.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||lf(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return L.forEach(this,(s,i)=>{const o=L.findKey(r,i);if(o){n[o]=Lu(s),delete n[i];return}const a=e?l6(i):String(i).trim();a!==i&&delete n[i],n[a]=Lu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return L.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&L.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[ux]=this[ux]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Fo(o);r[a]||(u6(s,o),r[a]=!0)}return L.isArray(e)?e.forEach(i):i(e),this}};Ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(Ft.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});L.freezeMethods(Ft);function uf(t,e){const n=this||xl,r=e||n,s=Ft.from(r.headers);let i=r.data;return L.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ZP(t){return!!(t&&t.__CANCEL__)}function fo(t,e,n){re.call(this,t??"canceled",re.ERR_CANCELED,e,n),this.name="CanceledError"}L.inherits(fo,re,{__CANCEL__:!0});function eA(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function c6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function h6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const y=h&&c-h;return y?Math.round(m*1e3/y):void 0}}function d6(t,e){let n=0,r=1e3/e,s,i;const o=(c,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const h=Date.now(),f=h-n;f>=r?o(c,h):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const Mc=(t,e,n=3)=>{let r=0;const s=h6(50,250);return d6(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),h=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},cx=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},hx=t=>(...e)=>L.asap(()=>t(...e)),f6=vt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,vt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,p6=vt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];L.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),L.isString(r)&&o.push("path="+r),L.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function m6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function g6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function tA(t,e,n){let r=!m6(e);return t&&(r||n==!1)?g6(t,e):e}const dx=t=>t instanceof Ft?{...t}:t;function Bs(t,e){e=e||{};const n={};function r(c,h,f,m){return L.isPlainObject(c)&&L.isPlainObject(h)?L.merge.call({caseless:m},c,h):L.isPlainObject(h)?L.merge({},h):L.isArray(h)?h.slice():h}function s(c,h,f,m){if(L.isUndefined(h)){if(!L.isUndefined(c))return r(void 0,c,f,m)}else return r(c,h,f,m)}function i(c,h){if(!L.isUndefined(h))return r(void 0,h)}function o(c,h){if(L.isUndefined(h)){if(!L.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,f){if(f in e)return r(c,h);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,f)=>s(dx(c),dx(h),f,!0)};return L.forEach(Object.keys({...t,...e}),function(h){const f=l[h]||s,m=f(t[h],e[h],h);L.isUndefined(m)&&f!==a||(n[h]=m)}),n}const nA=t=>{const e=Bs({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=Ft.from(o),e.url=XP(tA(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),L.isFormData(n)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(L.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([h,f])=>{c.includes(h.toLowerCase())&&o.set(h,f)})}}if(vt.hasStandardBrowserEnv&&(r&&L.isFunction(r)&&(r=r(e)),r||r!==!1&&f6(e.url))){const l=s&&i&&p6.read(i);l&&o.set(s,l)}return e},y6=typeof XMLHttpRequest<"u",v6=y6&&function(t){return new Promise(function(n,r){const s=nA(t);let i=s.data;const o=Ft.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,h,f,m,y,_;function v(){y&&y(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function x(){if(!S)return;const T=Ft.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),j={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:T,config:t,request:S};eA(function(P){n(P),v()},function(P){r(P),v()},j),S=null}"onloadend"in S?S.onloadend=x:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(x)},S.onabort=function(){S&&(r(new re("Request aborted",re.ECONNABORTED,t,S)),S=null)},S.onerror=function(R){const j=R&&R.message?R.message:"Network Error",V=new re(j,re.ERR_NETWORK,t,S);V.event=R||null,r(V),S=null},S.ontimeout=function(){let R=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||YP;s.timeoutErrorMessage&&(R=s.timeoutErrorMessage),r(new re(R,j.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,S)),S=null},i===void 0&&o.setContentType(null),"setRequestHeader"in S&&L.forEach(o.toJSON(),function(R,j){S.setRequestHeader(j,R)}),L.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),a&&a!=="json"&&(S.responseType=s.responseType),c&&([m,_]=Mc(c,!0),S.addEventListener("progress",m)),l&&S.upload&&([f,y]=Mc(l),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(h=T=>{S&&(r(!T||T.type?new fo(null,t,S):T),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const w=c6(s.url);if(w&&vt.protocols.indexOf(w)===-1){r(new re("Unsupported protocol "+w+":",re.ERR_BAD_REQUEST,t));return}S.send(i||null)})},_6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof re?h:new fo(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new re(`timeout ${e} of ms exceeded`,re.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>L.asap(a),l}},w6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},x6=async function*(t,e){for await(const n of E6(t))yield*w6(n,e)},E6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},fx=(t,e,n,r)=>{const s=x6(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await s.next();if(c){a(),l.close();return}let f=h.byteLength;if(n){let m=i+=f;n(m)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},px=64*1024,{isFunction:hu}=L,T6=(({Request:t,Response:e})=>({Request:t,Response:e}))(L.global),{ReadableStream:mx,TextEncoder:gx}=L.global,yx=(t,...e)=>{try{return!!t(...e)}catch{return!1}},S6=t=>{t=L.merge.call({skipUndefined:!0},T6,t);const{fetch:e,Request:n,Response:r}=t,s=e?hu(e):typeof fetch=="function",i=hu(n),o=hu(r);if(!s)return!1;const a=s&&hu(mx),l=s&&(typeof gx=="function"?(_=>v=>_.encode(v))(new gx):async _=>new Uint8Array(await new n(_).arrayBuffer())),c=i&&a&&yx(()=>{let _=!1;const v=new n(vt.origin,{body:new mx,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!v}),h=o&&a&&yx(()=>L.isReadableStream(new r("").body)),f={stream:h&&(_=>_.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!f[_]&&(f[_]=(v,S)=>{let x=v&&v[_];if(x)return x.call(v);throw new re(`Response type '${_}' is not supported`,re.ERR_NOT_SUPPORT,S)})});const m=async _=>{if(_==null)return 0;if(L.isBlob(_))return _.size;if(L.isSpecCompliantForm(_))return(await new n(vt.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(L.isArrayBufferView(_)||L.isArrayBuffer(_))return _.byteLength;if(L.isURLSearchParams(_)&&(_=_+""),L.isString(_))return(await l(_)).byteLength},y=async(_,v)=>{const S=L.toFiniteNumber(_.getContentLength());return S??m(v)};return async _=>{let{url:v,method:S,data:x,signal:w,cancelToken:T,timeout:R,onDownloadProgress:j,onUploadProgress:V,responseType:P,headers:E,withCredentials:A="same-origin",fetchOptions:C}=nA(_),k=e||fetch;P=P?(P+"").toLowerCase():"text";let D=_6([w,T&&T.toAbortSignal()],R),N=null;const ee=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let Je;try{if(V&&c&&S!=="get"&&S!=="head"&&(Je=await y(E,x))!==0){let G=new n(v,{method:"POST",body:x,duplex:"half"}),se;if(L.isFormData(x)&&(se=G.headers.get("content-type"))&&E.setContentType(se),G.body){const[ge,Ze]=cx(Je,Mc(hx(V)));x=fx(G.body,px,ge,Ze)}}L.isString(A)||(A=A?"include":"omit");const le=i&&"credentials"in n.prototype,Ve={...C,signal:D,method:S.toUpperCase(),headers:E.normalize().toJSON(),body:x,duplex:"half",credentials:le?A:void 0};N=i&&new n(v,Ve);let z=await(i?k(N,C):k(v,Ve));const Q=h&&(P==="stream"||P==="response");if(h&&(j||Q&&ee)){const G={};["status","statusText","headers"].forEach(xt=>{G[xt]=z[xt]});const se=L.toFiniteNumber(z.headers.get("content-length")),[ge,Ze]=j&&cx(se,Mc(hx(j),!0))||[];z=new r(fx(z.body,px,ge,()=>{Ze&&Ze(),ee&&ee()}),G)}P=P||"text";let J=await f[L.findKey(f,P)||"text"](z,_);return!Q&&ee&&ee(),await new Promise((G,se)=>{eA(G,se,{data:J,headers:Ft.from(z.headers),status:z.status,statusText:z.statusText,config:_,request:N})})}catch(le){throw ee&&ee(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,_,N),{cause:le.cause||le}):re.from(le,le&&le.code,_,N)}}},I6=new Map,rA=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,l,c,h=I6;for(;a--;)l=i[a],c=h.get(l),c===void 0&&h.set(l,c=a?new Map:S6(e)),h=c;return c};rA();const tm={http:z3,xhr:v6,fetch:{get:rA}};L.forEach(tm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vx=t=>`- ${t}`,P6=t=>L.isFunction(t)||t===null||t===!1,sA={getAdapter:(t,e)=>{t=L.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!P6(r)&&(s=tm[(a=String(r)).toLowerCase()],s===void 0))throw new re(`Unknown adapter '${a}'`);if(s&&(L.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(vx).join(`
`):" "+vx(o[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:tm};function cf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fo(null,t)}function _x(t){return cf(t),t.headers=Ft.from(t.headers),t.data=uf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),sA.getAdapter(t.adapter||xl.adapter,t)(t).then(function(r){return cf(t),r.data=uf.call(t,t.transformResponse,r),r.headers=Ft.from(r.headers),r},function(r){return ZP(r)||(cf(t),r&&r.response&&(r.response.data=uf.call(t,t.transformResponse,r.response),r.response.headers=Ft.from(r.response.headers))),Promise.reject(r)})}const iA="1.12.2",Fh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fh[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const wx={};Fh.transitional=function(e,n,r){function s(i,o){return"[Axios v"+iA+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new re(s(o," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!wx[o]&&(wx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Fh.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function A6(t,e,n){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new re("option "+i+" must be "+l,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+i,re.ERR_BAD_OPTION)}}const Mu={assertOptions:A6,validators:Fh},In=Mu.validators;let Rs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new lx,response:new lx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Bs(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Mu.assertOptions(r,{silentJSONParsing:In.transitional(In.boolean),forcedJSONParsing:In.transitional(In.boolean),clarifyTimeoutError:In.transitional(In.boolean)},!1),s!=null&&(L.isFunction(s)?n.paramsSerializer={serialize:s}:Mu.assertOptions(s,{encode:In.function,serialize:In.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Mu.assertOptions(n,{baseUrl:In.spelling("baseURL"),withXsrfToken:In.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&L.merge(i.common,i[n.method]);i&&L.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),n.headers=Ft.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let h,f=0,m;if(!l){const _=[_x.bind(this),void 0];for(_.unshift(...a),_.push(...c),m=_.length,h=Promise.resolve(n);f<m;)h=h.then(_[f++],_[f++]);return h}m=a.length;let y=n;for(;f<m;){const _=a[f++],v=a[f++];try{y=_(y)}catch(S){v.call(this,S);break}}try{h=_x.call(this,y)}catch(_){return Promise.reject(_)}for(f=0,m=c.length;f<m;)h=h.then(c[f++],c[f++]);return h}getUri(e){e=Bs(this.defaults,e);const n=tA(e.baseURL,e.url,e.allowAbsoluteUrls);return XP(n,e.params,e.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(e){Rs.prototype[e]=function(n,r){return this.request(Bs(r||{},{method:e,url:n,data:(r||{}).data}))}});L.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Bs(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Rs.prototype[e]=n(),Rs.prototype[e+"Form"]=n(!0)});let C6=class oA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new fo(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new oA(function(s){e=s}),cancel:e}}};function R6(t){return function(n){return t.apply(null,n)}}function N6(t){return L.isObject(t)&&t.isAxiosError===!0}const nm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nm).forEach(([t,e])=>{nm[e]=t});function aA(t){const e=new Rs(t),n=MP(Rs.prototype.request,e);return L.extend(n,Rs.prototype,e,{allOwnKeys:!0}),L.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return aA(Bs(t,s))},n}const Fe=aA(xl);Fe.Axios=Rs;Fe.CanceledError=fo;Fe.CancelToken=C6;Fe.isCancel=ZP;Fe.VERSION=iA;Fe.toFormData=Mh;Fe.AxiosError=re;Fe.Cancel=Fe.CanceledError;Fe.all=function(e){return Promise.all(e)};Fe.spread=R6;Fe.isAxiosError=N6;Fe.mergeConfig=Bs;Fe.AxiosHeaders=Ft;Fe.formToJSON=t=>JP(L.isHTMLForm(t)?new FormData(t):t);Fe.getAdapter=sA.getAdapter;Fe.HttpStatusCode=nm;Fe.default=Fe;const{Axios:q6,AxiosError:K6,CanceledError:G6,isCancel:Q6,CancelToken:X6,VERSION:Y6,all:J6,Cancel:Z6,isAxiosError:eB,spread:tB,toFormData:nB,AxiosHeaders:rB,HttpStatusCode:sB,formToJSON:iB,getAdapter:oB,mergeConfig:aB}=Fe;async function rm(t,e){try{return(await Fe.post("/api/sms",{to:t,message:e})).data}catch(n){throw console.error("SMS sending failed:",n),n}}function lA(){return{parcelReceived:(t,e,n="CourierPWA")=>`Dear ${t}, your parcel ${e} has been received and is pending collection. - ${n}`,inTransit:t=>`Your parcel ${t} is now in transit and will be delivered soon.`,delivered:t=>`Your parcel ${t} has been delivered successfully. Thank you for using our service!`}}const k6=()=>{const[t]=Ks(Vn),e=ss(),[n,r]=b.useState([]),[s,i]=b.useState(!1),[o,a]=b.useState({senderName:"",senderPhone:"",recipientName:"",recipientPhone:"",destinationId:"",shortDescription:""}),[l,c]=b.useState({});b.useEffect(()=>{(async()=>{try{const v=(await Zr(Kt(Ce,"destinations"))).docs.map(S=>({id:S.id,...S.data()}));r(v)}catch(_){console.error("Error fetching destinations:",_)}})()},[]);const h=()=>{const y={};return o.senderName.trim()||(y.senderName="Sender name is required"),o.senderPhone.trim()?Yp(o.senderPhone)||(y.senderPhone="Please enter a valid phone number"):y.senderPhone="Sender phone is required",o.recipientName.trim()||(y.recipientName="Recipient name is required"),o.recipientPhone.trim()?Yp(o.recipientPhone)||(y.recipientPhone="Please enter a valid phone number"):y.recipientPhone="Recipient phone is required",o.destinationId||(y.destinationId="Please select a destination"),o.shortDescription.trim()?o.shortDescription.length>140&&(y.shortDescription="Description must be 140 characters or less"):y.shortDescription="Description is required",c(y),Object.keys(y).length===0},f=async y=>{if(y.preventDefault(),!(!t||!h())){i(!0);try{const _=ZU(),v=n.find(w=>w.id===o.destinationId),S={trackingCode:_,createdBy:t.uid,senderName:o.senderName.trim(),senderPhone:ga(o.senderPhone),recipientName:o.recipientName.trim(),recipientPhone:ga(o.recipientPhone),destinationId:o.destinationId,shortDescription:o.shortDescription.trim(),status:"pending",createdAt:new Date,updatedAt:new Date},x=await Ya(Kt(Ce,"parcels"),S);v&&await Ya(Kt(Ce,"ledger"),{type:"delivery_fee",amount:v.baseFee,currency:"KES",staffId:t.uid,parcelId:x.id,createdAt:new Date});try{const T=lA().parcelReceived(o.recipientName,_,"CourierPWA");await rm(ga(o.recipientPhone),T)}catch(w){console.error("SMS sending failed:",w)}e(`/parcels/${x.id}`)}catch(_){console.error("Error creating parcel:",_),alert("Failed to create parcel. Please try again.")}finally{i(!1)}}},m=(y,_)=>{a(v=>({...v,[y]:_})),l[y]&&c(v=>({...v,[y]:void 0}))};return d.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e("/parcels"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:d.jsx(kP,{className:"h-5 w-5 text-gray-600"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Parcel"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Add a new parcel for delivery"})]})]}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center space-x-2",children:[d.jsx(Gp,{className:"h-5 w-5"}),d.jsx("span",{children:"Sender Information"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender Name *"}),d.jsx("input",{type:"text",value:o.senderName,onChange:y=>m("senderName",y.target.value),className:`input-field ${l.senderName?"border-red-500":""}`,placeholder:"John Doe"}),l.senderName&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.senderName})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender Phone *"}),d.jsx("input",{type:"tel",value:o.senderPhone,onChange:y=>m("senderPhone",y.target.value),className:`input-field ${l.senderPhone?"border-red-500":""}`,placeholder:"+254700000000"}),l.senderPhone&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.senderPhone})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center space-x-2",children:[d.jsx(un,{className:"h-5 w-5"}),d.jsx("span",{children:"Recipient Information"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Name *"}),d.jsx("input",{type:"text",value:o.recipientName,onChange:y=>m("recipientName",y.target.value),className:`input-field ${l.recipientName?"border-red-500":""}`,placeholder:"Jane Smith"}),l.recipientName&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.recipientName})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Phone *"}),d.jsx("input",{type:"tel",value:o.recipientPhone,onChange:y=>m("recipientPhone",y.target.value),className:`input-field ${l.recipientPhone?"border-red-500":""}`,placeholder:"+254711111111"}),l.recipientPhone&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.recipientPhone})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Parcel Details"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination *"}),d.jsxs("select",{value:o.destinationId,onChange:y=>m("destinationId",y.target.value),className:`input-field ${l.destinationId?"border-red-500":""}`,children:[d.jsx("option",{value:"",children:"Select destination"}),n.map(y=>d.jsxs("option",{value:y.id,children:[y.name,", ",y.region," - KES ",y.baseFee]},y.id))]}),l.destinationId&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.destinationId})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description * (",o.shortDescription.length,"/140)"]}),d.jsx("textarea",{value:o.shortDescription,onChange:y=>m("shortDescription",y.target.value),className:`input-field resize-none h-24 ${l.shortDescription?"border-red-500":""}`,placeholder:"Small electronics - fragile",maxLength:140}),l.shortDescription&&d.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.shortDescription})]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[d.jsx("button",{type:"button",onClick:()=>e("/parcels"),className:"btn-secondary flex-1",disabled:s,children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center space-x-2",disabled:s,children:s?d.jsx(Cs,{className:"h-4 w-4 animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsx(un,{className:"h-4 w-4"}),d.jsx("span",{children:"Create Parcel"})]})})]})]})]})},b6=()=>{var j,V,P,E,A,C;const{id:t}=zN(),e=ss(),[n]=Ks(Vn),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!0),[c,h]=b.useState(!1),[f,m]=b.useState(!1),[y,_]=b.useState(""),[v,S]=b.useState(!1);b.useEffect(()=>{(async()=>{if(t)try{const D=await Xa(_n(Ce,"parcels",t));if(D.exists()){const N={id:D.id,...D.data()};s(N);const ee=await Xa(_n(Ce,"destinations",N.destinationId));ee.exists()&&o({id:ee.id,...ee.data()})}else console.error("Parcel not found"),e("/parcels")}catch(D){console.error("Error fetching parcel:",D)}finally{l(!1)}})()},[t,e]);const x=async k=>{if(!(!r||!n)){h(!0);try{await yy(_n(Ce,"parcels",r.id),{status:k,updatedAt:new Date});const D=lA();let N="";if(k==="in_transit"?N=D.inTransit(r.trackingCode):k==="delivered"&&(N=D.delivered(r.trackingCode)),N)try{await rm(r.recipientPhone,N)}catch(ee){console.error("SMS failed:",ee)}s(ee=>ee?{...ee,status:k,updatedAt:new Date}:null)}catch(D){console.error("Error updating status:",D),alert("Failed to update status")}finally{h(!1)}}},w=async()=>{if(!(!r||!y.trim())){m(!0);try{await rm(r.recipientPhone,y.trim()),await Ya(Kt(Ce,"sms_logs"),{parcelId:r.id,recipientPhone:r.recipientPhone,message:y.trim(),sentBy:n==null?void 0:n.uid,sentAt:new Date}),alert("SMS sent successfully!"),_(""),S(!1)}catch(k){console.error("Error sending SMS:",k),alert("Failed to send SMS")}finally{m(!1)}}},T=k=>{switch(k){case"pending":return d.jsx(bP,{className:"h-5 w-5 text-yellow-600"});case"in_transit":return d.jsx(LP,{className:"h-5 w-5 text-blue-600"});case"delivered":return d.jsx(Wp,{className:"h-5 w-5 text-green-600"});default:return d.jsx(un,{className:"h-5 w-5 text-gray-600"})}},R=k=>{switch(k){case"pending":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return a?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx(Cs,{className:"h-8 w-8 animate-spin text-primary"})}):r?d.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e("/parcels"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:d.jsx(kP,{className:"h-5 w-5 text-gray-600"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.trackingCode}),d.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${R(r.status)}`,children:[T(r.status),d.jsx("span",{children:r.status.replace("_"," ").toUpperCase()})]})]}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Parcel details and management"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Delivery Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[d.jsx(Gp,{className:"h-4 w-4"}),d.jsx("span",{children:"Sender"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-gray-900 font-medium",children:r.senderName}),d.jsxs("p",{className:"text-gray-600 flex items-center space-x-2",children:[d.jsx(jc,{className:"h-4 w-4"}),d.jsx("span",{children:r.senderPhone})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[d.jsx(un,{className:"h-4 w-4"}),d.jsx("span",{children:"Recipient"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-gray-900 font-medium",children:r.recipientName}),d.jsxs("p",{className:"text-gray-600 flex items-center space-x-2",children:[d.jsx(jc,{className:"h-4 w-4"}),d.jsx("span",{children:r.recipientPhone})]})]})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Parcel Details"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),d.jsx("p",{className:"text-gray-900 mt-1",children:r.shortDescription})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Destination"}),d.jsxs("p",{className:"text-gray-900 mt-1 flex items-center space-x-2",children:[d.jsx(Vc,{className:"h-4 w-4"}),d.jsxs("span",{children:[i?`${i.name}, ${i.region}`:r.destinationId,i&&d.jsxs("span",{className:"text-gray-600 ml-2",children:["- KES ",i.baseFee]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Created"}),d.jsxs("p",{className:"text-gray-900 mt-1 flex items-center space-x-2",children:[d.jsx(Dc,{className:"h-4 w-4"}),d.jsx("span",{children:(P=(V=(j=r.createdAt)==null?void 0:j.toDate)==null?void 0:V.call(j))==null?void 0:P.toLocaleString()})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Last Updated"}),d.jsxs("p",{className:"text-gray-900 mt-1 flex items-center space-x-2",children:[d.jsx(Dc,{className:"h-4 w-4"}),d.jsx("span",{children:(C=(A=(E=r.updatedAt)==null?void 0:E.toDate)==null?void 0:A.call(E))==null?void 0:C.toLocaleString()})]})]})]})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Update Status"}),d.jsx("div",{className:"space-y-3",children:["pending","in_transit","delivered"].map(k=>d.jsxs("button",{onClick:()=>x(k),disabled:c||r.status===k,className:`w-full flex items-center space-x-3 p-3 rounded-lg font-medium transition-all duration-200 ${r.status===k?`${R(k)} cursor-default`:"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[T(k),d.jsx("span",{children:k.replace("_"," ").toUpperCase()}),r.status===k&&d.jsx(Wp,{className:"h-4 w-4 ml-auto"})]},k))}),c&&d.jsxs("div",{className:"flex items-center justify-center mt-4 text-primary",children:[d.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}),d.jsx("span",{className:"text-sm",children:"Updating..."})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SMS Actions"}),d.jsx("div",{className:"space-y-3",children:d.jsxs("button",{onClick:()=>S(!v),className:"btn-secondary w-full flex items-center justify-center space-x-2",children:[d.jsx(qU,{className:"h-4 w-4"}),d.jsx("span",{children:"Send Custom SMS"})]})}),v&&d.jsxs(Te.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 space-y-3",children:[d.jsx("textarea",{value:y,onChange:k=>_(k.target.value),placeholder:"Enter your custom message...",className:"input-field h-24 resize-none",maxLength:160}),d.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[y.length,"/160"]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>{S(!1),_("")},className:"btn-secondary flex-1",children:"Cancel"}),d.jsxs("button",{onClick:w,disabled:f||!y.trim(),className:"btn-primary flex-1 flex items-center justify-center space-x-2",children:[f?d.jsx(Cs,{className:"h-4 w-4 animate-spin"}):d.jsx(Gp,{className:"h-4 w-4"}),d.jsx("span",{children:"Send"})]})]})]})]})]})]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(un,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Parcel not found"}),d.jsx("p",{className:"text-gray-600",children:"The parcel you're looking for doesn't exist."})]})},D6=()=>{const[t]=Ks(Vn),[e,n]=b.useState([]),[r,s]=b.useState([]),[i,o]=b.useState(!0),[a,l]=b.useState("all"),[c,h]=b.useState("all"),[f,m]=b.useState("all");b.useEffect(()=>{(async()=>{if(t)try{const j=Qa(Kt(Ce,"ledger"),Dh("createdAt","desc")),P=(await Zr(j)).docs.map(D=>({id:D.id,...D.data()})),E=Qa(Kt(Ce,"staffs")),A=await Zr(E),C=new Map;A.docs.forEach(D=>{C.set(D.data().uid,D.data().name)});const k=P.map(D=>({...D,staffName:C.get(D.staffId)||"Unknown Staff"}));n(k),s(k)}catch(j){console.error("Error fetching ledger data:",j)}finally{o(!1)}})()},[t]),b.useEffect(()=>{let R=e;if(a!=="all"&&(R=R.filter(j=>j.type===a)),f!=="all"&&(R=R.filter(j=>j.staffId===f)),c!=="all"){const j=new Date,V=new Date;switch(c){case"today":V.setHours(0,0,0,0);break;case"week":V.setDate(j.getDate()-7);break;case"month":V.setMonth(j.getMonth()-1);break}R=R.filter(P=>{var E,A;return((A=(E=P.createdAt)==null?void 0:E.toDate)==null?void 0:A.call(E))>=V})}s(R)},[e,a,c,f]);const y=R=>{switch(R){case"delivery_fee":return d.jsx(un,{className:"h-4 w-4 text-blue-600"});case"bonus":return d.jsx(Xp,{className:"h-4 w-4 text-green-600"});case"withdrawal":return d.jsx(ju,{className:"h-4 w-4 text-red-600"});case"penalty":return d.jsx(ju,{className:"h-4 w-4 text-orange-600"});default:return d.jsx(qp,{className:"h-4 w-4 text-gray-600"})}},_=R=>{switch(R){case"delivery_fee":return"bg-blue-100 text-blue-800";case"bonus":return"bg-green-100 text-green-800";case"withdrawal":return"bg-red-100 text-red-800";case"penalty":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},v=()=>{const R=r.filter(V=>["delivery_fee","bonus"].includes(V.type)).reduce((V,P)=>V+P.amount,0),j=r.filter(V=>["withdrawal","penalty"].includes(V.type)).reduce((V,P)=>V+P.amount,0);return{totalIncome:R,totalExpenses:j,netAmount:R-j}},{totalIncome:S,totalExpenses:x,netAmount:w}=v(),T=Array.from(new Set(e.map(R=>R.staffId))).map(R=>{var j;return{id:R,name:((j=e.find(V=>V.staffId===R))==null?void 0:j.staffName)||"Unknown"}});return i?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(R=>d.jsx("div",{className:"card h-24 bg-gray-200"},R))})})}):d.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Complete transaction history"})]}),d.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[d.jsx(DP,{className:"h-4 w-4"}),d.jsx("span",{children:"Export Data"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-green-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Income"}),d.jsxs("p",{className:"text-xl font-bold text-green-600 mt-1",children:["KES ",S.toLocaleString()]})]}),d.jsx(Xp,{className:"h-6 w-6 text-green-500"})]})}),d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-red-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Expenses"}),d.jsxs("p",{className:"text-xl font-bold text-red-600 mt-1",children:["KES ",x.toLocaleString()]})]}),d.jsx(ju,{className:"h-6 w-6 text-red-500"})]})}),d.jsx(Te.div,{whileHover:{scale:1.02},className:`card border-l-4 ${w>=0?"border-primary":"border-orange-500"}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Net Amount"}),d.jsxs("p",{className:`text-xl font-bold mt-1 ${w>=0?"text-primary":"text-orange-600"}`,children:["KES ",w.toLocaleString()]})]}),d.jsx(qp,{className:`h-6 w-6 ${w>=0?"text-primary":"text-orange-500"}`})]})}),d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-gray-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Entries"}),d.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:r.length})]}),d.jsx(Kp,{className:"h-6 w-6 text-gray-500"})]})})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(VP,{className:"h-5 w-5 text-gray-600"}),d.jsx("span",{className:"font-medium text-gray-700",children:"Filters:"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("select",{value:a,onChange:R=>l(R.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"delivery_fee",children:"Delivery Fees"}),d.jsx("option",{value:"bonus",children:"Bonuses"}),d.jsx("option",{value:"withdrawal",children:"Withdrawals"}),d.jsx("option",{value:"penalty",children:"Penalties"})]}),d.jsxs("select",{value:f,onChange:R=>m(R.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[d.jsx("option",{value:"all",children:"All Staff"}),T.map(R=>d.jsx("option",{value:R.id,children:R.name},R.id))]}),d.jsxs("select",{value:c,onChange:R=>h(R.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[d.jsx("option",{value:"all",children:"All Time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"Last 7 Days"}),d.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]})}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Transaction History"}),r.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Staff"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Parcel ID"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(R=>{var j,V,P;return d.jsxs(Te.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 transition-colors",children:[d.jsx("td",{className:"px-4 py-4",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-gray-100",children:y(R.type)}),d.jsx("div",{children:d.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(R.type)}`,children:R.type.replace("_"," ").toUpperCase()})})]})}),d.jsx("td",{className:"px-4 py-4",children:d.jsx("div",{className:"font-medium text-gray-900",children:R.staffName})}),d.jsx("td",{className:"px-4 py-4",children:d.jsxs("div",{className:"font-bold text-gray-900",children:[R.currency," ",R.amount.toLocaleString()]})}),d.jsx("td",{className:"px-4 py-4",children:d.jsx("div",{className:"text-gray-600 text-sm",children:R.parcelId||"-"})}),d.jsx("td",{className:"px-4 py-4",children:d.jsx("div",{className:"text-gray-600 text-sm",children:(P=(V=(j=R.createdAt)==null?void 0:j.toDate)==null?void 0:V.call(j))==null?void 0:P.toLocaleString()})})]},R.id)})})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Kp,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No entries found"}),d.jsx("p",{className:"text-gray-600",children:a!=="all"||c!=="all"?"Try adjusting your filters":"Transaction history will appear here"})]})]})]})},V6=()=>{var T,R,j;const[t]=Ks(Vn),[e,n]=b.useState({balance:0,lastUpdated:null}),[r,s]=b.useState([]),[i,o]=b.useState([]),[a,l]=b.useState(!0),[c,h]=b.useState("all"),[f,m]=b.useState("all");b.useEffect(()=>{(async()=>{if(t)try{const P=await Xa(_n(Ce,"wallets",t.uid));P.exists()&&n(P.data());const E=Qa(Kt(Ce,"ledger"),py("staffId","==",t.uid),Dh("createdAt","desc")),C=(await Zr(E)).docs.map(k=>({id:k.id,...k.data()}));s(C),o(C)}catch(P){console.error("Error fetching wallet data:",P)}finally{l(!1)}})()},[t]),b.useEffect(()=>{let V=r;if(c!=="all"&&(V=V.filter(P=>P.type===c)),f!=="all"){const P=new Date,E=new Date;switch(f){case"today":E.setHours(0,0,0,0);break;case"week":E.setDate(P.getDate()-7);break;case"month":E.setMonth(P.getMonth()-1);break}V=V.filter(A=>{var C,k;return((k=(C=A.createdAt)==null?void 0:C.toDate)==null?void 0:k.call(C))>=E})}o(V)},[r,c,f]);const y=V=>{switch(V){case"delivery_fee":case"bonus":return d.jsx(Us,{className:"h-4 w-4 text-green-600"});case"withdrawal":case"penalty":return d.jsx(KU,{className:"h-4 w-4 text-red-600"});default:return d.jsx(ma,{className:"h-4 w-4 text-gray-600"})}},_=V=>{switch(V){case"delivery_fee":case"bonus":return"text-green-600";case"withdrawal":case"penalty":return"text-red-600";default:return"text-gray-600"}},v=V=>`${["delivery_fee","bonus"].includes(V.type)?"+":"-"}${V.currency} ${V.amount.toLocaleString()}`,S=()=>{const V=i.filter(E=>["delivery_fee","bonus"].includes(E.type)).reduce((E,A)=>E+A.amount,0),P=i.filter(E=>["withdrawal","penalty"].includes(E.type)).reduce((E,A)=>E+A.amount,0);return{income:V,expenses:P}},{income:x,expenses:w}=S();return a?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(V=>d.jsx("div",{className:"card h-24 bg-gray-200"},V))})})}):d.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Wallet"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your earnings and transactions"})]}),d.jsx("div",{className:"flex items-center space-x-3",children:d.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[d.jsx(DP,{className:"h-4 w-4"}),d.jsx("span",{children:"Export"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-primary",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Current Balance"}),d.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:["KES ",e.balance.toLocaleString()]}),e.lastUpdated&&d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Updated ",(j=(R=(T=e.lastUpdated).toDate)==null?void 0:R.call(T))==null?void 0:j.toLocaleDateString()]})]}),d.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:d.jsx(ma,{className:"h-8 w-8 text-primary"})})]})}),d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-green-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Income"}),d.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["KES ",x.toLocaleString()]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This period"})]}),d.jsx("div",{className:"p-3 rounded-xl bg-green-500/10",children:d.jsx(Xp,{className:"h-6 w-6 text-green-500"})})]})}),d.jsx(Te.div,{whileHover:{scale:1.02},className:"card border-l-4 border-red-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Expenses"}),d.jsxs("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["KES ",w.toLocaleString()]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This period"})]}),d.jsx("div",{className:"p-3 rounded-xl bg-red-500/10",children:d.jsx(ju,{className:"h-6 w-6 text-red-500"})})]})})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(VP,{className:"h-5 w-5 text-gray-600"}),d.jsx("span",{className:"font-medium text-gray-700",children:"Filters:"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("select",{value:c,onChange:V=>h(V.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"delivery_fee",children:"Delivery Fees"}),d.jsx("option",{value:"bonus",children:"Bonuses"}),d.jsx("option",{value:"withdrawal",children:"Withdrawals"}),d.jsx("option",{value:"penalty",children:"Penalties"})]}),d.jsxs("select",{value:f,onChange:V=>m(V.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[d.jsx("option",{value:"all",children:"All Time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"Last 7 Days"}),d.jsx("option",{value:"month",children:"Last 30 Days"})]})]}),d.jsxs("div",{className:"lg:ml-auto text-sm text-gray-600",children:["Showing ",i.length," of ",r.length," transactions"]})]})}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Transactions"}),i.length>0&&d.jsxs("p",{className:"text-sm text-gray-600",children:["Net: KES ",(x-w).toLocaleString()]})]}),i.length>0?d.jsx("div",{className:"space-y-3",children:i.map(V=>{var P,E,A;return d.jsxs(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 rounded-lg bg-white",children:y(V.type)}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900 capitalize",children:V.type.replace("_"," ")}),d.jsx("div",{className:"text-sm text-gray-600",children:V.description||"No description"}),V.parcelId&&d.jsxs("div",{className:"text-xs text-gray-500",children:["Parcel: ",V.parcelId]})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`font-bold ${_(V.type)}`,children:v(V)}),d.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-1",children:[d.jsx(Dc,{className:"h-3 w-3"}),d.jsx("span",{children:(A=(E=(P=V.createdAt)==null?void 0:P.toDate)==null?void 0:E.call(P))==null?void 0:A.toLocaleDateString()})]})]})]},V.id)})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(ma,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No transactions found"}),d.jsx("p",{className:"text-gray-600",children:c!=="all"||f!=="all"?"Try adjusting your filters":"Your transaction history will appear here"})]})]})]})},j6=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState(null),[o,a]=b.useState(!1),[l,c]=b.useState({name:"",region:"",baseFee:0});b.useEffect(()=>{h()},[]);const h=async()=>{try{const S=(await Zr(Kt(Ce,"destinations"))).docs.map(x=>({id:x.id,...x.data()}));e(S)}catch(v){console.error("Error fetching destinations:",v)}finally{r(!1)}},f=async()=>{if(!l.name||!l.region||l.baseFee<=0){alert("Please fill all fields with valid data");return}try{const S={id:(await Ya(Kt(Ce,"destinations"),{...l,createdAt:new Date})).id,...l,createdAt:new Date};e([...t,S]),c({name:"",region:"",baseFee:0}),a(!1)}catch(v){console.error("Error adding destination:",v),alert("Failed to add destination")}},m=async v=>{const S=t.find(x=>x.id===v);if(S)try{await yy(_n(Ce,"destinations",v),{name:S.name,region:S.region,baseFee:S.baseFee}),i(null)}catch(x){console.error("Error updating destination:",x),alert("Failed to update destination")}},y=async v=>{if(confirm("Are you sure you want to delete this destination?"))try{await RP(_n(Ce,"destinations",v)),e(t.filter(S=>S.id!==v))}catch(S){console.error("Error deleting destination:",S),alert("Failed to delete destination")}},_=(v,S,x)=>{e(t.map(w=>w.id===v?{...w,[S]:x}:w))};return n?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:[1,2,3].map(v=>d.jsx("div",{className:"card h-20 bg-gray-200 mb-4"},v))})}):d.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Destinations"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage delivery destinations and fees"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"Add Destination"})]})]}),o&&d.jsxs(Te.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"card border-l-4 border-primary",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Destination"}),d.jsx("button",{onClick:()=>{a(!1),c({name:"",region:"",baseFee:0})},className:"p-1 hover:bg-gray-100 rounded",children:d.jsx(Lc,{className:"h-4 w-4 text-gray-500"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",value:l.name,onChange:v=>c({...l,name:v.target.value}),className:"input-field",placeholder:"Nairobi CBD"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),d.jsx("input",{type:"text",value:l.region,onChange:v=>c({...l,region:v.target.value}),className:"input-field",placeholder:"Nairobi"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Fee (KES)"}),d.jsx("input",{type:"number",value:l.baseFee,onChange:v=>c({...l,baseFee:parseInt(v.target.value)||0}),className:"input-field",placeholder:"150",min:"0"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:()=>{a(!1),c({name:"",region:"",baseFee:0})},className:"btn-secondary",children:"Cancel"}),d.jsxs("button",{onClick:f,className:"btn-primary flex items-center space-x-2",children:[d.jsx(Oc,{className:"h-4 w-4"}),d.jsx("span",{children:"Add Destination"})]})]})]}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(v=>d.jsx(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card hover:shadow-md transition-all duration-200",children:s===v.id?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",value:v.name,onChange:S=>_(v.id,"name",S.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),d.jsx("input",{type:"text",value:v.region,onChange:S=>_(v.id,"region",S.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Fee (KES)"}),d.jsx("input",{type:"number",value:v.baseFee,onChange:S=>_(v.id,"baseFee",parseInt(S.target.value)||0),className:"input-field",min:"0"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsxs("button",{onClick:()=>i(null),className:"btn-secondary flex items-center space-x-2",children:[d.jsx(Lc,{className:"h-4 w-4"}),d.jsx("span",{children:"Cancel"})]}),d.jsxs("button",{onClick:()=>m(v.id),className:"btn-primary flex items-center space-x-2",children:[d.jsx(Oc,{className:"h-4 w-4"}),d.jsx("span",{children:"Save"})]})]})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:d.jsx(Vc,{className:"h-5 w-5 text-primary"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.name}),d.jsx("p",{className:"text-gray-600",children:v.region})]})]})}),d.jsxs("div",{className:"flex items-center space-x-6",children:[d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-green-600 font-bold",children:[d.jsx(qp,{className:"h-4 w-4"}),d.jsxs("span",{children:["KES ",v.baseFee.toLocaleString()]})]}),d.jsx("p",{className:"text-xs text-gray-500",children:"Base fee"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>i(v.id),className:"p-2 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",title:"Edit destination",children:d.jsx(jP,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>y(v.id),className:"p-2 hover:bg-red-100 text-red-600 rounded-lg transition-colors",title:"Delete destination",children:d.jsx(OP,{className:"h-4 w-4"})})]})]})]})},v.id)):d.jsxs("div",{className:"card text-center py-12",children:[d.jsx(Vc,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No destinations yet"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first delivery destination to get started"}),d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary inline-flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"Add Destination"})]})]})})]})},O6=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState(null),[o,a]=b.useState(!1),[l,c]=b.useState({uid:"",name:"",phone:"",role:"staff"});b.useEffect(()=>{h()},[]);const h=async()=>{try{const w=(await Zr(Kt(Ce,"staffs"))).docs.map(T=>({id:T.id,...T.data()}));e(w)}catch(x){console.error("Error fetching staff:",x)}finally{r(!1)}},f=async()=>{if(!l.uid||!l.name||!l.phone){alert("Please fill all required fields");return}if(t.some(x=>x.uid===l.uid)){alert("A staff member with this UID already exists");return}try{const w={id:(await Ya(Kt(Ce,"staffs"),{...l,createdAt:new Date})).id,...l,createdAt:new Date};e([...t,w]),c({uid:"",name:"",phone:"",role:"staff"}),a(!1)}catch(x){console.error("Error adding staff:",x),alert("Failed to add staff member")}},m=async x=>{const w=t.find(T=>T.id===x);if(w)try{await yy(_n(Ce,"staffs",x),{name:w.name,phone:w.phone,role:w.role}),i(null)}catch(T){console.error("Error updating staff:",T),alert("Failed to update staff member")}},y=async x=>{if(confirm("Are you sure you want to delete this staff member?"))try{await RP(_n(Ce,"staffs",x)),e(t.filter(w=>w.id!==x))}catch(w){console.error("Error deleting staff:",w),alert("Failed to delete staff member")}},_=(x,w,T)=>{e(t.map(R=>R.id===x?{...R,[w]:T}:R))},v=x=>x==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800",S=x=>x==="admin"?d.jsx(Qp,{className:"h-4 w-4"}):d.jsx(sx,{className:"h-4 w-4"});return n?d.jsx("div",{className:"space-y-6",children:d.jsx("div",{className:"animate-pulse",children:[1,2,3].map(x=>d.jsx("div",{className:"card h-20 bg-gray-200 mb-4"},x))})}):d.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Management"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Manage staff members and their roles"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary flex items-center space-x-2",children:[d.jsx(Us,{className:"h-4 w-4"}),d.jsx("span",{children:"Add Staff"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsx("div",{className:"card border-l-4 border-primary",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Staff"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.length})]}),d.jsx(QU,{className:"h-6 w-6 text-primary"})]})}),d.jsx("div",{className:"card border-l-4 border-purple-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Admins"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.filter(x=>x.role==="admin").length})]}),d.jsx(Qp,{className:"h-6 w-6 text-purple-500"})]})}),d.jsx("div",{className:"card border-l-4 border-blue-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Staff"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.filter(x=>x.role==="staff").length})]}),d.jsx(sx,{className:"h-6 w-6 text-blue-500"})]})})]}),o&&d.jsxs(Te.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"card border-l-4 border-primary",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Staff Member"}),d.jsx("button",{onClick:()=>{a(!1),c({uid:"",name:"",phone:"",role:"staff"})},className:"p-1 hover:bg-gray-100 rounded",children:d.jsx(Lc,{className:"h-4 w-4 text-gray-500"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firebase UID *"}),d.jsx("input",{type:"text",value:l.uid,onChange:x=>c({...l,uid:x.target.value}),className:"input-field",placeholder:"Firebase User ID"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),d.jsx("input",{type:"text",value:l.name,onChange:x=>c({...l,name:x.target.value}),className:"input-field",placeholder:"John Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),d.jsx("input",{type:"tel",value:l.phone,onChange:x=>c({...l,phone:x.target.value}),className:"input-field",placeholder:"+254700000000"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:l.role,onChange:x=>c({...l,role:x.target.value}),className:"input-field",children:[d.jsx("option",{value:"staff",children:"Staff"}),d.jsx("option",{value:"admin",children:"Admin"})]})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:()=>{a(!1),c({uid:"",name:"",phone:"",role:"staff"})},className:"btn-secondary",children:"Cancel"}),d.jsxs("button",{onClick:f,className:"btn-primary flex items-center space-x-2",children:[d.jsx(Oc,{className:"h-4 w-4"}),d.jsx("span",{children:"Add Staff"})]})]})]}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(x=>d.jsx(Te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card hover:shadow-md transition-all duration-200",children:s===x.id?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),d.jsx("input",{type:"text",value:x.name,onChange:w=>_(x.id,"name",w.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),d.jsx("input",{type:"tel",value:x.phone,onChange:w=>_(x.id,"phone",w.target.value),className:"input-field"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:x.role,onChange:w=>_(x.id,"role",w.target.value),className:"input-field",children:[d.jsx("option",{value:"staff",children:"Staff"}),d.jsx("option",{value:"admin",children:"Admin"})]})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:()=>i(null),className:"btn-secondary",children:"Cancel"}),d.jsxs("button",{onClick:()=>m(x.id),className:"btn-primary flex items-center space-x-2",children:[d.jsx(Oc,{className:"h-4 w-4"}),d.jsx("span",{children:"Save"})]})]})]}):d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.name}),d.jsx("p",{className:"text-gray-600 text-sm",children:x.phone}),d.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-2 ${v(x.role)}`,children:[S(x.role),d.jsx("span",{className:"ml-1 capitalize",children:x.role})]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{onClick:()=>i(x.id),className:"btn-secondary flex items-center space-x-1",children:[d.jsx(jP,{className:"h-4 w-4"}),d.jsx("span",{children:"Edit"})]}),d.jsxs("button",{onClick:()=>y(x.id),className:"btn-danger flex items-center space-x-1",children:[d.jsx(OP,{className:"h-4 w-4"}),d.jsx("span",{children:"Delete"})]})]})]})},x.id)):d.jsx("div",{className:"text-center text-gray-500",children:"No staff members found."})})]})};function L6(){return d.jsx(dk,{children:d.jsx("div",{className:"min-h-screen bg-background",children:d.jsx(DV,{mode:"wait",children:d.jsxs(V0,{children:[d.jsx(tn,{path:"/login",element:d.jsx(e3,{})}),d.jsx(tn,{path:"/*",element:d.jsx(XU,{children:d.jsxs("div",{className:"flex flex-col min-h-screen",children:[d.jsx(YU,{}),d.jsx("main",{className:"flex-1 p-4",children:d.jsx(JU,{children:d.jsxs(V0,{children:[d.jsx(tn,{path:"/",element:d.jsx(rk,{to:"/dashboard"})}),d.jsx(tn,{path:"/dashboard",element:d.jsx(t3,{})}),d.jsx(tn,{path:"/parcels",element:d.jsx(n3,{})}),d.jsx(tn,{path:"/parcels/new",element:d.jsx(k6,{})}),d.jsx(tn,{path:"/parcels/:id",element:d.jsx(b6,{})}),d.jsx(tn,{path:"/ledger",element:d.jsx(D6,{})}),d.jsx(tn,{path:"/wallet",element:d.jsx(V6,{})}),d.jsx(tn,{path:"/admin/destinations",element:d.jsx(j6,{})}),d.jsx(tn,{path:"/admin/staff",element:d.jsx(O6,{})})]})})})]})})})]})})})})}hf.createRoot(document.getElementById("root")).render(d.jsx(Uc.StrictMode,{children:d.jsx(L6,{})}));
